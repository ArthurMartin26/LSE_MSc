-----------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014/Ghana_dhs14_dataprep.log
  log type:  text
 opened on:   2 Feb 2026, 16:07:47

. 
. 
. ********************************************************************************
. *** Ghana  DHS 2014 ***
. ********************************************************************************
. 
. 
. ********************************************************************************
. *** Step 1: Data preparation 
. *** Selecting variables from BR, IR, & MR recode & merging with PR recode 
. ********************************************************************************
. 
. * In Ghana DHS 2022, height and weight measurements were collected from children (0-5), women (15-49) and men (15-59)
. 
. 
. ********************************************************************************
. *** Step 1.1 KR - CHILDREN's RECODE (under 5)
. ********************************************************************************
. 
. ** // CHANGED FROM ORIGINAL 
. use "$path_in\GHPR72FL.DTA", clear 

. 
. *** Generate individual unique key variable required for data merging
. *** hv001=cluster number; 
. *** hv002=household number; 
. *** hvidx=child's line number in household
. gen double ind_id = hv001*1000000 + hv002*100 + hvidx

. format ind_id %20.0g

. label var  ind_id "Individual ID"

. 
. 
. duplicates report ind_id

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |        43945             0
--------------------------------------

. duplicates tag ind_id, gen(duplicates)

Duplicates in terms of ind_id

. tab hc13 if duplicates!=0
no observations

. 
. sum hv105 if hv120==1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
       hv105 |      3,216    1.980721    1.429396          0          5

. keep if hv120==1
(40,729 observations deleted)

. 
. gen child_KR=1 

.         //Generate identification variable for observations in KR recode
. 
. 
. *** Next, indicate to STATA where the igrowup_restricted.ado file is stored:
.         ***Source of ado file: http://www.who.int/childgrowth/software/en/
. adopath + "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_child"
  [1]  (BASE)      "C:\Program Files (x86)\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files (x86)\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\Stata configuration\Stata15\ado\personal/"
  [5]  (PLUS)      "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\Stata configuration\Stata15\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"
  [8]              "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_child"

. 
. 
. *** We will now proceed to create three nutritional variables: 
.         *** weight-for-age (underweight),  
.         *** weight-for-height (wasting) 
.         *** height-for-age (stunting)
. 
.         
. /* We use 'reflib' to specify the package directory where the .dta files 
> containing the WHO Child Growth Standards are stored. Note that we use 
> strX to specify the length of the path in string. If the path is long, 
> you may specify str55 or more, so it will run. */       
. gen str150 reflib = "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_child"

. lab var reflib "Directory of reference tables"

. 
. 
. /* We use datalib to specify the working directory where the input STATA 
> dataset containing the anthropometric measurement is stored. */
. gen str150 datalib = "$path_out" 

. lab var datalib "Directory for datafiles"

. 
. 
. /* We use datalab to specify the name that will prefix the output files that 
> will be produced from using this ado file (datalab_z_r_rc and datalab_prev_rc)*/
. gen str30 datalab = "children_nutri_Ghana" 

. lab var datalab "Working file"

. 
. 
. *** Next check the variables that WHO ado needs to calculate the z-scores:
. *** sex, age, weight, height
. 
. *** Variable: SEX ***
. tab hv104, miss 

     sex of |
  household |
     member |      Freq.     Percent        Cum.
------------+-----------------------------------
       male |      1,665       51.77       51.77
     female |      1,551       48.23      100.00
------------+-----------------------------------
      Total |      3,216      100.00

.         //"1" for male ;"2" for female
. tab  hv104, nol 

     sex of |
  household |
     member |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      1,665       51.77       51.77
          2 |      1,551       48.23      100.00
------------+-----------------------------------
      Total |      3,216      100.00

. clonevar gender = hv104

. desc gender

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
gender          byte    %8.0g      HV104      sex of household member

. tab gender

     sex of |
  household |
     member |      Freq.     Percent        Cum.
------------+-----------------------------------
       male |      1,665       51.77       51.77
     female |      1,551       48.23      100.00
------------+-----------------------------------
      Total |      3,216      100.00

. 
. *** Variable: AGE ***
. clonevar age=hc1

. sum age

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |      3,216    29.14863    17.19846          0         59

. 
. gen str6 ageunit="days"

. lab var ageunit "days"

. 
. *** Variable: BODY WEIGHT (KILOGRAMS) ***
. codebook hc2, tab (10000)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hc2                                                                                                                 child's weight in kilograms (1 decimal)
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HC2, but 181 nonmissing values are not labeled

                 range:  [10,9996]                    units:  1
         unique values:  184                      missing .:  0/3,216

            tabulation:  Freq.   Numeric  Label
                             1        10  
                             1        26  
                             1        27  
                             4        28  
                             2        29  
                             3        30  
                             2        32  
                             8        33  
                             1        34  
                             1        35  
                             3        36  
                             2        37  
                             7        38  
                             7        39  
                             9        40  
                             3        41  
                             4        42  
                             7        43  
                             4        44  
                             3        45  
                            12        46  
                             6        47  
                             6        48  
                             3        49  
                             6        50  
                            13        51  
                             7        52  
                             5        53  
                            14        54  
                             5        55  
                            14        56  
                             5        57  
                            11        58  
                            15        59  
                            10        60  
                            21        61  
                            17        62  
                            17        63  
                             8        64  
                            17        65  
                            14        66  
                            13        67  
                            16        68  
                            26        69  
                            13        70  
                            22        71  
                            23        72  
                            32        73  
                            18        74  
                            17        75  
                            22        76  
                            19        77  
                            22        78  
                            23        79  
                            17        80  
                            29        81  
                            17        82  
                            20        83  
                            18        84  
                            19        85  
                            28        86  
                            29        87  
                            24        88  
                            29        89  
                            39        90  
                            24        91  
                            34        92  
                            24        93  
                            36        94  
                            26        95  
                            26        96  
                            32        97  
                            19        98  
                            26        99  
                            32       100  
                            26       101  
                            26       102  
                            32       103  
                            29       104  
                            24       105  
                            39       106  
                            19       107  
                            36       108  
                            34       109  
                            29       110  
                            25       111  
                            35       112  
                            34       113  
                            29       114  
                            24       115  
                            36       116  
                            19       117  
                            28       118  
                            28       119  
                            36       120  
                            35       121  
                            36       122  
                            30       123  
                            37       124  
                            35       125  
                            27       126  
                            31       127  
                            27       128  
                            31       129  
                            26       130  
                            41       131  
                            39       132  
                            26       133  
                            35       134  
                            23       135  
                            26       136  
                            33       137  
                            41       138  
                            29       139  
                            31       140  
                            29       141  
                            29       142  
                            37       143  
                            26       144  
                            31       145  
                            29       146  
                            21       147  
                            22       148  
                            22       149  
                            28       150  
                            27       151  
                            19       152  
                            20       153  
                            25       154  
                            18       155  
                            18       156  
                            15       157  
                            22       158  
                            20       159  
                            17       160  
                            17       161  
                            20       162  
                            12       163  
                            23       164  
                             4       165  
                            18       166  
                             8       167  
                            15       168  
                            11       169  
                            14       170  
                             4       171  
                            11       172  
                            11       173  
                             8       174  
                             9       175  
                             8       176  
                             8       177  
                             6       178  
                             6       179  
                             9       180  
                             5       181  
                             3       182  
                             7       183  
                             4       184  
                             4       185  
                             6       186  
                             3       187  
                             2       188  
                             2       189  
                             3       190  
                             3       191  
                             1       192  
                             2       193  
                             2       194  
                             3       195  
                             1       196  
                             3       197  
                             3       199  
                             1       200  
                             3       201  
                             3       202  
                             2       205  
                             1       207  
                             1       214  
                             1       216  
                             1       223  
                            76      9994  not present
                            25      9995  refused
                             8      9996  other

. gen     weight = hc2/10 

.         //We divide it by 10 in order to express it in kilograms 
. tab hc2 if hc2>990,m nol   

    child's |
  weight in |
  kilograms |
(1 decimal) |      Freq.     Percent        Cum.
------------+-----------------------------------
       9994 |         76       69.72       69.72
       9995 |         25       22.94       92.66
       9996 |          8        7.34      100.00
------------+-----------------------------------
      Total |        109      100.00

.         //Missing values are 994 to 996
. replace weight = . if hc2>=990 
(109 real changes made, 109 to missing)

.         //All missing values or out of range are replaced as "."
. tab     hc13 hc2 if hc2>=990 | hc2==., miss 

  result of |
measurement |
          - |  child's weight in kilograms (1
height/weig |             decimal)
         ht | not prese    refused      other |     Total
------------+---------------------------------+----------
not present |        76          0          0 |        76 
    refused |         0         24          0 |        24 
      other |         0          1          8 |         9 
------------+---------------------------------+----------
      Total |        76         25          8 |       109 

.         //hc13: result of the measurement
. desc weight 

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
weight          double  %10.0g                

. summ weight

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      weight |      3,107    11.42864    3.522747          1       22.3

. 
. 
. *** Variable: HEIGHT (CENTIMETERS)
. codebook hc3, tab (10000)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hc3                                                                                                               child's height in centimeters (1 decimal)
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HC3, but 594 nonmissing values are not labeled

                 range:  [413,9996]                   units:  1
         unique values:  597                      missing .:  0/3,216

            tabulation:  Freq.   Numeric  Label
                             1       413  
                             1       427  
                             1       462  
                             1       465  
                             2       470  
                             1       480  
                             1       483  
                             1       486  
                             1       492  
                             1       494  
                             2       496  
                             1       499  
                             2       500  
                             2       501  
                             1       503  
                             1       504  
                             1       505  
                             2       510  
                             1       513  
                             2       514  
                             3       515  
                             1       517  
                             1       518  
                             2       520  
                             1       521  
                             1       522  
                             2       523  
                             1       526  
                             2       528  
                             1       529  
                             1       530  
                             1       531  
                             3       532  
                             2       534  
                             1       536  
                             1       539  
                             1       540  
                             1       541  
                             3       542  
                             2       543  
                             2       544  
                             5       545  
                             2       548  
                             2       549  
                             1       550  
                             4       552  
                             3       553  
                             2       554  
                             1       555  
                             3       556  
                             3       559  
                             1       560  
                             2       561  
                             2       562  
                             3       563  
                             2       564  
                             2       565  
                             1       568  
                             2       569  
                             1       570  
                             1       572  
                             6       573  
                             3       574  
                             3       575  
                             4       576  
                             1       577  
                             2       578  
                             2       580  
                             1       581  
                             2       582  
                             2       584  
                             1       585  
                             3       586  
                             1       587  
                             2       588  
                             3       589  
                             3       590  
                             5       592  
                             1       593  
                             2       594  
                             2       595  
                             3       597  
                             4       598  
                             2       599  
                             2       600  
                             5       601  
                             2       602  
                             2       603  
                             1       604  
                             2       605  
                             4       607  
                             2       609  
                             4       610  
                             1       611  
                             5       612  
                             3       613  
                             9       614  
                             2       616  
                             1       617  
                             2       618  
                             2       619  
                             3       620  
                             1       621  
                             7       622  
                             1       623  
                             5       624  
                             5       625  
                             2       626  
                             6       627  
                             2       628  
                             6       630  
                             4       631  
                             1       632  
                             2       633  
                             3       634  
                             2       635  
                             1       636  
                             5       637  
                             5       638  
                             3       639  
                             2       640  
                             2       641  
                             6       642  
                             4       643  
                             6       644  
                             4       645  
                             5       646  
                             1       647  
                             5       648  
                             1       649  
                             5       650  
                             4       651  
                             3       652  
                             6       653  
                             2       654  
                             7       655  
                             3       656  
                             2       657  
                             6       658  
                             2       659  
                             7       660  
                             3       661  
                             4       662  
                             7       663  
                             4       664  
                             4       665  
                             2       666  
                             3       667  
                             2       668  
                             3       669  
                             3       670  
                             3       671  
                             9       672  
                             5       673  
                             2       674  
                             6       675  
                             6       676  
                             2       677  
                             3       678  
                             1       679  
                             5       680  
                             6       681  
                             3       682  
                             3       683  
                             4       684  
                             2       685  
                             4       686  
                             5       687  
                             3       688  
                             3       689  
                             3       690  
                             6       691  
                             5       692  
                             2       693  
                             3       694  
                             5       695  
                             4       696  
                             6       697  
                             4       698  
                             1       699  
                             7       700  
                             6       701  
                             7       702  
                             5       703  
                             7       704  
                             2       705  
                             6       706  
                             5       707  
                             7       708  
                             3       709  
                             8       710  
                             4       711  
                            12       712  
                             6       713  
                             6       714  
                             5       715  
                             4       716  
                             2       717  
                             5       718  
                             1       719  
                             6       720  
                             1       721  
                             4       722  
                             5       723  
                             4       724  
                             6       725  
                             6       726  
                             5       727  
                             3       728  
                             6       729  
                             9       730  
                             4       731  
                             7       732  
                             3       733  
                             3       734  
                            12       735  
                             5       736  
                             4       737  
                             7       738  
                             2       739  
                            12       740  
                             7       741  
                             6       742  
                             6       743  
                             4       744  
                             6       745  
                             8       746  
                             5       747  
                             4       748  
                             8       749  
                             6       750  
                             3       751  
                             3       752  
                             7       753  
                             3       754  
                             4       755  
                             3       756  
                             4       757  
                             4       758  
                             3       759  
                            12       760  
                             6       761  
                            10       762  
                             5       763  
                             3       764  
                             5       765  
                             2       766  
                             5       767  
                             3       768  
                             3       769  
                            10       770  
                             1       771  
                             5       772  
                             5       773  
                             6       774  
                            12       775  
                             6       776  
                             4       777  
                            11       778  
                             3       779  
                            16       780  
                            11       781  
                             7       782  
                             9       783  
                             9       784  
                            10       785  
                            10       786  
                             3       787  
                             6       788  
                             6       789  
                            11       790  
                             6       791  
                             9       792  
                             2       793  
                             3       794  
                            14       795  
                             6       796  
                             7       797  
                             8       798  
                             6       799  
                             7       800  
                            10       801  
                             8       802  
                             8       803  
                            11       804  
                            12       805  
                             3       806  
                             5       807  
                             2       808  
                             2       809  
                            12       810  
                             4       811  
                            11       812  
                             6       813  
                             2       814  
                             7       815  
                             8       816  
                             9       817  
                             8       818  
                             1       819  
                            15       820  
                             8       821  
                             4       822  
                             7       823  
                             4       824  
                            15       825  
                             5       826  
                             6       827  
                             6       828  
                             7       829  
                             9       830  
                            13       831  
                            10       832  
                             4       833  
                            15       834  
                            11       835  
                            10       836  
                             7       837  
                             6       838  
                             5       839  
                             9       840  
                            10       841  
                             7       842  
                            10       843  
                             6       844  
                            16       845  
                            10       846  
                             3       847  
                            11       848  
                             4       849  
                             8       850  
                             8       851  
                             8       852  
                            11       853  
                             2       854  
                            12       855  
                             9       856  
                             6       857  
                            10       858  
                             5       859  
                             4       860  
                             7       861  
                            10       862  
                            11       863  
                             8       864  
                            11       865  
                             8       866  
                            12       867  
                             7       868  
                             7       869  
                             7       870  
                             6       871  
                            11       872  
                            12       873  
                             8       874  
                            13       875  
                             9       876  
                            11       877  
                             9       878  
                             3       879  
                             8       880  
                             6       881  
                            11       882  
                             9       883  
                             5       884  
                            10       885  
                             8       886  
                             5       887  
                            11       888  
                             4       889  
                             9       890  
                             5       891  
                             7       892  
                             5       893  
                            12       894  
                            12       895  
                            12       896  
                             7       897  
                             8       898  
                             6       899  
                            11       900  
                             5       901  
                             7       902  
                             7       903  
                             7       904  
                             8       905  
                             8       906  
                             4       907  
                             1       908  
                             6       909  
                             7       910  
                             6       911  
                            11       912  
                             4       913  
                             7       914  
                            12       915  
                             7       916  
                             3       917  
                             7       918  
                             4       919  
                            10       920  
                             7       921  
                             7       922  
                            17       923  
                             5       924  
                             8       925  
                            14       926  
                             8       927  
                             9       928  
                             3       929  
                            10       930  
                             4       931  
                             6       932  
                            10       933  
                             9       934  
                             8       935  
                             1       936  
                             5       937  
                             6       938  
                             6       939  
                             8       940  
                             5       941  
                            11       942  
                            10       943  
                             6       944  
                             8       945  
                            12       946  
                             8       947  
                             8       948  
                             6       949  
                             9       950  
                             9       951  
                            10       952  
                             4       953  
                             8       954  
                             9       955  
                             9       956  
                             8       957  
                             6       958  
                             9       959  
                             8       960  
                             7       961  
                             9       962  
                            11       963  
                            17       964  
                             9       965  
                             2       966  
                             8       967  
                            12       968  
                             4       969  
                            12       970  
                            10       971  
                             9       972  
                             8       973  
                             8       974  
                             7       975  
                             8       976  
                             4       977  
                             3       978  
                             3       979  
                             3       980  
                            10       981  
                            16       982  
                             8       983  
                             6       984  
                            11       985  
                             5       986  
                             9       987  
                            12       988  
                             5       989  
                             6       990  
                             4       991  
                            10       992  
                             6       993  
                             9       994  
                             8       995  
                             9       996  
                             6       997  
                            10       998  
                             3       999  
                             4      1000  
                             8      1001  
                             7      1002  
                             9      1003  
                             5      1004  
                             6      1005  
                             5      1006  
                             8      1007  
                             8      1008  
                             2      1009  
                             7      1010  
                             8      1011  
                             2      1012  
                             4      1013  
                             4      1014  
                             8      1015  
                             3      1016  
                             4      1017  
                            11      1018  
                             7      1019  
                             4      1020  
                             7      1021  
                            11      1022  
                             6      1023  
                             6      1024  
                            10      1025  
                             5      1026  
                             6      1027  
                             8      1028  
                             6      1029  
                             7      1030  
                             2      1031  
                             5      1032  
                             5      1033  
                             3      1034  
                             6      1035  
                             4      1036  
                            13      1037  
                             2      1038  
                             7      1039  
                             4      1040  
                             8      1041  
                             8      1042  
                             9      1043  
                             4      1044  
                             7      1045  
                             3      1046  
                             3      1047  
                             2      1048  
                             1      1049  
                             4      1050  
                             3      1051  
                             5      1052  
                             5      1053  
                             2      1054  
                             4      1055  
                             3      1056  
                             6      1057  
                             5      1058  
                             3      1060  
                             5      1061  
                             2      1062  
                             7      1063  
                             3      1064  
                             3      1065  
                             5      1067  
                             4      1068  
                             2      1069  
                             6      1070  
                             4      1071  
                             2      1072  
                             2      1073  
                             5      1075  
                             2      1076  
                             1      1077  
                             3      1078  
                             1      1080  
                             1      1081  
                             2      1082  
                             2      1083  
                             2      1084  
                             1      1085  
                             1      1086  
                             1      1088  
                             1      1089  
                             2      1090  
                             1      1091  
                             1      1092  
                             1      1093  
                             2      1094  
                             1      1095  
                             1      1096  
                             1      1097  
                             3      1098  
                             1      1099  
                             2      1100  
                             2      1101  
                             1      1105  
                             1      1107  
                             1      1110  
                             3      1112  
                             1      1113  
                             2      1114  
                             1      1115  
                             1      1118  
                             2      1123  
                             1      1126  
                             1      1127  
                             1      1130  
                             1      1136  
                             2      1149  
                             1      1150  
                             1      1151  
                             1      1178  
                            76      9994  not present
                            26      9995  refused
                            12      9996  other

. gen     height = hc3/10 

.         //We divide it by 10 in order to express it in centimeters
. tab hc3 if hc3>9990,m nol   

    child's |
  height in |
centimeters |
(1 decimal) |      Freq.     Percent        Cum.
------------+-----------------------------------
       9994 |         76       66.67       66.67
       9995 |         26       22.81       89.47
       9996 |         12       10.53      100.00
------------+-----------------------------------
      Total |        114      100.00

.         //Missing values are 9994 to 9996
. replace height = . if hc3>=9990 
(114 real changes made, 114 to missing)

.         //All missing values or out of range are replaced as "."
. tab     hc13 hc3   if hc3>=9990 | hc3==., miss

  result of |
measurement |
          - | child's height in centimeters (1
height/weig |             decimal)
         ht | not prese    refused      other |     Total
------------+---------------------------------+----------
not present |        76          0          0 |        76 
    refused |         0         24          0 |        24 
      other |         0          2         12 |        14 
------------+---------------------------------+----------
      Total |        76         26         12 |       114 

. desc height 

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
height          double  %10.0g                

. summ height

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      height |      3,102    84.61905    13.88135       41.3      117.8

. 
. 
. *** Variable: MEASURED STANDING/LYING DOWN ***
. codebook hc15

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hc15                                                                                                                              height: lying or standing
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HC15

                 range:  [0,2]                        units:  1
         unique values:  3                        missing .:  12/3,216

            tabulation:  Freq.   Numeric  Label
                           103         0  not measured
                         1,258         1  lying
                         1,843         2  standing
                            12         .  

. gen measure = "l" if hc15==1 
(1,958 missing values generated)

.         //Child measured lying down
. replace measure = "h" if hc15==2 
(1,843 real changes made)

.         //Child measured standing up
. replace measure = " " if hc15==9 | hc15==0 | hc15==.
(115 real changes made)

.         //Replace with " " if unknown
. desc measure

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
measure         str1    %9s                   

. tab measure, m

    measure |      Freq.     Percent        Cum.
------------+-----------------------------------
            |        115        3.58        3.58
          h |      1,843       57.31       60.88
          l |      1,258       39.12      100.00
------------+-----------------------------------
      Total |      3,216      100.00

. 
.         
. *** Variable: OEDEMA ***
. lookfor oedema

. gen str1 oedema = "n"  

.         //It assumes no-one has oedema
. desc oedema

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
oedema          str1    %9s                   

. tab oedema      

     oedema |      Freq.     Percent        Cum.
------------+-----------------------------------
          n |      3,216      100.00      100.00
------------+-----------------------------------
      Total |      3,216      100.00

. 
. 
. *** Variable: INDIVIDUAL CHILD SAMPLING WEIGHT ***
. gen  sw = hv005/1000000 

.         //For DHS sample weight has to be divided 1000000
. desc sw

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
sw              double  %10.0g                

. summ sw

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
          sw |      3,216    .9604145    .6917533    .095848   5.929941

. 
. keep ind_id child_KR reflib datalib datalab gender ageunit age weight height measure oedema sw

. 
. /*We now run the command to calculate the z-scores with the adofile */
. igrowup_restricted reflib datalib datalab gender age ageunit weight height measure oedema sw

Please wait, programme is running.............

..............................................
Note: z-scores are flagged according to the following rules:
 
                            _zwfl = . if (_zwfl < -5 or _zwfl >5)
                            _zlen = . if (_zlen < -6 or _zlen >6)
                            _zwei = . if (_zwei < -6 or _zwei >5)
                            _zbmi = . if (_zbmi < -5 or _zbmi >5)
                            
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\children_nutri_Ghana_z_rc.dt
> a saved
Note 1:     Original data plus z-scores are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\children_nutri_Ghana_
> z_rc.dta
                            
                            
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\children_nutri_Ghana_
> z_rc.xls not found)
Note 2:     Original data plus z-scores are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\children_nutri_Ghana_
> z_rc.xls
                            

Please wait, programme is calculating prevalences.............

..............................................

Set 1:            Sexes combined

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI     Mean      SD
Total     170       0       0      .3       0       0      .3    2.68    1.52
  0-5     170       0       0      .3       0       0      .3    2.68    1.52
 6-11       0     -69     -69     -69     -69     -69     -69     -69     -69
12-23       0     -69     -69     -69     -69     -69     -69     -69     -69
24-35       0     -69     -69     -69     -69     -69     -69     -69     -69
36-47       0     -69     -69     -69     -69     -69     -69     -69     -69
48-60       0     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Length/height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI     Mean      SD
Total     170       0       0      .3       0       0      .3     3.2    1.86
  0-5     170       0       0      .3       0       0      .3     3.2    1.86
 6-11       0     -69     -69     -69     -69     -69     -69     -69     -69
12-23       0     -69     -69     -69     -69     -69     -69     -69     -69
24-35       0     -69     -69     -69     -69     -69     -69     -69     -69
36-47       0     -69     -69     -69     -69     -69     -69     -69     -69
48-60       0     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Weight-for-length/height

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total     170     1.3       0     3.3     5.9       2     9.7    14.8     9.1    20.4       6     2.1     9.8      .5       0     1.9     -.1    1.27
  0-5     170     1.3       0     3.3     5.9       2     9.7    14.8     9.1    20.4       6     2.1     9.8      .5       0     1.9     -.1    1.27
 6-11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
12-23       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
24-35       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
36-47       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
48-60       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total     170       0       0      .3     1.5       0     3.6    59.6    51.9    67.3    32.6    25.3      40     5.1     1.5     8.7    1.31    1.18
  0-5     170       0       0      .3     1.5       0     3.6    59.6    51.9    67.3    32.6    25.3      40     5.1     1.5     8.7    1.31    1.18
 6-11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
12-23       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
24-35       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
36-47       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
48-60       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Set 2:            Males

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI     Mean      SD
Total      81       0       0      .6       0       0      .6    2.71    1.59
  0-5      81       0       0      .6       0       0      .6    2.71    1.59
 6-11       0     -69     -69     -69     -69     -69     -69     -69     -69
12-23       0     -69     -69     -69     -69     -69     -69     -69     -69
24-35       0     -69     -69     -69     -69     -69     -69     -69     -69
36-47       0     -69     -69     -69     -69     -69     -69     -69     -69
48-60       0     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Length/height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI     Mean      SD
Total      81       0       0      .6       0       0      .6    3.04    1.97
  0-5      81       0       0      .6       0       0      .6    3.04    1.97
 6-11       0     -69     -69     -69     -69     -69     -69     -69     -69
12-23       0     -69     -69     -69     -69     -69     -69     -69     -69
24-35       0     -69     -69     -69     -69     -69     -69     -69     -69
36-47       0     -69     -69     -69     -69     -69     -69     -69     -69
48-60       0     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Weight-for-length/height

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total      81       1       0     3.9     5.6       0    11.3    22.4    12.7    32.1    10.4     3.1    17.6       0       0      .6     .06     1.4
  0-5      81       1       0     3.9     5.6       0    11.3    22.4    12.7    32.1    10.4     3.1    17.6       0       0      .6     .06     1.4
 6-11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
12-23       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
24-35       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
36-47       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
48-60       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total      81       0       0      .6     1.8       0     5.3    62.6    51.5    73.8    37.6    26.4    48.7     7.8     1.3    14.2    1.45    1.22
  0-5      81       0       0      .6     1.8       0     5.3    62.6    51.5    73.8    37.6    26.4    48.7     7.8     1.3    14.2    1.45    1.22
 6-11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
12-23       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
24-35       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
36-47       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
48-60       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Set 3:            Females

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI     Mean      SD
Total      89       0       0      .6       0       0      .6    2.65    1.46
  0-5      89       0       0      .6       0       0      .6    2.65    1.46
 6-11       0     -69     -69     -69     -69     -69     -69     -69     -69
12-23       0     -69     -69     -69     -69     -69     -69     -69     -69
24-35       0     -69     -69     -69     -69     -69     -69     -69     -69
36-47       0     -69     -69     -69     -69     -69     -69     -69     -69
48-60       0     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Length/height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI     Mean      SD
Total      89       0       0      .6       0       0      .6    3.35    1.75
  0-5      89       0       0      .6       0       0      .6    3.35    1.75
 6-11       0     -69     -69     -69     -69     -69     -69     -69     -69
12-23       0     -69     -69     -69     -69     -69     -69     -69     -69
24-35       0     -69     -69     -69     -69     -69     -69     -69     -69
36-47       0     -69     -69     -69     -69     -69     -69     -69     -69
48-60       0     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Weight-for-length/height

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total      89     1.6       0     4.7     6.1      .5    11.6     7.8     1.6    13.9     1.9       0     5.4       1       0     3.6    -.26    1.12
  0-5      89     1.6       0     4.7     6.1      .5    11.6     7.8     1.6    13.9     1.9       0     5.4       1       0     3.6    -.26    1.12
 6-11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
12-23       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
24-35       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
36-47       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
48-60       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total      89       0       0      .6     1.2       0       4    56.8    45.9    67.7    28.1    18.2      38     2.7       0     6.6    1.18    1.13
  0-5      89       0       0      .6     1.2       0       4    56.8    45.9    67.7    28.1    18.2      38     2.7       0     6.6    1.18    1.13
 6-11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
12-23       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
24-35       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
36-47       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
48-60       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\children_nutri_Ghana_
> prev_rc.xls not found)
 
Note:       Prevalences are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\children_nutri_Ghana_
> prev_rc.xls

. 
. 
. /*We now turn to using the dta file that was created and that contains 
> the calculated z-scores to create the child nutrition variables following WHO 
> standards */
. use "$path_out/children_nutri_Ghana_z_rc.dta", clear 

. 
. 
. 
. *** Standard MPI indicator ***
.         //Takes value 1 if the child is under 2 stdev below the median & 0 otherwise
.         
. gen     underweight = (_zwei < -2.0) 

. replace underweight = . if _zwei == . | _fwei==1
(2,954 real changes made, 2,954 to missing)

. lab var underweight  "Child is undernourished (weight-for-age) 2sd - WHO"

. tab underweight [aw=sw], miss

   Child is |
undernouris |
        hed |
(weight-for |
-age) 2sd - |
        WHO |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 257.301965        8.00        8.00
          1 | .279226315        0.01        8.01
          . | 2,958.4188       91.99      100.00
------------+-----------------------------------
      Total |      3,216      100.00

. 
. 
. gen stunting = (_zlen < -2.0)

. replace stunting = . if _zlen == . | _flen==1
(3,020 real changes made, 3,020 to missing)

. lab var stunting "Child is stunted (length/height-for-age) 2sd - WHO"

. tab stunting [aw=sw], miss

   Child is |
    stunted |
(length/hei |
ght-for-age |
) 2sd - WHO |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |194.3619099        6.04        6.04
          1 | 2.55710531        0.08        6.12
          . |  3,019.081       93.88      100.00
------------+-----------------------------------
      Total |      3,216      100.00

. 
. 
. gen wasting = (_zwfl < - 2.0)

. replace wasting = . if _zwfl == . | _fwfl == 1
(165 real changes made, 165 to missing)

. lab var wasting  "Child is wasted (weight-for-length/height) 2sd - WHO"

. tab wasting [aw=sw], miss

   Child is |
     wasted |
(weight-for |
-length/hei |
 ght) 2sd - |
        WHO |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 2,887.7443       89.79       89.79
          1 | 145.837934        4.53       94.33
          . |182.4177232        5.67      100.00
------------+-----------------------------------
      Total |      3,216      100.00

. 
. 
.         //Retain relevant variables:
. keep ind_id child_KR underweight stunting wasting 

. 
. order ind_id child_KR underweight stunting wasting 

. 
. sort ind_id

. 
. duplicates report ind_id

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |         3216             0
--------------------------------------

. 
. 
.         //Erase files from folder:
. erase "$path_out/children_nutri_Ghana_z_rc.xls"

. erase "$path_out/children_nutri_Ghana_prev_rc.xls"

. *erase "$path_out/children_nutri_Ghana_z_rc.dta"
. 
. 
.         //Save a temp file for merging with PR:
. save "$path_out/Ghana14_KR.dta", replace
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana14_KR.dta not fo
> und)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana14_KR.dta saved

.         
. 
. ********************************************************************************
. *** Step 1.2  BR - BIRTH RECODE 
. *** (All females 15-49 years who ever gave birth)  
. ********************************************************************************
. 
. use "$path_in/GHBR72FL.dta", clear

. 
.                 
. *** Generate individual unique key variable required for data merging
. *** v001=cluster number;  
. *** v002=household number; 
. *** v003=respondent's line number
. gen double ind_id = v001*1000000 + v002*100 + v003 

. format ind_id %20.0g

. label var ind_id "Individual ID"

. 
. 
. desc b3 b7      

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
b3              int     %8.0g                 date of birth (cmc)
b7              int     %8.0g                 age at death (months, imputed)

. gen date_death = b3 + b7
(20,862 missing values generated)

.         //Date of death = date of birth (b3) + age at death (b7)
. gen mdead_survey = v008 - date_death
(20,862 missing values generated)

.         //Months dead from survey = Date of interview (v008) - date of death
. gen ydead_survey = mdead_survey/12
(20,862 missing values generated)

.         //Years dead from survey
. 
.         
. codebook b5, tab (10)   

-----------------------------------------------------------------------------------------------------------------------------------------------------------
b5                                                                                                                                           child is alive
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  B5

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/23,118

            tabulation:  Freq.   Numeric  Label
                         2,256         0  no
                        20,862         1  yes

. gen child_died = 1 if b5==0
(20,862 missing values generated)

.         //Redefine the coding and labels (1=child dead; 0=child alive)
. replace child_died = 0 if b5==1
(20,862 real changes made)

. replace child_died = . if b5==.
(0 real changes made)

. label define lab_died 1 "child has died" 0 "child is alive"

. label values child_died lab_died

. tab b5 child_died, miss

  child is |      child_died
     alive | child is   child has |     Total
-----------+----------------------+----------
        no |         0      2,256 |     2,256 
       yes |    20,862          0 |    20,862 
-----------+----------------------+----------
     Total |    20,862      2,256 |    23,118 

.         
. 
.         /*NOTE: For each woman, sum the number of children who died and compare to 
>         the number of sons/daughters whom they reported have died */
. bysort ind_id: egen tot_child_died = sum(child_died) 

. egen tot_child_died_2 = rsum(v206 v207)

.         //v206: sons who have died
.         //v207: daughters who have died
. compare tot_child_died tot_child_died_2

                                        ---------- difference ----------
                            count       minimum      average     maximum
------------------------------------------------------------------------
tot_chi~d=tot_chi~2         23118
                       ----------
jointly defined             23118             0            0           0
                       ----------
total                       23118

.         //In Ghana DHS 2022, these figures are identical
.         
.                 
. replace child_died=0 if b7>=216 & b7<.
(35 real changes made)

. /* counting only deaths of children <18y (216 months) */
. 
. bysort ind_id: egen tot_child_died_5y=sum(child_died) if ydead_survey<=5
(22683 missing values generated)

.         /*For each woman, sum the number of children who died in the past 5 years 
>         prior to the interview date */
.         
. replace tot_child_died_5y=0 if tot_child_died_5y==. & tot_child_died>=0 & tot_child_died<.
(22,683 real changes made)

.         /*All children who are alive and died longer than 5 years from the interview 
>         date are replaced as '0'*/
.         
. replace tot_child_died_5y=. if child_died==1 & ydead_survey==.
(0 real changes made)

.         //Replace as '.' if there is no information on when the child died  
. 
. tab tot_child_died tot_child_died_5y, miss

tot_child_ |                   tot_child_died_5y
      died |         0          1          2          3          5 |     Total
-----------+-------------------------------------------------------+----------
         0 |    14,528          0          0          0          0 |    14,528 
         1 |     5,356        287          0          0          0 |     5,643 
         2 |     1,770         49         24          0          0 |     1,843 
         3 |       615         16         10          0          0 |       641 
         4 |       303          5          6          3          0 |       317 
         5 |       114          1          6          0          5 |       126 
         6 |        20          0          0          0          0 |        20 
-----------+-------------------------------------------------------+----------
     Total |    22,706        358         46          3          5 |    23,118 

. 
. bysort ind_id: egen child_died_per_wom = max(tot_child_died)

. lab var child_died_per_wom "Total child death for each women (birth recode)"

. 
. bysort ind_id: egen child_died_per_wom_5y = max(tot_child_died_5y)

. lab var child_died_per_wom_5y "Total child death for each women in the last 5 years (birth recode)"

. 
. 
.         //Keep one observation per women
. bysort ind_id: gen id=1 if _n==1
(16,607 missing values generated)

. keep if id==1
(16,607 observations deleted)

. drop id

. 
. duplicates report ind_id 

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |         6511             0
--------------------------------------

. 
. gen women_BR = 1 

.         //Identification variable for observations in BR recode
. 
.         
.         //Retain relevant variables
. keep ind_id women_BR b16 child_died_per_wom child_died_per_wom_5y b7

.  
. order ind_id women_BR b16 child_died_per_wom child_died_per_wom_5y b7

. 
. sort ind_id

. 
.         //Save a temp file for merging with PR:
. save "$path_out/Ghana14_BR.dta", replace        
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana14_BR.dta not fo
> und)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana14_BR.dta saved

.         
.         
. ********************************************************************************
. *** Step 1.3  IR - WOMEN's RECODE  
. *** (All eligible females 15-49 years in the household)
. ********************************************************************************
. 
. use "$path_in/GHIR72FL.dta", clear

. 
. 
. *** Generate individual unique key variable required for data merging
. *** v001=cluster number;  
. *** v002=household number; 
. *** v003=respondent's line number
. gen double ind_id = v001*1000000 + v002*100 + v003 

. format ind_id %20.0g

. label var ind_id "Individual ID"

. 
. duplicates report ind_id

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |         9396             0
--------------------------------------

. 
. gen women_IR=1 

.         //Identification variable for observations in IR recode
. 
. 
. keep ind_id women_IR v003 v005 v012 v201 v206 v207

.  
. order ind_id women_IR v003 v005 v012 v201 v206 v207

. 
.  
. sort ind_id

. 
.         //Save a temp file for merging with PR:
. save "$path_out/Ghana14_IR.dta", replace
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana14_IR.dta not fo
> und)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana14_IR.dta saved

. 
. 
. ********************************************************************************
. *** Step 1.4  IR - WOMEN'S RECODE  
. *** (Girls 15-19 years in the household)
. ********************************************************************************
. 
. 
. use "$path_in/GHPR72FL.dta", clear

. 
. *** Generate individual unique key variable required for data merging
. *** hv001=cluster number;  
. *** hv002=household number; 
. *** hvidx=respondent's line number
. gen double ind_id = hv001*1000000 + hv002*100 + hvidx 

. format ind_id %20.0g

. label var ind_id "Individual ID"

. 
. duplicates report ind_id        

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |        43945             0
--------------------------------------

. 
. keep if hv104==2 & hv105>=15 & hv105<=19 & hv042==1
(42,957 observations deleted)

. ***Variables required to calculate the z-scores to produce BMI-for-age:
. 
. *** Variable: SEX ***
. gen gender=2 

. ############################################################################################################
Unknown #command
. *** Variable: AGE IN MONTHS ***
. /*compare hv807c hv008
> 
> tab hv804 if hv807c!=hv008
> Assessing number of visits done for biomarker collection for the discrepancy dates
>  *we use date of biomarker collection to construct the age_month variable since birth*/
. ###########################################################################################################
Unknown #command
. 
. gen age_month = hv008 - hc32
(988 missing values generated)

. label var age_month "Age in months (child, PR: hv008-hc32)"

. 
.         
. *** Variable: AGE UNIT ***
. gen str6 ageunit = "months" 

. lab var ageunit "Months"

. 
.                 
. *** Variable: BODY WEIGHT (KILOGRAMS) ***
. codebook ha2, tab (999)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
ha2                                                                                                                 woman's weight in kilograms (1 decimal)
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HA2, but 297 nonmissing values are not labeled

                 range:  [343,9996]                   units:  1
         unique values:  300                      missing .:  0/988

            tabulation:  Freq.   Numeric  Label
                             1       343  
                             3       346  
                             1       352  
                             1       357  
                             1       367  
                             1       371  
                             1       372  
                             1       373  
                             1       377  
                             1       379  
                             1       385  
                             1       388  
                             2       391  
                             1       394  
                             1       395  
                             2       396  
                             1       397  
                             3       399  
                             4       401  
                             1       404  
                             1       405  
                             1       406  
                             1       408  
                             2       409  
                             1       410  
                             2       412  
                             1       413  
                             2       414  
                             1       415  
                             4       422  
                             2       423  
                             1       425  
                             3       427  
                             3       428  
                             3       429  
                             1       433  
                             4       434  
                             3       435  
                             3       436  
                             3       437  
                             1       438  
                             1       439  
                             1       440  
                             3       441  
                             1       442  
                             1       443  
                             4       444  
                             2       445  
                             3       446  
                             2       447  
                             4       448  
                             4       449  
                             2       450  
                             2       451  
                             5       452  
                             2       453  
                             1       454  
                             6       455  
                             5       456  
                             2       457  
                             5       458  
                             2       459  
                             7       461  
                             3       462  
                             3       463  
                             7       464  
                             4       465  
                             2       466  
                             1       467  
                             4       468  
                             4       469  
                             1       470  
                             7       471  
                             7       472  
                             3       473  
                             7       474  
                             6       475  
                             5       476  
                             5       477  
                             4       478  
                             6       479  
                             3       480  
                             5       481  
                             2       482  
                             7       483  
                             4       484  
                             2       485  
                             3       486  
                             4       487  
                             1       488  
                             3       489  
                             3       490  
                             3       491  
                             7       492  
                             3       493  
                             3       494  
                             5       495  
                             9       496  
                            12       497  
                             7       498  
                             6       499  
                             8       500  
                             2       501  
                             3       502  
                             4       503  
                             1       504  
                             5       505  
                             5       506  
                             6       507  
                             6       508  
                             5       509  
                             3       510  
                             7       511  
                             9       512  
                             4       513  
                             4       514  
                             6       515  
                             3       516  
                             3       517  
                             5       518  
                             7       519  
                             3       520  
                             3       521  
                             8       522  
                             5       523  
                             1       524  
                             4       525  
                            10       526  
                             3       527  
                             5       528  
                             5       529  
                             8       530  
                             2       531  
                             7       532  
                            10       533  
                             4       534  
                             5       535  
                             3       536  
                             5       537  
                             5       538  
                             3       539  
                             1       540  
                             7       541  
                             3       542  
                             3       543  
                             2       544  
                             6       545  
                             3       546  
                             4       547  
                             5       548  
                             4       549  
                             3       550  
                             8       551  
                             2       552  
                             4       553  
                             4       554  
                             4       555  
                             6       556  
                             8       557  
                             7       558  
                             1       559  
                             4       560  
                             6       561  
                             6       562  
                             2       563  
                             7       564  
                             3       565  
                             3       566  
                             2       567  
                             5       568  
                             4       569  
                             2       570  
                             6       571  
                             6       572  
                             3       573  
                             3       574  
                             2       575  
                             3       576  
                             2       577  
                             5       578  
                             2       579  
                             5       580  
                             4       581  
                             4       582  
                             4       583  
                             4       584  
                             3       585  
                             6       586  
                             5       587  
                             3       588  
                             5       589  
                             4       590  
                             4       591  
                             8       592  
                             3       593  
                             5       594  
                             3       595  
                             5       596  
                             3       597  
                             4       598  
                             1       599  
                             2       600  
                             4       601  
                             3       602  
                             2       604  
                             7       605  
                             4       606  
                             3       608  
                             7       610  
                             2       611  
                             3       612  
                             2       613  
                             1       614  
                             1       615  
                             1       616  
                             1       617  
                             2       618  
                             2       619  
                             3       621  
                             2       623  
                             1       624  
                             5       625  
                             3       626  
                             2       628  
                             3       629  
                             1       630  
                             2       631  
                             3       634  
                             1       635  
                             2       636  
                             2       637  
                             1       638  
                             2       639  
                             1       640  
                             1       641  
                             1       642  
                             3       643  
                             1       644  
                             1       645  
                             3       646  
                             1       647  
                             2       648  
                             2       651  
                             2       652  
                             3       654  
                             2       655  
                             2       656  
                             2       658  
                             2       659  
                             1       662  
                             2       663  
                             1       664  
                             1       665  
                             2       667  
                             2       668  
                             1       669  
                             2       670  
                             2       678  
                             1       680  
                             1       683  
                             1       685  
                             1       687  
                             2       691  
                             1       692  
                             1       693  
                             1       697  
                             3       699  
                             1       701  
                             2       702  
                             1       704  
                             1       705  
                             1       707  
                             1       708  
                             1       709  
                             1       710  
                             1       711  
                             1       713  
                             1       715  
                             1       717  
                             1       720  
                             1       723  
                             1       727  
                             1       737  
                             1       742  
                             1       744  
                             1       751  
                             1       753  
                             1       754  
                             2       755  
                             1       776  
                             1       824  
                             1       839  
                             1       854  
                             1       896  
                             1       898  
                             1       951  
                             1      1022  
                            56      9994  not present
                             5      9995  refused
                            13      9996  other

. gen weight = ha2/10

.         //We divide it by 10 in order to express it in kilograms
. replace weight = . if ha2>=9990 
(74 real changes made, 74 to missing)

.         //All missing values or out of range are replaced as "."
. summ weight

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      weight |        914    53.79114    8.064693       34.3      102.2

. 
. 
. *** Variable: HEIGHT (CENTIMETERS)
. codebook ha3, tab (999)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
ha3                                                                                                               woman's height in centimeters (1 decimal)
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HA3, but 250 nonmissing values are not labeled

                 range:  [1312,9996]                  units:  1
         unique values:  253                      missing .:  0/988

            tabulation:  Freq.   Numeric  Label
                             1      1312  
                             1      1407  
                             1      1424  
                             1      1436  
                             1      1442  
                             1      1444  
                             1      1449  
                             1      1450  
                             1      1456  
                             1      1457  
                             1      1460  
                             1      1461  
                             2      1464  
                             2      1465  
                             1      1466  
                             1      1468  
                             3      1470  
                             1      1472  
                             1      1473  
                             1      1474  
                             2      1475  
                             1      1476  
                             1      1477  
                             1      1479  
                             1      1482  
                             2      1485  
                             5      1486  
                             1      1487  
                             2      1488  
                             3      1489  
                             2      1490  
                             1      1491  
                             2      1492  
                             2      1493  
                             3      1494  
                             2      1495  
                             2      1496  
                             2      1497  
                             1      1498  
                             4      1500  
                             3      1501  
                             4      1502  
                             3      1503  
                             2      1504  
                             1      1505  
                             1      1507  
                             3      1508  
                             2      1509  
                             1      1510  
                             3      1511  
                             3      1512  
                             3      1513  
                             2      1514  
                             1      1515  
                             8      1516  
                             2      1517  
                             1      1518  
                             1      1519  
                             4      1520  
                             5      1521  
                             3      1522  
                             3      1523  
                             5      1524  
                             4      1525  
                             6      1526  
                             3      1527  
                             4      1528  
                             3      1529  
                             4      1530  
                             4      1531  
                             4      1532  
                             2      1533  
                             1      1534  
                             4      1535  
                             4      1536  
                             6      1537  
                             3      1538  
                             3      1539  
                             5      1540  
                             4      1541  
                             5      1542  
                             5      1543  
                             5      1544  
                             6      1545  
                             3      1546  
                             1      1547  
                             3      1548  
                             4      1549  
                             4      1550  
                             5      1551  
                             4      1552  
                             8      1553  
                            10      1554  
                             2      1555  
                            12      1556  
                             5      1557  
                            10      1558  
                             7      1559  
                            12      1560  
                             5      1561  
                             7      1562  
                             6      1563  
                             5      1564  
                             4      1565  
                             8      1566  
                             3      1567  
                             7      1568  
                             2      1569  
                             5      1570  
                             8      1571  
                             7      1572  
                             9      1573  
                             6      1574  
                             8      1575  
                             6      1576  
                             7      1577  
                             6      1578  
                             3      1579  
                            11      1580  
                             2      1581  
                             6      1582  
                            10      1583  
                            14      1584  
                             9      1585  
                             5      1586  
                             9      1587  
                             4      1588  
                             5      1589  
                             3      1590  
                             9      1591  
                             4      1592  
                             6      1593  
                            10      1594  
                             5      1595  
                             5      1596  
                             7      1597  
                             5      1598  
                             7      1599  
                             7      1600  
                             7      1601  
                             7      1602  
                             4      1603  
                             7      1604  
                             4      1605  
                             4      1606  
                             3      1607  
                             2      1608  
                            10      1609  
                            11      1610  
                             5      1611  
                            12      1612  
                            10      1613  
                             3      1614  
                             3      1615  
                             7      1616  
                             5      1617  
                             6      1618  
                             1      1619  
                             7      1620  
                             3      1621  
                             3      1622  
                             9      1623  
                             3      1624  
                             7      1625  
                             3      1626  
                             5      1627  
                             8      1628  
                             4      1629  
                             2      1630  
                             2      1631  
                             6      1632  
                             2      1633  
                             5      1634  
                             3      1635  
                             3      1636  
                             5      1637  
                             4      1638  
                             3      1639  
                             3      1640  
                             4      1641  
                             3      1642  
                             4      1643  
                             5      1644  
                             5      1645  
                             3      1646  
                             3      1647  
                             2      1648  
                             3      1649  
                             3      1650  
                             3      1651  
                             2      1652  
                             3      1653  
                             5      1654  
                             3      1655  
                             4      1656  
                             4      1657  
                             4      1658  
                             1      1659  
                             2      1660  
                             2      1663  
                             1      1664  
                             3      1665  
                             1      1666  
                             4      1667  
                             3      1668  
                             3      1669  
                             3      1670  
                             1      1671  
                             3      1672  
                             4      1673  
                             4      1674  
                             2      1675  
                             1      1676  
                             2      1680  
                             1      1681  
                             2      1682  
                             2      1683  
                             1      1684  
                             4      1685  
                             1      1687  
                             3      1688  
                             1      1690  
                             1      1692  
                             2      1693  
                             1      1694  
                             1      1696  
                             3      1699  
                             2      1700  
                             1      1701  
                             1      1702  
                             1      1703  
                             1      1704  
                             2      1705  
                             1      1707  
                             5      1708  
                             1      1710  
                             1      1713  
                             1      1714  
                             1      1716  
                             1      1720  
                             1      1722  
                             1      1724  
                             1      1726  
                             1      1735  
                             1      1736  
                             1      1737  
                             1      1748  
                             1      1750  
                             1      1759  
                             1      1793  
                            56      9994  not present
                             5      9995  refused
                            13      9996  other

. gen     height = ha3/10 

.         //We divide it by 10 in order to express it in centimeters
. replace height = . if ha3>=9990 
(74 real changes made, 74 to missing)

.         //All missing values or out of range are replaced as "."
. summ height

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      height |        914    158.5993    5.795547      131.2      179.3

. 
. 
. *** Variable: OEDEMA
. lookfor oedema

. gen oedema = "n"  

. tab oedema      

     oedema |      Freq.     Percent        Cum.
------------+-----------------------------------
          n |        988      100.00      100.00
------------+-----------------------------------
      Total |        988      100.00

. 
. 
. 
. *** Variable: SAMPLING WEIGHT ***
. gen  sw = hv005/1000000 

.         //For DHS sample weight has to be divided 1000000*
. summ sw         

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
          sw |        988    .9151115    .6015539    .095848   5.929941

.         
. *** Next, indicate to STATA where the igrowup_restricted.ado file is stored:    
. 
. adopath + "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"
  [1]  (BASE)      "C:\Program Files (x86)\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files (x86)\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\Stata configuration\Stata15\ado\personal/"
  [5]  (PLUS)      "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\Stata configuration\Stata15\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_child"
  [8]              "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"

. 
. 
. /* We use 'reflib' to specify the package directory where the .dta files 
> containing the WHO Growth reference are stored. Note that we use strX to specity 
> the length of the path in string. */            
. gen str150 reflib="C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"

. lab var reflib "Directory of reference tables"

. 
. 
. /* We use datalib to specify the working directory where the input STATA data
> set containing the anthropometric measurement is stored. */
. gen str150 datalib = "$path_out" 

. lab var datalib "Directory for datafiles"

. 
. 
. /* We use datalab to specify the name that will prefix the output files that 
> will be produced from using this ado file*/
. gen str30 datalab = "girl_nutri_Ghana" 

. lab var datalab "Working file"

.         
. 
. 
. /*We now run the command to calculate the z-scores with the adofile */
. who2007 reflib datalib datalab gender age_month ageunit weight height oedema sw

Please wait, programme is running.............

..............................................
Note: z-scores are flagged according to the following rules:
 
                            _zhfa = . if (_zhfa < -6 or _zhfa >6)
                            _zwfa = . if (_zwfa < -6 or _zwfa >5)
                            _zbfa = . if (_zbfa < -5 or _zbfa >5)
                            
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\girl_nutri_Ghana_z.dt
> a not found)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\girl_nutri_Ghana_z.dta saved
Note 1:     Original data plus z-scores are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\girl_nutri_Ghana_z.dt
> a
                            
                            
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\girl_nutri_Ghana_z.xl
> s not found)
Note 2:     Original data plus z-scores are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\girl_nutri_Ghana_z.xl
> s
                            

Please wait, programme is calculating prevalences.............

..............................................

Set 1:            Sexes combined

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Set 2:            Males

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Set 3:            Females

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\girl_nutri_Ghana_prev
> .xls not found)
 
Note:       Prevalences are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\girl_nutri_Ghana_prev
> .xls

. 
. 
. /*We now turn to using the dta file that was created and that contains 
> the calculated z-scores to compute BMI-for-age*/
. use "$path_out/girl_nutri_Ghana_z.dta", clear 

. 
.                 
. gen     z_bmi = _zbfa
(988 missing values generated)

. replace z_bmi = . if _fbfa==1 
(0 real changes made)

. lab var z_bmi "z-score bmi-for-age WHO"

. 
. 
. gen     low_bmiage = (z_bmi < -2.0) 

.         /*Takes value 1 if BMI-for-age is under 2 stdev below the median & 0 
>         otherwise */
. replace low_bmiage = . if z_bmi==.
(988 real changes made, 988 to missing)

. lab var low_bmiage "Teenage low bmi 2sd - WHO"

. 
. 
. gen teen_IR=1 

.         //Identification variable for observations in IR recode (only 15-19 years)      
. 
. 
.         //Retain relevant variables:    
. keep ind_id teen_IR age_month low_bmiage

.  
. order ind_id teen_IR age_month low_bmiage

.  
. sort ind_id

. 
. 
.         //Erase files from folder:
. erase "$path_out/girl_nutri_Ghana_z.xls"

. erase "$path_out/girl_nutri_Ghana_prev.xls"

. erase "$path_out/girl_nutri_Ghana_z.dta"

. 
. 
.         //Save a temp file for merging with PR:
. save "$path_out/Ghana14_IR_girls.dta", replace
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana14_IR_girls.dta 
> not found)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana14_IR_girls.dta saved

. 
. 
. ********************************************************************************
. *** Step 1.5  MR - MEN'S RECODE  
. ***(All eligible man: 15-59 years in the household) 
. ********************************************************************************
. 
. use "$path_in/GHMR71FL.dta", clear 

. 
. 
. *** Generate individual unique key variable required for data merging
.         *** mv001=cluster number; 
.         *** mv002=household number;
.         *** mv003=respondent's line number
. gen double ind_id = mv001*1000000 + mv002*100 + mv003   

. format ind_id %20.0g

. label var ind_id "Individual ID"

. 
. duplicates report ind_id

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |         4388             0
--------------------------------------

. 
. gen men_MR=1    

.         //Identification variable for observations in MR recode
. 
. 
. keep ind_id men_MR mv003 mv005 mv012 mv201 mv206 mv207

. 
. order ind_id men_MR mv003 mv005 mv012 mv201 mv206 mv207 

. 
. sort ind_id

. 
.         //Save a temp file for merging with PR:
. save "$path_out/Ghana14_MR.dta", replace
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana14_MR.dta not fo
> und)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana14_MR.dta saved

. 
. 
. ********************************************************************************
. *** Step 1.6a  MR - MEN'S RECODE  
. ***(Boys 15-19 years in the household) 
. ********************************************************************************
. 
. use "$path_in/GHPR72FL.dta", clear 

.         
. *** Generate individual unique key variable required for data merging
. *** hv001=cluster number;  
. *** hv002=household number; 
. *** hvidx=respondent's line number
. gen double ind_id = hv001*1000000 + hv002*100 + hvidx 

. format ind_id %20.0g

. label var ind_id "Individual ID"

. 
. duplicates report ind_id

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |        43945             0
--------------------------------------

. 
. keep if hv104==1 & hv105>=15 & hv105<=19 & hv027==1
(42,985 observations deleted)

. ***Variables required to calculate the z-scores to produce BMI-for-age:
. 
. *** Variable: SEX ***
. gen gender=1

. 
. gen age_month_b = hv008 - hc32
(960 missing values generated)

. lab var age_month_b "Age in months, individuals 15-19 years"    

. 
.         
. *** Variable: AGE UNIT ***
. gen str6 ageunit = "months" 

. lab var ageunit "Months"

. 
.                 
. *** Variable: BODY WEIGHT (KILOGRAMS) ***
. codebook hb2, tab (999)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hb2                                                                                                                   man's weight in kilograms (1 decimal)
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HB2, but 335 nonmissing values are not labeled

                 range:  [293,9996]                   units:  1
         unique values:  338                      missing .:  0/960

            tabulation:  Freq.   Numeric  Label
                             1       293  
                             1       297  
                             1       301  
                             1       315  
                             1       324  
                             1       332  
                             1       333  
                             1       338  
                             1       344  
                             1       351  
                             2       352  
                             1       356  
                             1       357  
                             1       359  
                             1       362  
                             1       363  
                             2       364  
                             1       366  
                             2       367  
                             1       370  
                             1       371  
                             2       373  
                             2       375  
                             1       377  
                             1       380  
                             2       381  
                             2       383  
                             1       384  
                             1       385  
                             1       386  
                             1       387  
                             1       390  
                             1       392  
                             1       394  
                             1       395  
                             1       396  
                             2       397  
                             3       398  
                             1       399  
                             2       400  
                             2       401  
                             1       402  
                             3       403  
                             1       404  
                             2       405  
                             1       406  
                             1       407  
                             1       409  
                             2       410  
                             1       411  
                             1       412  
                             1       413  
                             2       415  
                             1       416  
                             2       417  
                             2       418  
                             1       420  
                             1       422  
                             3       425  
                             2       426  
                             1       427  
                             1       428  
                             2       429  
                             3       430  
                             2       431  
                             3       433  
                             4       434  
                             2       435  
                             1       436  
                             2       437  
                             2       438  
                             2       439  
                             2       440  
                             1       442  
                             2       444  
                             7       445  
                             3       446  
                             1       448  
                             5       449  
                             3       451  
                             3       452  
                             2       454  
                             2       456  
                             1       457  
                             3       458  
                             2       459  
                             3       460  
                             6       461  
                             4       462  
                             4       463  
                             2       465  
                             4       466  
                             6       467  
                             2       468  
                             2       470  
                             2       471  
                             4       472  
                             1       474  
                             5       475  
                             2       476  
                             2       477  
                             5       478  
                             1       479  
                             4       480  
                             3       481  
                             1       482  
                             2       483  
                             3       484  
                             3       485  
                             4       486  
                             4       487  
                             3       488  
                             6       489  
                             3       490  
                             1       491  
                             1       492  
                             3       493  
                             4       494  
                             1       495  
                             2       496  
                             4       497  
                             4       498  
                             3       499  
                             4       500  
                             3       501  
                             1       502  
                             1       503  
                             3       504  
                             4       505  
                             3       506  
                             3       507  
                             1       508  
                             3       509  
                             5       510  
                             6       511  
                             1       512  
                             3       513  
                             4       514  
                             2       515  
                             3       516  
                             4       517  
                             4       518  
                            11       519  
                             6       520  
                             4       521  
                             4       522  
                             5       523  
                             4       524  
                             5       525  
                             1       526  
                             3       527  
                             8       528  
                             3       529  
                             3       530  
                             4       531  
                             1       532  
                             1       533  
                             7       534  
                             6       536  
                             2       537  
                             5       538  
                             7       539  
                             6       541  
                             9       542  
                             6       543  
                             1       544  
                             1       545  
                             3       546  
                             5       547  
                             7       548  
                             3       549  
                             3       550  
                             5       551  
                             3       552  
                             2       553  
                             6       554  
                             7       555  
                             6       556  
                             7       557  
                             3       558  
                             2       559  
                             1       560  
                             4       561  
                             5       562  
                             4       563  
                             2       564  
                             2       565  
                             5       566  
                             4       567  
                             1       568  
                             2       569  
                             4       570  
                             6       571  
                             4       572  
                             1       573  
                             3       574  
                             3       575  
                             6       576  
                             4       577  
                             2       578  
                             1       579  
                             4       580  
                             7       582  
                             4       583  
                             4       584  
                             5       585  
                             3       586  
                             6       587  
                             3       588  
                             7       589  
                             8       590  
                             5       591  
                             8       592  
                             8       593  
                             5       594  
                             2       595  
                             2       596  
                             2       597  
                             4       598  
                             5       599  
                             4       600  
                             5       601  
                             4       602  
                             5       603  
                             3       604  
                             5       605  
                             2       606  
                             2       607  
                             3       608  
                             2       609  
                             3       610  
                             6       611  
                             5       612  
                             4       613  
                             1       614  
                             1       615  
                             1       616  
                             3       617  
                             4       618  
                             3       619  
                             2       620  
                             5       621  
                             1       622  
                             2       623  
                             1       624  
                             6       625  
                             3       626  
                             2       627  
                             1       628  
                             4       630  
                             3       632  
                             5       633  
                             3       634  
                             2       635  
                             4       636  
                             1       637  
                             5       638  
                             2       639  
                             2       640  
                             2       641  
                             3       642  
                             1       643  
                             2       644  
                             2       645  
                             2       646  
                             3       648  
                             4       649  
                             2       650  
                             2       652  
                             2       655  
                             3       656  
                             1       659  
                             2       661  
                             1       662  
                             2       663  
                             2       664  
                             2       665  
                             2       666  
                             3       667  
                             2       668  
                             2       669  
                             2       670  
                             2       671  
                             4       674  
                             2       675  
                             5       676  
                             1       677  
                             2       678  
                             2       679  
                             2       680  
                             1       681  
                             2       682  
                             1       683  
                             2       684  
                             2       689  
                             1       690  
                             1       691  
                             2       693  
                             2       694  
                             3       695  
                             3       696  
                             1       698  
                             1       699  
                             2       701  
                             2       703  
                             2       704  
                             1       707  
                             2       708  
                             1       710  
                             1       711  
                             1       713  
                             1       716  
                             1       717  
                             1       718  
                             2       721  
                             1       723  
                             2       724  
                             1       727  
                             1       732  
                             2       733  
                             1       736  
                             1       737  
                             1       740  
                             1       745  
                             1       746  
                             1       760  
                             1       763  
                             1       781  
                             1       786  
                             1       805  
                             1       806  
                             1       812  
                             1       823  
                             1       833  
                             1       839  
                            40      9994  not present
                             9      9995  refused
                            14      9996  other

. gen weight = hb2/10

.         //We divide it by 10 in order to express it in kilograms
. replace weight = . if hb2>=9990 
(63 real changes made, 63 to missing)

.         //All missing values or out of range are replaced as "."
. summ weight

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      weight |        897    54.85864    9.017391       29.3       83.9

. 
. 
. *** Variable: HEIGHT (CENTIMETERS)
. codebook hb3, tab (999)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hb3                                                                                                                 man's height in centimeters (1 decimal)
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HB3, but 311 nonmissing values are not labeled

                 range:  [1064,9996]                  units:  1
         unique values:  314                      missing .:  0/960

            tabulation:  Freq.   Numeric  Label
                             1      1064  
                             1      1354  
                             1      1358  
                             1      1367  
                             1      1385  
                             1      1404  
                             1      1409  
                             1      1417  
                             1      1441  
                             1      1445  
                             1      1452  
                             1      1455  
                             1      1458  
                             2      1463  
                             2      1470  
                             1      1474  
                             1      1477  
                             1      1480  
                             1      1482  
                             1      1485  
                             3      1486  
                             1      1488  
                             2      1490  
                             1      1491  
                             1      1492  
                             1      1493  
                             2      1494  
                             2      1500  
                             1      1502  
                             1      1503  
                             1      1504  
                             1      1506  
                             2      1511  
                             3      1512  
                             2      1513  
                             1      1517  
                             1      1519  
                             1      1520  
                             1      1524  
                             2      1527  
                             1      1529  
                             2      1530  
                             2      1531  
                             2      1532  
                             2      1533  
                             1      1534  
                             2      1535  
                             2      1536  
                             3      1537  
                             1      1538  
                             3      1542  
                             1      1543  
                             1      1544  
                             1      1545  
                             3      1546  
                             1      1547  
                             1      1549  
                             1      1550  
                             1      1551  
                             2      1552  
                             1      1553  
                             4      1554  
                             1      1555  
                             1      1556  
                             1      1557  
                             3      1558  
                             2      1559  
                             3      1562  
                             2      1564  
                             2      1566  
                             1      1567  
                             3      1568  
                             2      1569  
                             3      1570  
                             4      1571  
                             2      1572  
                             2      1573  
                             1      1574  
                             3      1575  
                             3      1576  
                             3      1577  
                             3      1578  
                             1      1579  
                             2      1580  
                             3      1581  
                             1      1582  
                             1      1584  
                             2      1585  
                             6      1586  
                             3      1587  
                             1      1588  
                             3      1589  
                             5      1590  
                             4      1591  
                             1      1592  
                             6      1593  
                             4      1594  
                             3      1595  
                             1      1596  
                             1      1597  
                             3      1598  
                             3      1599  
                             2      1600  
                             3      1601  
                             4      1602  
                             2      1603  
                             2      1604  
                             2      1605  
                             1      1606  
                             2      1607  
                             6      1608  
                             2      1609  
                             3      1610  
                             5      1611  
                             5      1612  
                             2      1613  
                             1      1614  
                             1      1615  
                             3      1616  
                             9      1617  
                             6      1618  
                             1      1619  
                             3      1620  
                             5      1621  
                             3      1622  
                             1      1623  
                             2      1624  
                             1      1625  
                             3      1626  
                             4      1627  
                             4      1628  
                             4      1629  
                             5      1630  
                             6      1631  
                             1      1632  
                             9      1633  
                             8      1634  
                             6      1635  
                             6      1636  
                             1      1637  
                             8      1638  
                             3      1639  
                             3      1640  
                             6      1641  
                             1      1642  
                             4      1643  
                             7      1644  
                             8      1645  
                             2      1646  
                             3      1647  
                             1      1648  
                             1      1649  
                             6      1650  
                             7      1651  
                            10      1652  
                             4      1653  
                             3      1654  
                             3      1655  
                             2      1656  
                             7      1657  
                             7      1658  
                             4      1659  
                             7      1660  
                             1      1661  
                             7      1662  
                             4      1663  
                             4      1664  
                             2      1665  
                             4      1666  
                             4      1667  
                             4      1668  
                             2      1669  
                             9      1670  
                             4      1671  
                             3      1672  
                             3      1673  
                             1      1674  
                             7      1675  
                             3      1676  
                             5      1677  
                             2      1678  
                             3      1679  
                             6      1680  
                             3      1681  
                            10      1682  
                             7      1683  
                             6      1684  
                             4      1685  
                             5      1686  
                             4      1687  
                             9      1688  
                             2      1689  
                             5      1690  
                             4      1691  
                             3      1692  
                             4      1693  
                             5      1694  
                             5      1695  
                             5      1696  
                             2      1697  
                             6      1698  
                             2      1699  
                             4      1700  
                             1      1701  
                             8      1702  
                             4      1703  
                             7      1704  
                             4      1705  
                             6      1706  
                             2      1707  
                             3      1708  
                             2      1709  
                             7      1710  
                             4      1711  
                             1      1712  
                             2      1713  
                             8      1714  
                             7      1715  
                             4      1716  
                             2      1717  
                             5      1718  
                             4      1719  
                             2      1720  
                             3      1721  
                             8      1722  
                             4      1723  
                             1      1724  
                             4      1725  
                             3      1726  
                             2      1728  
                             2      1729  
                             2      1730  
                             3      1731  
                             5      1732  
                             2      1733  
                             6      1734  
                             1      1735  
                             5      1736  
                             3      1737  
                             2      1738  
                             5      1739  
                             7      1740  
                             2      1741  
                             3      1742  
                             4      1743  
                             3      1744  
                             2      1745  
                             3      1746  
                             3      1747  
                             2      1748  
                             3      1749  
                             4      1750  
                             3      1751  
                             1      1753  
                             3      1754  
                             2      1756  
                             4      1757  
                             8      1758  
                             2      1759  
                             2      1760  
                             2      1762  
                             4      1763  
                             3      1764  
                             2      1765  
                             3      1766  
                             3      1767  
                             1      1769  
                             2      1770  
                             2      1772  
                             5      1773  
                             4      1774  
                             2      1775  
                             1      1778  
                             2      1780  
                             2      1782  
                             3      1783  
                             1      1784  
                             3      1785  
                             2      1786  
                             1      1788  
                             1      1789  
                             1      1790  
                             1      1792  
                             2      1793  
                             1      1794  
                             1      1795  
                             1      1797  
                             2      1798  
                             2      1799  
                             2      1800  
                             2      1802  
                             1      1805  
                             1      1808  
                             1      1809  
                             2      1810  
                             1      1811  
                             1      1814  
                             2      1815  
                             1      1816  
                             1      1817  
                             1      1820  
                             1      1821  
                             1      1822  
                             1      1824  
                             2      1827  
                             2      1830  
                             1      1837  
                             1      1839  
                             1      1848  
                             1      1850  
                             1      1858  
                            40      9994  not present
                             9      9995  refused
                            15      9996  other

. gen     height = hb3/10 

.         //We divide it by 10 in order to express it in centimeters
. replace height = . if hb3>=9990 
(64 real changes made, 64 to missing)

.         //All missing values or out of range are replaced as "."
. summ height

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      height |        896    166.0386    8.347466      106.4      185.8

. 
. 
. *** Variable: OEDEMA
. lookfor oedema

. gen oedema = "n"  

. tab oedema      

     oedema |      Freq.     Percent        Cum.
------------+-----------------------------------
          n |        960      100.00      100.00
------------+-----------------------------------
      Total |        960      100.00

. 
. 
. 
. *** Variable: SAMPLING WEIGHT ***
. gen  sw = hv005/1000000 

.         //For DHS sample weight has to be divided 1000000*
. summ sw         

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
          sw |        960    .9468386    .6594938    .101967   5.929941

.         
. *** Next, indicate to STATA where the igrowup_restricted.ado file is stored:    
. adopath + "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"
  [1]  (BASE)      "C:\Program Files (x86)\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files (x86)\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\Stata configuration\Stata15\ado\personal/"
  [5]  (PLUS)      "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\Stata configuration\Stata15\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_child"
  [8]              "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"

. 
. 
. /* We use 'reflib' to specify the package directory where the .dta files 
> containing the WHO Growth reference are stored. Note that we use strX to specity 
> the length of the path in string. */            
. gen str150 reflib="C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"

. lab var reflib "Directory of reference tables"

. 
. 
. /* We use datalib to specify the working directory where the input STATA data
> set containing the anthropometric measurement is stored. */
. gen str150 datalib = "$path_out" 

. lab var datalib "Directory for datafiles"

. 
. 
. /* We use datalab to specify the name that will prefix the output files that 
> will be produced from using this ado file*/
. gen str30 datalab = "boy_nutri_Ghana" 

. lab var datalab "Working file"

.         
. 
. 
. /*We now run the command to calculate the z-scores with the adofile */
. who2007 reflib datalib datalab gender age_month_b ageunit weight height oedema sw

Please wait, programme is running.............

..............................................
Note: z-scores are flagged according to the following rules:
 
                            _zhfa = . if (_zhfa < -6 or _zhfa >6)
                            _zwfa = . if (_zwfa < -6 or _zwfa >5)
                            _zbfa = . if (_zbfa < -5 or _zbfa >5)
                            
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\boy_nutri_Ghana_z.dta
>  not found)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\boy_nutri_Ghana_z.dta saved
Note 1:     Original data plus z-scores are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\boy_nutri_Ghana_z.dta
                            
                            
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\boy_nutri_Ghana_z.xls
>  not found)
Note 2:     Original data plus z-scores are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\boy_nutri_Ghana_z.xls
                            

Please wait, programme is calculating prevalences.............

..............................................

Set 1:            Sexes combined

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Set 2:            Males

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Set 3:            Females

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\boy_nutri_Ghana_prev.
> xls not found)
 
Note:       Prevalences are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs\boy_nutri_Ghana_prev.
> xls

. 
. 
. /*We now turn to using the dta file that was created and that contains 
> the calculated z-scores to compute BMI-for-age*/
. use "$path_out\boy_nutri_Ghana_z.dta", clear 

. 
.                 
. gen     z_bmi_boy = _zbfa
(960 missing values generated)

. replace z_bmi_boy = . if _fbfa==1 
(0 real changes made)

. lab var z_bmi_boy "z-score bmi-for-age_boy WHO"

. 
. 
. gen     low_bmiage_boys = (z_bmi_boy < -2.0) 

.         /*Takes value 1 if BMI-for-age is under 2 stdev below the median & 0 
>         otherwise */
. replace low_bmiage_boys = . if z_bmi==.
(960 real changes made, 960 to missing)

. lab var low_bmiage_boys "Teenage low bmi 2sd_boy- WHO"

. 
. 
. gen teen_IR_boys=1 

.         //Identification variable for observations in IR recode (only 15-19 years)      
. 
. 
.         //Retain relevant variables:    
. keep ind_id teen_IR_boys age_month_b low_bmiage_boys

.  
. order ind_id teen_IR_boys age_month_b low_bmiage_boys

.  
. sort ind_id

. 
. 
.         //Erase files from folder:
. erase "$path_out/boy_nutri_Ghana_z.xls"

. erase "$path_out/boy_nutri_Ghana_prev.xls"

. erase "$path_out/boy_nutri_Ghana_z.dta"

. 
. 
.         //Save a temp file for merging with PR:
. save "$path_out/Ghana14_nb_boy.dta", replace
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana14_nb_boy.dta no
> t found)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana14_nb_boy.dta saved

. 
. 
. 
. ********************************************************************************
. *** Step 1.7  PR - HOUSEHOLD MEMBER'S RECODE 
. ********************************************************************************
. 
. use "$path_in/GHPR72FL.dta", clear

. 
. gen cty         = "Ghana" 

. gen ccty        = "GHA"  

. gen year    = "2014"  

. gen survey  = "DHS"

. 
. 
. *** Generate a household unique key variable at the household level using: 
.         ***hv001=cluster number 
.         ***hv002=household number
. gen double hh_id = hv001*10000 + hv002 

. format hh_id %20.0g

. label var hh_id "Household ID"

. codebook hh_id  

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hh_id                                                                                                                                          Household ID
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [10001,4270033]              units:  1
         unique values:  11,835                   missing .:  0/43,945

                  mean:   2.1e+06
              std. dev:   1.2e+06

           percentiles:        10%       25%       50%       75%       90%
                            410020   1.0e+06   2.1e+06   3.2e+06   3.8e+06

. 
. 
. *** Generate individual unique key variable required for data merging using:
.         *** hv001=cluster number; 
.         *** hv002=household number; 
.         *** hvidx=respondent's line number.
. gen double ind_id = hv001*1000000 + hv002*100 + hvidx 

. format ind_id %20.0g

. label var ind_id "Individual ID"

. codebook ind_id

-----------------------------------------------------------------------------------------------------------------------------------------------------------
ind_id                                                                                                                                        Individual ID
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1000101,4.270e+08]          units:  1
         unique values:  43,945                   missing .:  0/43,945

                  mean:   2.1e+08
              std. dev:   1.2e+08

           percentiles:        10%       25%       50%       75%       90%
                           4.1e+07   1.0e+08   2.1e+08   3.2e+08   3.8e+08

. 
. 
. sort hh_id ind_id

.         
.         
. ********************************************************************************
. *** 1.8 DATA MERGING
. ********************************************************************************
. 
. *** Merging BR Recode 
. *****************************************
. merge 1:1 ind_id using "$path_out/Ghana14_BR.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        37,434
        from master                    37,434  (_merge==1)
        from using                          0  (_merge==2)

    matched                             6,511  (_merge==3)
    -----------------------------------------

. 
. drop _merge

. 
. erase "$path_out/Ghana14_BR.dta"

. 
. 
. *** Merging IR Recode 
. *****************************************
. merge 1:1 ind_id using "$path_out/Ghana14_IR.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        34,549
        from master                    34,549  (_merge==1)
        from using                          0  (_merge==2)

    matched                             9,396  (_merge==3)
    -----------------------------------------

. 
. tab women_IR hv117, miss col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

           |    eligibility for
           |   female interview
  women_IR | not eligi   eligible |     Total
-----------+----------------------+----------
         1 |         0      9,396 |     9,396 
           |      0.00      97.31 |     21.38 
-----------+----------------------+----------
         . |    34,289        260 |    34,549 
           |    100.00       2.69 |     78.62 
-----------+----------------------+----------
     Total |    34,289      9,656 |    43,945 
           |    100.00     100.00 |    100.00 

. tab ha65 if hv117==1 & women_IR ==., miss

       result of |
         woman's |
      individual |
       interview |      Freq.     Percent        Cum.
-----------------+-----------------------------------
     not at home |         62       23.85       23.85
         refused |         33       12.69       36.54
partly completed |          5        1.92       38.46
   incapacitated |         26       10.00       48.46
           other |          1        0.38       48.85
               . |        133       51.15      100.00
-----------------+-----------------------------------
           Total |        260      100.00

.         //Total number of eligible women not interviewed
. tab ha65 ha13 if women_IR == . & hv117==1, miss  

       result of |
         woman's |
      individual |         result of measurement - height/weight
       interview |  measured  not prese    refused      other          . |     Total
-----------------+-------------------------------------------------------+----------
     not at home |         1         55          1          5          0 |        62 
         refused |         1          2         24          6          0 |        33 
partly completed |         2          1          0          2          0 |         5 
   incapacitated |         1          0          1         23          1 |        26 
           other |         0          0          0          1          0 |         1 
               . |         0          0          0          0        133 |       133 
-----------------+-------------------------------------------------------+----------
           Total |         5         58         26         37        134 |       260 

. 
. drop _merge

. 
. erase "$path_out/Ghana14_IR.dta"

. 
. 
. *** Merging IR Recode: 15-19 years girls 
. *****************************************
. merge 1:1 ind_id using "$path_out/Ghana14_IR_girls.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        42,957
        from master                    42,957  (_merge==1)
        from using                          0  (_merge==2)

    matched                               988  (_merge==3)
    -----------------------------------------

. 
. tab teen_IR hv117 if hv105>=15 & hv105<=19 & hv042==1, miss col                                                                                          
>                                         

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

           |    eligibility for
           |   female interview
   teen_IR | not eligi   eligible |     Total
-----------+----------------------+----------
         1 |        56        932 |       988 
           |      5.51     100.00 |     50.72 
-----------+----------------------+----------
         . |       960          0 |       960 
           |     94.49       0.00 |     49.28 
-----------+----------------------+----------
     Total |     1,016        932 |     1,948 
           |    100.00     100.00 |    100.00 

. list ind_id     teen_IR age_month hv105 low_bmiage      age     hv104   hv117   ha2     ha3     if      teen_IR==1 & hv117==0 & hv105>=15 & hv105<=19

       +--------------------------------------------------------------------------------------------------------+
       |    ind_id   teen_IR   age_mo~h   hv105   low_bm~e   age_mo~h    hv104      hv117        ha2        ha3 |
       |--------------------------------------------------------------------------------------------------------|
  174. |   2002002         1          .      19          .          .   female   not elig      other      other |
  478. |   5001406         1          .      18          .          .   female   not elig   not pres   not pres |
  562. |   5002603         1          .      15          .          .   female   not elig   not pres   not pres |
 1800. |  18001402         1          .      16          .          .   female   not elig        611       1644 |
 2124. |  21000510         1          .      16          .          .   female   not elig   not pres   not pres |
       |--------------------------------------------------------------------------------------------------------|
 2870. |  27000905         1          .      16          .          .   female   not elig   not pres   not pres |
 4286. |  40000906         1          .      15          .          .   female   not elig    refused    refused |
 5217. |  48002904         1          .      16          .          .   female   not elig   not pres   not pres |
 6098. |  56002202         1          .      19          .          .   female   not elig        525       1583 |
 7487. |  70002503         1          .      16          .          .   female   not elig   not pres   not pres |
       |--------------------------------------------------------------------------------------------------------|
 9699. |  91002604         1          .      17          .          .   female   not elig        557       1577 |
10259. |  96002503         1          .      17          .          .   female   not elig   not pres   not pres |
10887. | 103002002         1          .      19          .          .   female   not elig   not pres   not pres |
11049. | 105001402         1          .      16          .          .   female   not elig   not pres   not pres |
11373. | 108002507         1          .      18          .          .   female   not elig   not pres   not pres |
       |--------------------------------------------------------------------------------------------------------|
11950. | 115000303         1          .      18          .          .   female   not elig   not pres   not pres |
12330. | 117001504         1          .      18          .          .   female   not elig   not pres   not pres |
12456. | 119000803         1          .      16          .          .   female   not elig        628       1635 |
12860. | 123001305         1          .      18          .          .   female   not elig   not pres   not pres |
13483. | 129002503         1          .      17          .          .   female   not elig        626       1550 |
       |--------------------------------------------------------------------------------------------------------|
13508. | 130000402         1          .      16          .          .   female   not elig   not pres   not pres |
15490. | 149000104         1          .      16          .          .   female   not elig   not pres   not pres |
15560. | 149003203         1          .      16          .          .   female   not elig        605       1654 |
16617. | 162000203         1          .      16          .          .   female   not elig   not pres   not pres |
17914. | 174000702         1          .      18          .          .   female   not elig      other      other |
       |--------------------------------------------------------------------------------------------------------|
18651. | 182000802         1          .      19          .          .   female   not elig   not pres   not pres |
20022. | 194003302         1          .      19          .          .   female   not elig   not pres   not pres |
20812. | 202001204         1          .      17          .          .   female   not elig   not pres   not pres |
20813. | 202001205         1          .      16          .          .   female   not elig   not pres   not pres |
22354. | 216003003         1          .      19          .          .   female   not elig        641       1639 |
       |--------------------------------------------------------------------------------------------------------|
22361. | 216003302         1          .      18          .          .   female   not elig        599       1524 |
24498. | 236001704         1          .      18          .          .   female   not elig   not pres   not pres |
24554. | 237000902         1          .      18          .          .   female   not elig        631       1594 |
24715. | 238001903         1          .      18          .          .   female   not elig   not pres   not pres |
24990. | 241001606         1          .      19          .          .   female   not elig   not pres   not pres |
       |--------------------------------------------------------------------------------------------------------|
25186. | 244000102         1          .      16          .          .   female   not elig   not pres   not pres |
25570. | 248001604         1          .      16          .          .   female   not elig   not pres   not pres |
26549. | 258000404         1          .      19          .          .   female   not elig        557       1637 |
26923. | 261003003         1          .      18          .          .   female   not elig   not pres   not pres |
26940. | 262000105         1          .      17          .          .   female   not elig   not pres   not pres |
       |--------------------------------------------------------------------------------------------------------|
27108. | 263002604         1          .      19          .          .   female   not elig   not pres   not pres |
28535. | 277001405         1          .      16          .          .   female   not elig   not pres   not pres |
29506. | 285000303         1          .      19          .          .   female   not elig        587       1487 |
29753. | 287000303         1          .      16          .          .   female   not elig   not pres   not pres |
29757. | 287000307         1          .      15          .          .   female   not elig   not pres   not pres |
       |--------------------------------------------------------------------------------------------------------|
30590. | 296001803         1          .      17          .          .   female   not elig   not pres   not pres |
31047. | 299002303         1          .      18          .          .   female   not elig   not pres   not pres |
31477. | 303001403         1          .      15          .          .   female   not elig        464       1589 |
31506. | 303002603         1          .      15          .          .   female   not elig        499       1613 |
31585. | 304001703         1          .      19          .          .   female   not elig   not pres   not pres |
       |--------------------------------------------------------------------------------------------------------|
36904. | 356000103         1          .      15          .          .   female   not elig   not pres   not pres |
41539. | 405000702         1          .      16          .          .   female   not elig   not pres   not pres |
42815. | 417000104         1          .      15          .          .   female   not elig   not pres   not pres |
43010. | 418000613         1          .      17          .          .   female   not elig        610       1609 |
43043. | 418001603         1          .      16          .          .   female   not elig   not pres   not pres |
       |--------------------------------------------------------------------------------------------------------|
43769. | 426001603         1          .      19          .          .   female   not elig        595       1628 |
       +--------------------------------------------------------------------------------------------------------+

. 
. tab ha65 if hv117==1 & teen_IR ==. & (hv105>=15 & hv105<=19 & hv042==1), miss                                                   
no observations

.         //Total number of eligible girls not interviewed
.         
. tab ha65 ha13 if hv117==1 & teen_IR ==. & (hv105>=15 & hv105<=19 & hv042==1), miss 
no observations

. tab ha40 if ha65==1 & ha13 ==0 & hv117==1 & teen_IR ==. & (hv105>=15 & hv105<=19 & hv042==1), miss 
no observations

. 
. 
. drop _merge

. 
. erase "$path_out/Ghana14_IR_girls.dta"

. 
. 
. *** Merging MR Recode 
. *****************************************
. merge 1:1 ind_id using "$path_out/Ghana14_MR.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        39,557
        from master                    39,557  (_merge==1)
        from using                          0  (_merge==2)

    matched                             4,388  (_merge==3)
    -----------------------------------------

. 
. tab men_MR hv118, miss col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

           | eligibility for male
           |       interview
    men_MR | not eligi   eligible |     Total
-----------+----------------------+----------
         1 |         0      4,388 |     4,388 
           |      0.00      95.21 |      9.99 
-----------+----------------------+----------
         . |    39,336        221 |    39,557 
           |    100.00       4.79 |     90.01 
-----------+----------------------+----------
     Total |    39,336      4,609 |    43,945 
           |    100.00     100.00 |    100.00 

. /*Men eligible for interview but missing in the final MR datasets for 164 samples
>  *Result of male interview not provided in the dataset*/
. 
. drop _merge

. 
. erase "$path_out/Ghana14_MR.dta"

. 
. 
. *** Merging MR Recode: 15-19 years boys 
. *****************************************
. merge 1:1 ind_id using "$path_out/Ghana14_nb_boy.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        42,985
        from master                    42,985  (_merge==1)
        from using                          0  (_merge==2)

    matched                               960  (_merge==3)
    -----------------------------------------

.         
. drop _merge

. 
. erase "$path_out/Ghana14_nb_boy.dta"

. 
. 
. *** Merging KR Recode 
. *****************************************
. merge 1:1 ind_id using "$path_out/Ghana14_KR.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        40,729
        from master                    40,729  (_merge==1)
        from using                          0  (_merge==2)

    matched                             3,216  (_merge==3)
    -----------------------------------------

. 
. tab child_KR hv120, miss col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

           | children eligibility
           | for height/weight and
           |      hemoglobin
  child_KR | not eligi   eligible |     Total
-----------+----------------------+----------
         1 |         0      3,216 |     3,216 
           |      0.00     100.00 |      7.32 
-----------+----------------------+----------
         . |    40,729          0 |    40,729 
           |    100.00       0.00 |     92.68 
-----------+----------------------+----------
     Total |    40,729      3,216 |    43,945 
           |    100.00     100.00 |    100.00 

. 
. tab hc13 hv120 if child_KR==. & hv120==1
no observations

. 
. drop _merge

. 
. erase "$path_out/Ghana14_KR.dta"

. 
. sort ind_id

. 
. 
. ********************************************************************************
. *** Step 1.9 KEEPING ONLY DE JURE HOUSEHOLD MEMBERS ***
. ********************************************************************************
. 
. //Permanent (de jure) household members 
. clonevar resident = hv102 
(1 missing value generated)

. codebook resident, tab (10) 

-----------------------------------------------------------------------------------------------------------------------------------------------------------
resident                                                                                                                                     usual resident
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV102

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  1/43,945

            tabulation:  Freq.   Numeric  Label
                           631         0  no
                        43,313         1  yes
                             1         .  

. label var resident "Permanent (de jure) household member"

. 
. 
. drop if resident!=1 
(632 observations deleted)

. tab resident, miss

  Permanent |
  (de jure) |
  household |
     member |      Freq.     Percent        Cum.
------------+-----------------------------------
        yes |     43,313      100.00      100.00
------------+-----------------------------------
      Total |     43,313      100.00

.         /*Note: The Global MPI is based on de jure (permanent) household members 
>         only. As such, non-usual residents will be excluded from the sample.*/
. 
.                                                                                         
. ********************************************************************************
. *** 1.10 CONTROL VARIABLES
. ********************************************************************************
. 
. /* Households are identified as having 'no eligible' members if there are no 
> applicable population, that is, children 0-5 years for nutrition indicator, and
> adult women 15-49 years or men 15-59 years for child mortality indicator. 
> These households will not have information on relevant indicators of health indicators. 
> As such, these households are considered as non-deprived in those relevant indicators.*/
. 
. 
. *** No Eligible Women 15-49 years
. *****************************************
. gen fem_eligible = (hv117==1)

. replace fem_eligible = 0 if hv117==1 & hv105>49 & hv105<=64 & hv104==2
(0 real changes made)

. bys hh_id: egen hh_n_fem_eligible = sum(fem_eligible)   

.         //Number of eligible women for interview in the hh
. gen no_fem_eligible = (hh_n_fem_eligible==0)                                                                    

.         //Takes value 1 if the household had no eligible females for an interview
. lab var no_fem_eligible "Household has no eligible women"

. tab no_fem_eligible, miss

  Household |
     has no |
   eligible |
      women |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     34,257       79.09       79.09
          1 |      9,056       20.91      100.00
------------+-----------------------------------
      Total |     43,313      100.00

. tab hv117 no_fem_eligible, miss

 eligibility |   Household has no
  for female |    eligible women
   interview |         0          1 |     Total
-------------+----------------------+----------
not eligible |    24,834      9,056 |    33,890 
    eligible |     9,423          0 |     9,423 
-------------+----------------------+----------
       Total |    34,257      9,056 |    43,313 

. 
. 
. *** No Eligible Men 15-59 years
. *****************************************
. gen male_eligible = (hv118==1)

. bys hh_id: egen hh_n_male_eligible = sum(male_eligible)  

.         //Number of eligible men for interview in the hh
. gen no_male_eligible = (hh_n_male_eligible==0)  

.         //Takes value 1 if the household had no eligible males for an interview
. lab var no_male_eligible "Household has no eligible man"

. tab no_male_eligible, miss

  Household |
     has no |
   eligible |
        man |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     15,203       35.10       35.10
          1 |     28,110       64.90      100.00
------------+-----------------------------------
      Total |     43,313      100.00

. tab hv118 no_male_eligible, miss

 eligibility |   Household has no
    for male |     eligible man
   interview |         0          1 |     Total
-------------+----------------------+----------
not eligible |    10,658     28,110 |    38,768 
    eligible |     4,545          0 |     4,545 
-------------+----------------------+----------
       Total |    15,203     28,110 |    43,313 

. 
. 
. *** No Eligible Children 0-5 years
. *****************************************
. gen child_eligible = (hv120==1) 

. bys hh_id: egen hh_n_children_eligible = sum(child_eligible)  

.         //Number of eligible children for anthropometrics
. gen no_child_eligible = (hh_n_children_eligible==0) 

.         //Takes value 1 if there were no eligible children for anthropometrics
. lab var no_child_eligible "Household has no children eligible"

. tab no_child_eligible, miss

  Household |
     has no |
   children |
   eligible |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     12,096       27.93       27.93
          1 |     31,217       72.07      100.00
------------+-----------------------------------
      Total |     43,313      100.00

. tab hv120 no_child_eligible, miss

    children |
 eligibility |
         for |
height/weigh |   Household has no
       t and |   children eligible
  hemoglobin |         0          1 |     Total
-------------+----------------------+----------
not eligible |     8,956     31,217 |    40,173 
    eligible |     3,140          0 |     3,140 
-------------+----------------------+----------
       Total |    12,096     31,217 |    43,313 

. 
. 
. *** No Eligible Women and Men 
. ***********************************************
.         /*NOTE: In the DHS datasets, we use this variable as a control 
>         variable for the child mortality indicator if mortality data was 
>         collected from women and men. If child mortality was only collected 
>         from women, the we use 'no_fem_eligible' as the eligibility criteria */
. gen     no_adults_eligible = (no_fem_eligible==1 & no_male_eligible==1) 

.         //Takes value 1 if the household had no eligible men & women for an interview
. lab var no_adults_eligible "Household has no eligible women or men"

. tab no_adults_eligible, miss 

  Household |
     has no |
   eligible |
   women or |
        men |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     36,987       85.39       85.39
          1 |      6,326       14.61      100.00
------------+-----------------------------------
      Total |     43,313      100.00

. 
. drop fem_eligible hh_n_fem_eligible male_eligible hh_n_male_eligible child_eligible hh_n_children_eligible 

. 
. 
. sort hh_id ind_id

. 
. 
. ********************************************************************************
. *** 1.11 SUBSAMPLE VARIABLE ***
. ********************************************************************************
. 
. tab ha13 hv042, m

  result of |
measurement |
          - |  household selected
height/weig |    for hemoglobin
         ht | not selec   selected |     Total
------------+----------------------+----------
   measured |         0      4,738 |     4,738 
not present |         0        191 |       191 
    refused |         0         46 |        46 
      other |         0         56 |        56 
          . |    21,667     16,615 |    38,282 
------------+----------------------+----------
      Total |    21,667     21,646 |    43,313 

. tab hb13 hv042, m

  result of |
measurement |
          - |  household selected
height/weig |    for hemoglobin
         ht | not selec   selected |     Total
------------+----------------------+----------
   measured |         0      4,362 |     4,362 
not present |         0        319 |       319 
    refused |         0         82 |        82 
      other |         0         65 |        65 
          . |    21,667     16,818 |    38,485 
------------+----------------------+----------
      Total |    21,667     21,646 |    43,313 

. tab hc13 hv042, m

  result of |
measurement |
          - |  household selected
height/weig |    for hemoglobin
         ht | not selec   selected |     Total
------------+----------------------+----------
   measured |         0      3,028 |     3,028 
not present |         0         73 |        73 
    refused |         0         24 |        24 
      other |         0         15 |        15 
          . |    21,667     18,506 |    40,173 
------------+----------------------+----------
      Total |    21,667     21,646 |    43,313 

. 
. gen subsample=hv042

. label var subsample "Households selected as part of nutrition subsample" 

. tab subsample, miss

 Households |
selected as |
    part of |
  nutrition |
  subsample |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     21,667       50.02       50.02
          1 |     21,646       49.98      100.00
------------+-----------------------------------
      Total |     43,313      100.00

. drop if subsample!=1
(21,667 observations deleted)

. 
. ********************************************************************************
. *** 1.12 RENAMING DEMOGRAPHIC VARIABLES ***
. ********************************************************************************
. 
. //Sample weight
. desc hv005

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv005           long    %12.0g                household sample weight (6 decimals)

. clonevar weight = hv005 

. label var weight "Sample weight"

. 
. 
. //Area: urban or rural  
. desc hv025

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv025           byte    %8.0g      HV025      type of place of residence

. codebook hv025, tab (5)         

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv025                                                                                                                            type of place of residence
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV025

                 range:  [1,2]                        units:  1
         unique values:  2                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                         9,572         1  urban
                        12,074         2  rural

. clonevar area = hv025  

. replace area=0 if area==2 
(12,074 real changes made)

. label define lab_area 1 "urban" 0 "rural", modify

. label values area lab_area

. label var area "Area: urban-rural"

. 
. 
. //Relationship to the head of household 
. clonevar relationship = hv101 

. codebook relationship, tab (20)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
relationship                                                                                                                           relationship to head
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV101

                 range:  [1,12]                       units:  1
         unique values:  11                       missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                         5,909         1  head
                         3,038         2  wife or husband
                         9,350         3  son/daughter
                            38         4  son/daughter-in-law
                         1,423         5  grandchild
                           309         6  parent
                            25         7  parent-in-law
                           234         8  brother/sister
                           886        10  other relative
                           267        11  adopted/foster child
                           167        12  not related

. recode relationship (1=1)(2=2)(3=3)(11=3)(4/10=4)(14=3)(15=6) (16=4)(12=5)(13=5)(98=.)                  
(relationship: 3311 changes made)

. label define lab_rel 1"head" 2"spouse" 3"child" 4"extended family" ///
>                                          5"not related" 6"maid", modify

. label values relationship lab_rel

. label var relationship "Relationship to the head of household"

. tab hv101 relationship, miss

                      |         Relationship to the head of household
 relationship to head |      head     spouse      child  extended   not relat |     Total
----------------------+-------------------------------------------------------+----------
                 head |     5,909          0          0          0          0 |     5,909 
      wife or husband |         0      3,038          0          0          0 |     3,038 
         son/daughter |         0          0      9,350          0          0 |     9,350 
  son/daughter-in-law |         0          0          0         38          0 |        38 
           grandchild |         0          0          0      1,423          0 |     1,423 
               parent |         0          0          0        309          0 |       309 
        parent-in-law |         0          0          0         25          0 |        25 
       brother/sister |         0          0          0        234          0 |       234 
       other relative |         0          0          0        886          0 |       886 
 adopted/foster child |         0          0        267          0          0 |       267 
          not related |         0          0          0          0        167 |       167 
----------------------+-------------------------------------------------------+----------
                Total |     5,909      3,038      9,617      2,915        167 |    21,646 

. 
. 
. //Sex of household member       
. codebook hv104, tab (10)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv104                                                                                                                               sex of household member
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV104

                 range:  [1,2]                        units:  1
         unique values:  2                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                        10,348         1  male
                        11,298         2  female

. clonevar sex = hv104  

. label var sex "Sex of household member"

. 
. 
. //Age of household member
. codebook hv105, tab (1000)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv105                                                                                                                              age of household members
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV105, but 95 nonmissing values are not labeled

                 range:  [0,95]                       units:  1
         unique values:  96                       missing .:  5/21,646

            tabulation:  Freq.   Numeric  Label
                           653         0  
                           613         1  
                           627         2  
                           636         3  
                           619         4  
                           545         5  
                           631         6  
                           640         7  
                           653         8  
                           555         9  
                           666        10  
                           509        11  
                           565        12  
                           580        13  
                           615        14  
                           427        15  
                           401        16  
                           339        17  
                           417        18  
                           332        19  
                           336        20  
                           260        21  
                           327        22  
                           284        23  
                           308        24  
                           346        25  
                           266        26  
                           272        27  
                           306        28  
                           265        29  
                           335        30  
                           215        31  
                           285        32  
                           204        33  
                           206        34  
                           339        35  
                           219        36  
                           203        37  
                           257        38  
                           208        39  
                           342        40  
                           137        41  
                           264        42  
                           145        43  
                           180        44  
                           251        45  
                           156        46  
                           132        47  
                           171        48  
                           145        49  
                           210        50  
                           140        51  
                           216        52  
                           140        53  
                           163        54  
                           174        55  
                           121        56  
                           119        57  
                           119        58  
                            73        59  
                           185        60  
                            75        61  
                           132        62  
                            82        63  
                           102        64  
                           155        65  
                            48        66  
                            66        67  
                            79        68  
                            46        69  
                           139        70  
                            33        71  
                            69        72  
                            49        73  
                            29        74  
                            95        75  
                            41        76  
                            31        77  
                            37        78  
                            24        79  
                            70        80  
                            14        81  
                            25        82  
                            10        83  
                             8        84  
                            27        85  
                            10        86  
                            11        87  
                            10        88  
                             8        89  
                            14        90  
                             3        91  
                             6        92  
                             4        93  
                             1        94  
                            41        95  95+
                             5         .  

. clonevar age = hv105  
(5 missing values generated)

. replace age = . if age>=98
(0 real changes made)

. label var age "Age of household member"

. 
. 
. //Age group 
. recode age (0/4 = 1 "0-4")(5/9 = 2 "5-9")(10/14 = 3 "10-14") ///
>                    (15/17 = 4 "15-17")(18/59 = 5 "18-59")(60/max=6 "60+"), gen(agec7)
(21028 differences between age and agec7)

. lab var agec7 "age groups (7 groups)"   

.            
. recode age (0/9 = 1 "0-9") (10/17 = 2 "10-17")(18/59 = 3 "18-59") ///
>                    (60/max=4 "60+"), gen(agec4)
(21028 differences between age and agec4)

. lab var agec4 "age groups (4 groups)"

. 
. 
. //Marital status of household member
. clonevar marital = hv115 
(9,113 missing values generated)

. codebook marital, tab (20)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
marital                                                                                                                              current marital status
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV115

                 range:  [0,4]                        units:  1
         unique values:  4                        missing .:  9,113/21,646

            tabulation:  Freq.   Numeric  Label
                         3,748         0  never married / never lived
                                          together
                         7,043         1  married / living together
                           992         3  widowed
                           750         4  divorced / separated
                         9,113         .  

. recode marital (0=1)(1=2)(8=.)
(marital: 10791 changes made)

. label define lab_mar 1"never married" 2"currently married" ///
>                                          3"widowed" 4"divorced" 5"not living together", modify

. label values marital lab_mar    

. label var marital "Marital status of household member"

. tab hv115 marital, miss

      current marital |           Marital status of household member
               status | never mar  currently    widowed   divorced          . |     Total
----------------------+-------------------------------------------------------+----------
never married / never |     3,748          0          0          0          0 |     3,748 
married / living toge |         0      7,043          0          0          0 |     7,043 
              widowed |         0          0        992          0          0 |       992 
 divorced / separated |         0          0          0        750          0 |       750 
                    . |         0          0          0          0      9,113 |     9,113 
----------------------+-------------------------------------------------------+----------
                Total |     3,748      7,043        992        750      9,113 |    21,646 

. 
. 
. //Total number of de jure hh members in the household
. gen member = 1

. bysort hh_id: egen hhsize = sum(member)

. label var hhsize "Household size"

. tab hhsize, miss

  Household |
       size |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      1,391        6.43        6.43
          2 |      1,768        8.17       14.59
          3 |      2,664       12.31       26.90
          4 |      3,400       15.71       42.61
          5 |      3,480       16.08       58.69
          6 |      3,114       14.39       73.07
          7 |      2,219       10.25       83.32
          8 |      1,264        5.84       89.16
          9 |        810        3.74       92.90
         10 |        540        2.49       95.40
         11 |        198        0.91       96.31
         12 |        228        1.05       97.37
         13 |        130        0.60       97.97
         14 |        126        0.58       98.55
         15 |        150        0.69       99.24
         17 |         68        0.31       99.56
         18 |         18        0.08       99.64
         19 |         57        0.26       99.90
         21 |         21        0.10      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. drop member

. 
. 
. //Subnational region
. lookfor region

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv024           byte    %8.0g      HV024      region

. codebook hv024, tab (100)       

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv024                                                                                                                                                region
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV024

                 range:  [1,10]                       units:  1
         unique values:  10                       missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                         2,173         1  western
                         2,164         2  central
                         2,094         3  greater accra
                         1,847         4  volta
                         2,067         5  eastern
                         2,201         6  ashanti
                         2,368         7  brong ahafo
                         2,678         8  northern
                         2,175         9  upper east
                         1,879        10  upper west

. clonevar region = hv024

. lab var region "Region for subnational decomposition"

. 
. label values region HV024

. tab hv024 region, miss

              |                                     Region for subnational decomposition
       region |   western    central  greater a      volta    eastern    ashanti  brong aha   northern  upper eas  upper wes |     Total
--------------+--------------------------------------------------------------------------------------------------------------+----------
      western |     2,173          0          0          0          0          0          0          0          0          0 |     2,173 
      central |         0      2,164          0          0          0          0          0          0          0          0 |     2,164 
greater accra |         0          0      2,094          0          0          0          0          0          0          0 |     2,094 
        volta |         0          0          0      1,847          0          0          0          0          0          0 |     1,847 
      eastern |         0          0          0          0      2,067          0          0          0          0          0 |     2,067 
      ashanti |         0          0          0          0          0      2,201          0          0          0          0 |     2,201 
  brong ahafo |         0          0          0          0          0          0      2,368          0          0          0 |     2,368 
     northern |         0          0          0          0          0          0          0      2,678          0          0 |     2,678 
   upper east |         0          0          0          0          0          0          0          0      2,175          0 |     2,175 
   upper west |         0          0          0          0          0          0          0          0          0      1,879 |     1,879 
--------------+--------------------------------------------------------------------------------------------------------------+----------
        Total |     2,173      2,164      2,094      1,847      2,067      2,201      2,368      2,678      2,175      1,879 |    21,646 

. 
. 
. ********************************************************************************
. ***  Step 2 Data preparation  ***
. ***  Standardization of the 10 Global MPI indicators 
. ***  Identification of non-deprived & deprived individuals  
. ********************************************************************************
. 
. 
. ********************************************************************************
. *** Step 2.1 Years of Schooling ***
. ********************************************************************************
. 
. ** official entrance age = 6 yrs 
. ** duration of primary = 6 yrs 
. 
. codebook hv108, tab(30)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv108                                                                                                                   education completed in single years
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV108, but 21 nonmissing values are not labeled

                 range:  [0,98]                       units:  1
         unique values:  22                       missing .:  3/21,646

            tabulation:  Freq.   Numeric  Label
                         8,720         0  
                           940         1  
                           975         2  
                           971         3  
                           885         4  
                           936         5  
                         1,058         6  
                           894         7  
                           702         8  
                         1,894         9  
                         1,367        10  
                           292        11  
                           949        12  
                           282        13  
                           152        14  
                           318        15  
                           255        16  
                            23        17  
                            19        18  
                             8        19  
                             2        20  
                             1        98  don't know
                             3         .  

. clonevar  eduyears = hv108   
(3 missing values generated)

.         *total number of years of education
. replace eduyears = . if eduyears>30
(1 real change made, 1 to missing)

.         *recode any unreasonable years of highest education as missing value
. list age eduyears if eduyears>=age & age>0 & eduyears!=.

       +----------------+
       | age   eduyears |
       |----------------|
 9984. |   3          7 |
10415. |   9          9 |
10416. |   7          7 |
       +----------------+

. replace eduyears = . if eduyears>=age & age>0 & eduyears!=.
(3 real changes made, 3 to missing)

. replace eduyears = 0 if age < 10
(1,178 real changes made)

. replace eduyears = 0 if (age==10 | age==11 ) & eduyears < 6
(1,030 real changes made)

.         /*The variable "eduyears" was replaced with a '0' given that the criteria 
>         for this indicator is household member aged 12 years or older */
. 
. tab hv108 hv106, m

   education |
completed in |                highest educational level attained
single years | no educat    primary  secondary     higher  don't kno          . |     Total
-------------+------------------------------------------------------------------+----------
           0 |     8,386        334          0          0          0          0 |     8,720 
           1 |         0        940          0          0          0          0 |       940 
           2 |         0        975          0          0          0          0 |       975 
           3 |         0        971          0          0          0          0 |       971 
           4 |         0        885          0          0          0          0 |       885 
           5 |         0        936          0          0          0          0 |       936 
           6 |         0        803        255          0          0          0 |     1,058 
           7 |         0          0        894          0          0          0 |       894 
           8 |         0          0        702          0          0          0 |       702 
           9 |         0          0      1,894          0          0          0 |     1,894 
          10 |         0          0      1,367          0          0          0 |     1,367 
          11 |         0          0        292          0          0          0 |       292 
          12 |         0          0        931         18          0          0 |       949 
          13 |         0          0        199         83          0          0 |       282 
          14 |         0          0          0        152          0          0 |       152 
          15 |         0          0          0        318          0          0 |       318 
          16 |         0          0          0        255          0          0 |       255 
          17 |         0          0          0         23          0          0 |        23 
          18 |         0          0          0         19          0          0 |        19 
          19 |         0          0          0          8          0          0 |         8 
          20 |         0          0          0          2          0          0 |         2 
  don't know |         0          0          0          0          1          0 |         1 
           . |         0          0          0          0          0          3 |         3 
-------------+------------------------------------------------------------------+----------
       Total |     8,386      5,844      6,534        878          1          3 |    21,646 

. replace eduyears=6 if age>=10 & age<. & (hv106==2| hv106==3) & (hv108==. | hv108==98 | hv108==99)
(0 real changes made)

. /* Few individuals with missing years of schooling but had secondary or higher level education imputed 
>    years of education as 6 years since we know they had completed at-least 6 years of schooling and 
>    it is sufficient for the gMPI to be considered not deprived */                                                                                        
>                                        
. 
. tab ha67 ha66 if hv108==98, m

           |  woman's
   woman's |  highest
   highest | educationa
   year of |  l level
 education |         . |     Total
-----------+-----------+----------
         . |         1 |         1 
-----------+-----------+----------
     Total |         1 |         1 

. tab hb67 hb66 if hv108==98, m

           |   man's
     man's |  highest
   highest | educationa
   year of |  l level
 education |         . |     Total
-----------+-----------+----------
         . |         1 |         1 
-----------+-----------+----------
     Total |         1 |         1 

. 
. replace eduyears = 0 if (hv108==98| hv108==.) & (ha66==0 | hb66==0)
(3 real changes made)

. replace eduyears = ha67 if hv108==98 & ha66==1 & ha67<=6
(0 real changes made)

. replace eduyears = hb67 if hv108==98 & hb66==1 & hb67<=6
(0 real changes made)

. replace eduyears = ha67 + 6 if hv108==98 & ha66==2 & ha67<=7
(0 real changes made)

. replace eduyears = hb67 + 6 if hv108==98 & hb66==2 & hb67<=7
(0 real changes made)

. replace eduyears = ha67 + 13 if hv108==98 & ha66==3 & ha67<=7
(0 real changes made)

. replace eduyears = hb67 + 13 if hv108==98 & hb66==3 & (hb67<=7 | hb67==98)
(0 real changes made)

. 
. replace eduyears=6 if eduyears==. & (ha66==2| ha66==3 | hb66==2| hb66==3)
(0 real changes made)

. 
. replace eduyears=0 if eduyears==. & hv108==98 & hv109==1
(0 real changes made)

. 
.         /*A control variable is created on whether there is information on 
>         years of education for at least 2/3 of the household members. */
. gen temp = 1 if (eduyears!=. & (age>=12 & age!=.)) | (((age==10 | age==11) & eduyears>=6 & eduyears<.))
(7,329 missing values generated)

. bysort  hh_id: egen no_missing_edu = sum(temp)

.         /*Total household members who are 12 years and older with no missing 
>         years of education but recognizing as an achievement if the member is 10 or 11 and already completed 6 yrs of schooling */
. gen temp2 = 1 if (age>=12 & age!=.) | (((age==10 | age==11) & eduyears>=6 & eduyears<.))
(7,328 missing values generated)

. bysort hh_id: egen hhs = sum(temp2)

.         //Total number of household members who are 12 years and older 
. replace no_missing_edu = no_missing_edu/hhs
(19,095 real changes made, 2 to missing)

. replace no_missing_edu = (no_missing_edu>=2/3)
(10 real changes made)

.         /*Identify whether there is information on years of education for at 
>         least 2/3 of the household members aged 12 years and older */
. tab no_missing_edu, miss

no_missing_ |
        edu |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     21,646      100.00      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. label var no_missing_edu "No missing edu for at least 2/3 of the HH members aged 12 years & older"              

. drop temp temp2 hhs

. 
. 
. /*The entire household is considered deprived if no household member aged 
> 12 years or older has completed SIX years of schooling. */
. 
. gen      years_edu6 = (eduyears>=6)

.         /* The years of schooling indicator takes a value of "1" if at least someone 
>         in the hh has reported 6 years of education or more */
. replace years_edu6 = . if eduyears==.
(1 real change made, 1 to missing)

. bysort hh_id: egen hh_years_edu6_1 = max(years_edu6)

. gen     hh_years_edu6 = (hh_years_edu6_1==1)

. replace hh_years_edu6 = . if hh_years_edu6_1==.
(0 real changes made)

. replace hh_years_edu6 = . if hh_years_edu6==0 & no_missing_edu==0 
(0 real changes made)

. lab var hh_years_edu6 "Household has at least one member with 6 years of edu"

. tab hh_years_edu6, m

  Household |
     has at |
  least one |
member with |
 6 years of |
        edu |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      4,664       21.55       21.55
          1 |     16,982       78.45      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. 
. ********************************************************************************
. *** Step 2.2 Child School Attendance ***
. ********************************************************************************
. 
. codebook hv121, tab (10)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv121                                                                                                     member attended school during current school year
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV121

                 range:  [0,2]                        units:  1
         unique values:  2                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                        14,894         0  no
                         6,752         2  attended at some time

. clonevar attendance = hv121 

. recode attendance (2=1) 
(attendance: 6752 changes made)

. codebook attendance, tab (10)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
attendance                                                                                                member attended school during current school year
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV121

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                        14,894         0  no
                         6,752         1  currently attending

. 
. replace attendance = 0 if (attendance==9 | attendance==.) & hv109==0 
(0 real changes made)

.         /*In some countries, they don't assess attendance for those with no 
>          educational attainment. These are replaced with a '0' */
. replace attendance = . if  attendance==9 & hv109!=0
(0 real changes made)

.         //Replace missing values
.         
.         
. 
. *** New Standard MPI ***
. ******************************************************************* 
. /*The entire household is considered deprived if any school-aged child is not 
> attending school up to class 8. */ 
. 
. gen child_schoolage = (age>=6 & age<=14)

.         /* Note: In Ghana, the official school entrance age is 6 years.  
>         So, age range is 6-14 (6+8)
>         Source: http://data.uis.unesco.org*/
.         
.         /*A control variable is created on whether there is no information on 
>         school attendance for at least 2/3 of the school age children */
. count if child_schoolage==1 & attendance==.
  0

.         //Understand how many eligible school aged children are not attending school 
. gen temp = 1 if child_schoolage==1 & attendance!=.
(16,232 missing values generated)

.         /*Generate a variable that captures the number of eligible school aged 
>         children who are attending school */
. bysort hh_id: egen no_missing_atten = sum(temp) 

.         /*Total school age children with no missing information on school 
>         attendance */
. gen temp2 = 1 if child_schoolage==1     
(16,232 missing values generated)

. bysort hh_id: egen hhs = sum(temp2)

.         //Total number of household members who are of school age
. replace no_missing_atten = no_missing_atten/hhs 
(16,109 real changes made, 6,238 to missing)

. replace no_missing_atten = (no_missing_atten>=2/3)
(6,238 real changes made)

.         /*Identify whether there is missing information on school attendance for 
>         more than 2/3 of the school age children */                     
. tab no_missing_atten, miss

no_missing_ |
      atten |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     21,646      100.00      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. label var no_missing_atten "No missing school attendance for at least 2/3 of the school aged children"          

. drop temp temp2 hhs

.         
.         
. bysort hh_id: egen hh_children_schoolage = sum(child_schoolage)

. replace hh_children_schoolage = (hh_children_schoolage>0) 
(9,871 real changes made)

.         //Control variable: 
.         //It takes value 1 if the household has children in school age
. lab var hh_children_schoolage "Household has children in school age"

. 
. 
. gen     child_not_atten = (attendance==0) if child_schoolage==1
(16,232 missing values generated)

. replace child_not_atten = . if attendance==. & child_schoolage==1
(0 real changes made)

. bysort  hh_id: egen any_child_not_atten = max(child_not_atten)
(6238 missing values generated)

. gen     hh_child_atten = (any_child_not_atten==0) 

. replace hh_child_atten = . if any_child_not_atten==.
(6,238 real changes made, 6,238 to missing)

. replace hh_child_atten = 1 if hh_children_schoolage==0
(6,238 real changes made)

. replace hh_child_atten = . if hh_child_atten==1 & no_missing_atten==0 
(0 real changes made)

.         /*If the household has been intially identified as non-deprived, but has 
>         missing school attendance for at least 2/3 of the school aged children, then 
>         we replace this household with a value of '.' because there is insufficient 
>         information to conclusively conclude that the household is not deprived */
. lab var hh_child_atten "Household has all school age children up to class 8 in school"

. tab hh_child_atten, miss

  Household |
    has all |
 school age |
children up |
 to class 8 |
  in school |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,647       16.85       16.85
          1 |     17,999       83.15      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. 
.         /*Note: The indicator takes value 1 if ALL children in school age are 
>         attending school and 0 if there is at least one child not attending. 
>         Households with no children receive a value of 1 as non-deprived. The 
>         indicator has a missing value only when there are all missing values on 
>         children attendance in households that have children in school age. */
.         
.         
. ********************************************************************************
. *** Step 2.3 Nutrition ***
. ********************************************************************************
. 
. 
. ********************************************************************************
. *** Step 2.3a Adult Nutrition ***
. ********************************************************************************
. 
. lookfor body mass

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
ha40            int     %8.0g      HA40       body mass index
hb40            int     %8.0g      HB40       body mass index

. codebook ha40

-----------------------------------------------------------------------------------------------------------------------------------------------------------
ha40                                                                                                                                        body mass index
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HA40, but 1670 nonmissing values are not labeled

                 range:  [1334,9998]                  units:  1
         unique values:  1,671                    missing .:  16,908/21,646

              examples:  3185  
                         .     
                         .     
                         .     

. *gen hb40 = .
. 
. foreach var in ha40 hb40 {
  2.                          gen inf_`var' = 1 if `var'!=.
  3.                          bys sex: tab age inf_`var' 
  4.                          drop inf_`var'
  5.                          }
(16,908 missing values generated)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
-> sex = male
no observations

-----------------------------------------------------------------------------------------------------------------------------------------------------------
-> sex = female

    Age of |
 household |  inf_ha40
    member |         1 |     Total
-----------+-----------+----------
        15 |       206 |       206 
        16 |       194 |       194 
        17 |       154 |       154 
        18 |       189 |       189 
        19 |       153 |       153 
        20 |       144 |       144 
        21 |       143 |       143 
        22 |       171 |       171 
        23 |       150 |       150 
        24 |       174 |       174 
        25 |       177 |       177 
        26 |       141 |       141 
        27 |       162 |       162 
        28 |       155 |       155 
        29 |       133 |       133 
        30 |       185 |       185 
        31 |       115 |       115 
        32 |       151 |       151 
        33 |       108 |       108 
        34 |       115 |       115 
        35 |       176 |       176 
        36 |       122 |       122 
        37 |       108 |       108 
        38 |       140 |       140 
        39 |       104 |       104 
        40 |       177 |       177 
        41 |        68 |        68 
        42 |       139 |       139 
        43 |        69 |        69 
        44 |        89 |        89 
        45 |       121 |       121 
        46 |        73 |        73 
        47 |        63 |        63 
        48 |        95 |        95 
        49 |        74 |        74 
-----------+-----------+----------
     Total |     4,738 |     4,738 

(17,283 missing values generated)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
-> sex = male

    Age of |
 household |  inf_hb40
    member |         1 |     Total
-----------+-----------+----------
        15 |       195 |       195 
        16 |       176 |       176 
        17 |       165 |       165 
        18 |       199 |       199 
        19 |       152 |       152 
        20 |       166 |       166 
        21 |       103 |       103 
        22 |       130 |       130 
        23 |       104 |       104 
        24 |       114 |       114 
        25 |       139 |       139 
        26 |       106 |       106 
        27 |        95 |        95 
        28 |       124 |       124 
        29 |       108 |       108 
        30 |       135 |       135 
        31 |        82 |        82 
        32 |       113 |       113 
        33 |        80 |        80 
        34 |        80 |        80 
        35 |       135 |       135 
        36 |        84 |        84 
        37 |        78 |        78 
        38 |        96 |        96 
        39 |        89 |        89 
        40 |       121 |       121 
        41 |        57 |        57 
        42 |       106 |       106 
        43 |        58 |        58 
        44 |        78 |        78 
        45 |       104 |       104 
        46 |        72 |        72 
        47 |        60 |        60 
        48 |        62 |        62 
        49 |        63 |        63 
        50 |        82 |        82 
        51 |        51 |        51 
        52 |        72 |        72 
        53 |        40 |        40 
        54 |        60 |        60 
        55 |        57 |        57 
        56 |        44 |        44 
        57 |        54 |        54 
        58 |        47 |        47 
        59 |        27 |        27 
-----------+-----------+----------
     Total |     4,363 |     4,363 

-----------------------------------------------------------------------------------------------------------------------------------------------------------
-> sex = female
no observations


. 
. 
. *** ELIGIBILITY FOR BMI ***
. /*Note: In the Ghana DHS_2014 survey, BMI information was collected from eligible female aged 15-49 years and 
>         eligible male aged 15-59 years. We need to construct the eligibility variables based on given age range. */
. 
. ** WOMEN
.         //Check the age range for the BMI information
. sum age if ha40!=. & hv104==2

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |      4,738    29.74631    9.713209         15         49

. 
. gen fem_eligible_bmi = 1 if ha13<.
(16,615 missing values generated)

. replace fem_eligible_bmi = 0 if ha13==.
(16,615 real changes made)

. replace fem_eligible_bmi = 0 if age <15 & age>49 & age<.
(0 real changes made)

. bys hh_id: egen hh_n_fem_eligible_bmi = sum(fem_eligible_bmi)   

.         //Number of eligible women for BMI in the hh
. gen no_fem_eligible_bmi = (hh_n_fem_eligible_bmi==0)                                                                    

.         //Takes value 1 if the household had no eligible females for an interview
. lab var no_fem_eligible_bmi "Household has no eligible women"

. tab no_fem_eligible_bmi, miss

  Household |
     has no |
   eligible |
      women |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     17,776       82.12       82.12
          1 |      3,870       17.88      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. 
. ** MEN
. //Check the age range for the BMI information
. sum age if hb40!=. & hv104==1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |      4,363    32.18886    12.47744         15         59

.         /*For the Ghana DHS 2014, men's BMI information collected from 15-59 years age group.*/
. 
. gen male_eligible_bmi = 1 if hb13<.
(16,818 missing values generated)

. replace male_eligible_bmi = 0 if hb13==.
(16,818 real changes made)

. replace male_eligible_bmi = 0 if age <15 & age>59 & age<.
(0 real changes made)

. bys hh_id: egen hh_n_male_eligible_bmi = sum(male_eligible_bmi)  

.         //Number of eligible men for BMI
. gen no_male_eligible_bmi = (hh_n_male_eligible_bmi==0)  

.         //Takes value 1 if the household had no eligible males for an interview
. lab var no_male_eligible_bmi "Household has no eligible man"

. tab no_male_eligible_bmi, miss

  Household |
     has no |
   eligible |
        man |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     16,009       73.96       73.96
          1 |      5,637       26.04      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. 
. *** No Eligible Women and Men for BMI
. ***********************************************
.         /*NOTE: In the DHS datasets, we use this variable as a control 
>         variable for nutrition when anthropometrics is available for women and men */
. gen     no_adults_eligible_bmi = (no_fem_eligible_bmi==1 & no_male_eligible_bmi==1) 

.         //Takes value 1 if the household had no eligible men & women for BMI
. lab var no_adults_eligible_bmi "Household has no eligible women or men"

. tab no_adults_eligible_bmi, miss

  Household |
     has no |
   eligible |
   women or |
        men |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     20,186       93.26       93.26
          1 |      1,460        6.74      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. 
. *** No Eligible Women or Children for BMI
. ***********************************************
.         /*NOTE: In the DHS datasets, we use this variable as a control 
>         variable for the nutrition indicator if nutrition data is 
>         present for children, women and men. */
. gen no_eligibles_bmi = (no_fem_eligible_bmi==1 & no_child_eligible==1 & no_male_eligible_bmi==1 )

. lab var no_eligibles_bmi "Household has no eligible women or children for BMI"

. tab no_eligibles_bmi, miss

  Household |
     has no |
   eligible |
   women or |
   children |
    for BMI |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     20,384       94.17       94.17
          1 |      1,262        5.83      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. 
. 
. *** BMI Indicator for Women 15-49 years ***
. ******************************************************************* 
. 
. gen     f_bmi = ha40/100
(16,908 missing values generated)

.         //Low BMI of women 15-49 years  
. lab var f_bmi "Women's BMI"

. 
. gen     f_low_bmi = (f_bmi<18.5)

. replace f_low_bmi = . if f_bmi==. | f_bmi>=99.90
(16,909 real changes made, 16,909 to missing)

. lab var f_low_bmi "BMI of women < 18.5"

. 
. bysort hh_id: egen low_bmi = max(f_low_bmi)
(4478 missing values generated)

. 
. gen     hh_no_low_bmi = (low_bmi==0)

.         /*Under this section, households take a value of '1' if no women in the 
>         household has low bmi */
.         
. replace hh_no_low_bmi = . if low_bmi==.
(4,478 real changes made, 4,478 to missing)

.         /*Under this section, households take a value of '.' if there is no 
>         information from eligible women*/
. 
. 
. replace hh_no_low_bmi = 1 if no_fem_eligible_bmi==1
(3,870 real changes made)

.         /*Under this section, households that don't have eligible female population 
>         are identified as non-deprived in nutrition. */ 
.         
. drop low_bmi

. lab var hh_no_low_bmi "Household has no women with low BMI"

. 
. tab hh_no_low_bmi, miss

  Household |
     has no |
 women with |
    low BMI |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,533        7.08        7.08
          1 |     19,505       90.11       97.19
          . |        608        2.81      100.00
------------+-----------------------------------
      Total |     21,646      100.00

.         /*Figures are exclusively based on information from eligible adult 
>         women (15-49 years) */
. 
. 
. *** BMI Indicator for Men 15-59 years ***
. ******************************************************************* 
. gen     m_bmi = hb40/100
(17,283 missing values generated)

.         //Low BMI of women 15-59 years  
. lab var m_bmi "Men's BMI"

. 
. gen     m_low_bmi = (m_bmi<18.5)

. replace m_low_bmi = . if m_bmi==. | m_bmi>=99.90
(17,286 real changes made, 17,286 to missing)

. lab var m_low_bmi "BMI of men < 18.5"

. 
. bysort hh_id: egen low_bmi_m = max(m_low_bmi)
(6906 missing values generated)

. 
. gen     hh_no_low_bmi_men = (low_bmi_m==0)

.         /*Under this section, households take a value of '1' if no women in the 
>         household has low bmi */
.         
. replace hh_no_low_bmi_men = . if low_bmi_m==.
(6,906 real changes made, 6,906 to missing)

.         /*Under this section, households take a value of '.' if there is no 
>         information from eligible women*/
. 
. replace hh_no_low_bmi_men = 1 if no_male_eligible_bmi==1
(5,637 real changes made)

.         /*Under this section, households that don't have eligible female population 
>         are identified as non-deprived in nutrition. */ 
.         
. drop low_bmi_m

. lab var hh_no_low_bmi_men "Household has no men with low BMI"

. 
. tab hh_no_low_bmi_men, miss

  Household |
 has no men |
   with low |
        BMI |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,223       10.27       10.27
          1 |     18,154       83.87       94.14
          . |      1,269        5.86      100.00
------------+-----------------------------------
      Total |     21,646      100.00

.         /*Figures are exclusively based on information from eligible adult 
>         men (15-59 years) */
. 
.         
. *** BMI-for-age for individuals 15-19 years and BMI for individuals 20-59 years ***
. ******************************************************************* 
. *replace age_month=age_month_boys if age_month_boys<. & age_month==.
. *replace low_bmiage=low_bmiage_boys if low_bmiage_boys<. & low_bmiage==.
. 
. gen low_bmi_byage = 0

. lab var low_bmi_byage "Individuals with low BMI or BMI-for-age"

. 
. replace low_bmi_byage = 1 if f_low_bmi==1
(293 real changes made)

.         //Replace variable "low_bmi_byage = 1" if eligible women have low BMI
. 
.         
.         /*Note: The following command will result in 0 changes when there is no BMI 
>         information from men*/
.         
. replace low_bmi_byage = 1 if low_bmi_byage==0 & m_low_bmi==1 
(467 real changes made)

.         //Replace variable "low_bmi_byage = 1" if eligible men have low BMI
.         
.         
.         /*Note: The following command replaces BMI with BMI-for-age for those 
>         between the age group of 15-19 by their age in months where information is 
>         available */
.         
. //Replacement for girls: 
. replace low_bmi_byage = 1 if low_bmiage==1 & age_month!=.
(0 real changes made)

. replace low_bmi_byage = 0 if low_bmiage==0 & age_month!=.
(0 real changes made)

. 
.                 //Replacements for boys:
. replace low_bmi_byage = 1 if low_bmiage_boys==1 & age_month_b!=.
(0 real changes made)

. replace low_bmi_byage = 0 if low_bmiage_boys==0 & age_month_b!=.
(0 real changes made)

.         
.         
.         /*Note: The following control variable is applied when there is BMI 
>         information for women and men, as well as BMI-for-age for teenagers */
. replace low_bmi_byage = . if f_low_bmi==. & low_bmiage==. & m_low_bmi==. & low_bmiage_boys==.
(12,549 real changes made, 12,549 to missing)

. 
.                 
. bysort hh_id: egen low_bmi = max(low_bmi_byage)
(1738 missing values generated)

. 
. gen     hh_no_low_bmiage = (low_bmi==0)

.         /*Households take a value of '1' if all eligible adults and teenagers in the 
>         household has normal bmi or bmi-for-age */
.         
. replace hh_no_low_bmiage = . if low_bmi==.
(1,738 real changes made, 1,738 to missing)

.         /*Households take a value of '.' if there is no information from eligible 
>         individuals in the household */
.         
. replace hh_no_low_bmiage = 1 if no_fem_eligible_bmi==1 & no_male_eligible_bmi==1
(1,460 real changes made)

.         /*Households take a value of '1' if there is no eligible population.*/
. 
. 
. drop low_bmi

. lab var hh_no_low_bmiage "Household has no adult with low BMI or BMI-for-age"

. 
. tab hh_no_low_bmi if subsample==1, m    

  Household |
     has no |
 women with |
    low BMI |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,533        7.08        7.08
          1 |     19,505       90.11       97.19
          . |        608        2.81      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. tab hh_no_low_bmiage if subsample==1, m

  Household |
     has no |
 adult with |
 low BMI or |
BMI-for-age |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,507       16.20       16.20
          1 |     17,861       82.51       98.72
          . |        278        1.28      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. 
.         /*NOTE that hh_no_low_bmi takes value 1 if: (a) no any eligible adult in the 
>         household has (observed) low BMI or (b) there are no eligible adults in the 
>         household. One has to check and adjust the dofile so all people who are 
>         eligible and/or measured are included. It is particularly important to check 
>         if male are measured and what age group among males and females. The 
>         variable takes values 0 for those households that have at least one adult 
>         with observed low BMI. The variable has a missing value only when there is 
>         missing info on BMI for ALL eligible adults in the household */
. 
. ********************************************************************************
. *** Step 2.3b Child Nutrition ***
. ********************************************************************************
. 
. *** Child Underweight Indicator ***
. ************************************************************************
. 
. bysort hh_id: egen temp = max(underweight)
(20153 missing values generated)

. gen     hh_no_underweight = (temp==0) 

.         //Takes value 1 if no child in the hh is underweight 
. replace hh_no_underweight = . if temp==.
(20,153 real changes made, 20,153 to missing)

. replace hh_no_underweight = 1 if no_child_eligible==1 
(9,550 real changes made)

.         /* Households with no eligible children will receive a value of 1 */
. lab var hh_no_underweight "Household has no child underweight - 2 stdev"

. drop temp

. 
. 
. *** Child Stunting Indicator ***
. ************************************************************************
. 
. bysort hh_id: egen temp = max(stunting)
(20529 missing values generated)

. gen     hh_no_stunting = (temp==0) 

.         //Takes value 1 if no child in the hh is stunted
. replace hh_no_stunting = . if temp==.
(20,529 real changes made, 20,529 to missing)

. replace hh_no_stunting = 1 if no_child_eligible==1 
(9,550 real changes made)

. lab var hh_no_stunting "Household has no child stunted - 2 stdev"

. drop temp

. 
. 
. *** Child Either Stunted or Underweight Indicator ***
. ************************************************************************
. 
. gen uw_st = 1 if stunting==1 | underweight==1
(21,643 missing values generated)

. replace uw_st = 0 if stunting==0 & underweight==0
(165 real changes made)

. replace uw_st = . if stunting==. & underweight==.
(0 real changes made)

. 
. bysort hh_id: egen temp = max(uw_st)
(20646 missing values generated)

. gen     hh_no_uw_st = (temp==0) 

.         //Takes value 1 if no child in the hh is underweight or stunted
. replace hh_no_uw_st = . if temp==.
(20,646 real changes made, 20,646 to missing)

. replace hh_no_uw_st = 1 if no_child_eligible==1
(9,550 real changes made)

.         //Households with no eligible children will receive a value of 1 
. lab var hh_no_uw_st "Household has no child underweight or stunted"

. drop temp

. 
. 
. 
. ********************************************************************************
. *** Step 2.3c Household Nutrition Indicator ***
. ********************************************************************************
. 
. gen hh_nutrition_uw_st = 1 if (hh_no_low_bmiage==1 & hh_no_uw_st==1) | (hh_no_low_bmiage==. & hh_no_uw_st==1 & no_child_eligible==0) | (hh_no_low_bmiage=
> =1 & hh_no_uw_st==. & no_adults_eligible_bmi==0)
(3,995 missing values generated)

. replace hh_nutrition_uw_st = 0 if hh_no_low_bmiage==0 | hh_no_uw_st==0
(3,519 real changes made)

. replace hh_nutrition_uw_st = . if hh_no_low_bmiage==. & hh_no_uw_st==.
(0 real changes made)

. replace hh_nutrition_uw_st = 1 if no_eligibles_bmi==1
(0 real changes made)

. /*If country have collected anthropometric data from women, 
>         child 0-5 & a subsample of men, we only replace households which do not have 
>         any of these three applicable population as non-deprived*/
. lab var hh_nutrition_uw_st "Household has no child underweight/stunted or adult deprived by BMI/BMI-for-age"

. 
. 
. ********************************************************************************
. *** Step 2.4 Child Mortality ***
. ********************************************************************************
. 
. codebook v206 v207 mv206 mv207

-----------------------------------------------------------------------------------------------------------------------------------------------------------
v206                                                                                                                                     sons who have died
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)

                 range:  [0,4]                        units:  1
         unique values:  5                        missing .:  16,958/21,646

            tabulation:  Freq.  Value
                         4,159  0
                           424  1
                            86  2
                            16  3
                             3  4
                        16,958  .

-----------------------------------------------------------------------------------------------------------------------------------------------------------
v207                                                                                                                                daughters who have died
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)

                 range:  [0,5]                        units:  1
         unique values:  6                        missing .:  16,958/21,646

            tabulation:  Freq.  Value
                         4,257  0
                           361  1
                            53  2
                            13  3
                             3  4
                             1  5
                        16,958  .

-----------------------------------------------------------------------------------------------------------------------------------------------------------
mv206                                                                                                                                    sons who have died
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)

                 range:  [0,9]                        units:  1
         unique values:  7                        missing .:  17,314/21,646

            tabulation:  Freq.  Value
                         3,851  0
                           362  1
                            81  2
                            29  3
                             7  4
                             1  5
                             1  9
                        17,314  .

-----------------------------------------------------------------------------------------------------------------------------------------------------------
mv207                                                                                                                               daughters who have died
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)

                 range:  [0,5]                        units:  1
         unique values:  6                        missing .:  17,314/21,646

            tabulation:  Freq.  Value
                         3,935  0
                           311  1
                            59  2
                            20  3
                             6  4
                             1  5
                        17,314  .

.         //v206 or mv206: number of sons who have died 
.         //v207 or mv207: number of daughters who have died
.         
. 
.         //Total child mortality reported by eligible women
. egen temp_f = rowtotal(v206 v207), missing
(16958 missing values generated)

. replace temp_f = 0 if v201==0
(0 real changes made)

. bysort  hh_id: egen child_mortality_f = sum(temp_f), missing
(4604 missing values generated)

. lab var child_mortality_f "Occurrence of child mortality reported by women"

. tab child_mortality_f, miss

 Occurrence |
   of child |
  mortality |
reported by |
      women |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     12,637       58.38       58.38
          1 |      2,982       13.78       72.16
          2 |        808        3.73       75.89
          3 |        315        1.46       77.34
          4 |        180        0.83       78.18
          5 |         80        0.37       78.55
          6 |         40        0.18       78.73
          . |      4,604       21.27      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. drop temp_f

.         
.         //Total child mortality reported by eligible men        
. egen temp_m = rowtotal(mv206 mv207), missing
(17314 missing values generated)

. replace temp_m = 0 if mv201==0
(0 real changes made)

. bysort  hh_id: egen child_mortality_m = sum(temp_m), missing
(6987 missing values generated)

. lab var child_mortality_m "Occurrence of child mortality reported by men"

. tab child_mortality_m, miss

 Occurrence |
   of child |
  mortality |
reported by |
        men |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     10,984       50.74       50.74
          1 |      2,229       10.30       61.04
          2 |        756        3.49       64.53
          3 |        402        1.86       66.39
          4 |        104        0.48       66.87
          5 |        125        0.58       67.45
          6 |         45        0.21       67.66
         10 |         14        0.06       67.72
          . |      6,987       32.28      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. drop temp_m

. 
. egen child_mortality = rowmax(child_mortality_f child_mortality_m)
(1757 missing values generated)

. lab var child_mortality "Total child mortality within household reported by women & men"

. tab child_mortality if subsample==1, miss       

Total child |
  mortality |
     within |
  household |
reported by |
women & men |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     13,810       63.80       63.80
          1 |      3,839       17.74       81.53
          2 |      1,225        5.66       87.19
          3 |        535        2.47       89.67
          4 |        223        1.03       90.70
          5 |        158        0.73       91.43
          6 |         85        0.39       91.82
         10 |         14        0.06       91.88
          . |      1,757        8.12      100.00
------------+-----------------------------------
      Total |     21,646      100.00

.         
. /*
> /*Deprived if any children died in the household */
> ************************************************************************
> 
> gen     hh_mortality = (child_mortality==0)
>         /*Household is replaced with a value of "1" if there is no incidence of 
>         child mortality*/
> replace hh_mortality = . if child_mortality==.
> 
> replace hh_mortality = 1 if no_adults_eligible==1 
>         /*Change eligibility to "no_fem_eligible==1" if child mortality indicator 
>         is constructed solely using information from women */
>         
> lab var hh_mortality "Household had no child mortality"
> tab hh_mortality if subsample==1, miss
> */
. 
. /*Deprived if any children died in the household in the last 5 years 
> from the survey year */
. ************************************************************************
. 
. tab child_died_per_wom_5y, miss

Total child |
  death for |
 each women |
in the last |
    5 years |
     (birth |
    recode) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,092       14.28       14.28
          1 |        173        0.80       15.08
          2 |         10        0.05       15.13
          3 |          1        0.00       15.13
          5 |          1        0.00       15.14
          . |     18,369       84.86      100.00
------------+-----------------------------------
      Total |     21,646      100.00

.         /* The 'child_died_per_wom_5y' variable was constructed in Step 1.2 using 
>         information from individual women who ever gave birth in the BR file. The 
>         missing values represent eligible woman who have never ever given birth and 
>         so are not present in the BR file. But these 'missing women' may be living 
>         in households where there are other women with child mortality information 
>         from the BR file. So at this stage, it is important that we aggregate the 
>         information that was obtained from the BR file at the household level. This
>         ensures that women who were not present in the BR file is assigned with a 
>         value, following the information provided by other women in the household.*/
. 
. replace child_died_per_wom_5y = 0 if v201==0 
(1,411 real changes made)

.         /*Assign a value of "0" for:
>         - all eligible women who never ever gave birth */
. replace child_died_per_wom_5y = 0 if no_fem_eligible==1 
(4,362 real changes made)

.         /*Assign a value of "0" for:
>         - individuals living in households that have non-eligible women */      
.         
. bysort hh_id: egen child_mortality_5y = sum(child_died_per_wom_5y), missing
(242 missing values generated)

. 
. replace child_mortality_5y = 0 if child_mortality_5y==. & child_mortality==0
(113 real changes made)

.         /*Replace all households as 0 death if women has missing value and men 
>         reported no death in those households */
. 
. label var child_mortality_5y "Total child mortality within household past 5 years reported by women"

. tab child_mortality_5y if subsample==1, miss

Total child |
  mortality |
     within |
  household |
     past 5 |
      years |
reported by |
      women |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     20,556       94.96       94.96
          1 |        895        4.13       99.10
          2 |         51        0.24       99.33
          3 |          9        0.04       99.38
          5 |          6        0.03       99.40
          . |        129        0.60      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. 
.         /*
>         The new standard MPI indicator takes a value of "1" if eligible women  
>         within the household reported no child mortality or if any child died longer 
>         than 5 years from the survey year. The indicator takes a value of "0" if 
>         women in the household reported any child mortality in the last 5 years from 
>         the survey year. Households were replaced with a value of "1" if eligible 
>         men within the household reported no child mortality in the absence of 
>         information from women. The indicator takes a missing value if there was 
>         missing information on reported death from eligible individuals.
>         */
. 
. gen hh_mortality_5y = (child_mortality_5y==0)

. replace hh_mortality_5y = . if child_mortality_5y==.
(129 real changes made, 129 to missing)

. tab hh_mortality_5y if subsample==1, miss       

hh_mortalit |
       y_5y |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        961        4.44        4.44
          1 |     20,556       94.96       99.40
          . |        129        0.60      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. lab var hh_mortality_5y "Household had no child mortality in the last 5 years"

. 
. 
. 
. ********************************************************************************
. *** Step 2.5 Electricity ***
. ********************************************************************************
. /*Members of the household are considered deprived if the household has no 
> electricity */
. 
. clonevar electricity = hv206 

. codebook electricity, tab (10)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
electricity                                                                                                                                 has electricity
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV206

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                         7,253         0  no
                        14,393         1  yes

. label var electricity "Household has electricity"

. 
. 
. ********************************************************************************
. *** Step 2.6 Sanitation ***
. ********************************************************************************
. 
. /*Members of the household are considered deprived if the household's sanitation 
> facility is not improved, according to MDG guidelines, or it is improved but 
> shared with other household. In cases of mismatch between the MDG guideline and 
> country report, we followed the country report. */
. 
. clonevar toilet = hv205  

. codebook toilet, tab(30) 

-----------------------------------------------------------------------------------------------------------------------------------------------------------
toilet                                                                                                                              type of toilet facility
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV205

                 range:  [11,96]                      units:  1
         unique values:  12                       missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                         1,033        11  flush to piped sewer system
                         1,964        12  flush to septic tank
                           354        13  flush to pit latrine
                            25        14  flush to somewhere else
                            19        15  flush, don't know where
                         6,779        21  ventilated improved pit latrine
                                          (vip)
                         3,420        22  pit latrine with slab
                         1,790        23  pit latrine without slab/open
                                          pit
                         6,201        31  no facility/bush/field
                            17        42  bucket toilet
                            38        43  hanging toilet/latrine
                             6        96  other

. codebook hv225, tab(30)  

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv225                                                                                                                    share toilet with other households
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV225

                 range:  [0,2]                        units:  1
         unique values:  3                        missing .:  6,201/21,646

            tabulation:  Freq.   Numeric  Label
                         3,278         0  no
                         5,200         1  yes, other household only
                         6,967         2  yes, public
                         6,201         .  

. clonevar shared_toilet = hv225 
(6,201 missing values generated)

.         //0=no;1=yes;.=missing
. 
. gen toilet_mdg = 1 if (toilet==11 | toilet==12 | toilet==13 | toilet==15 | toilet==16 | toilet==21 | toilet==22 | toilet==41 | toilet==44)
(8,077 missing values generated)

. replace toilet_mdg = 0 if toilet==14 | toilet==23 | toilet==31 | toilet==42 | toilet==43 | toilet==96
(8,077 real changes made)

. replace toilet_mdg = 0 if shared_toilet==1 
(4,539 real changes made)

. replace toilet_mdg = . if toilet==.  | toilet==99
(0 real changes made)

. lab var toilet_mdg "Household has improved sanitation with MDG Standards"

. tab toilet toilet_mdg, miss

                      |     Household has
                      |  improved sanitation
       type of toilet |  with MDG Standards
             facility |         0          1 |     Total
----------------------+----------------------+----------
flush to piped sewer  |       340        693 |     1,033 
 flush to septic tank |       650      1,314 |     1,964 
 flush to pit latrine |        83        271 |       354 
flush to somewhere el |        25          0 |        25 
flush, don't know whe |         8         11 |        19 
ventilated improved p |     2,245      4,534 |     6,779 
pit latrine with slab |     1,213      2,207 |     3,420 
pit latrine without s |     1,790          0 |     1,790 
no facility/bush/fiel |     6,201          0 |     6,201 
        bucket toilet |        17          0 |        17 
hanging toilet/latrin |        38          0 |        38 
                other |         6          0 |         6 
----------------------+----------------------+----------
                Total |    12,616      9,030 |    21,646 

. 
. /*
> . tab toilet, m
> 
>               type of toilet facility |      Freq.     Percent        Cum.
> --------------------------------------+-----------------------------------
>           flush to piped sewer system |        452        0.66        0.66 11 y
>                  flush to septic tank |      9,493       13.78       14.44 12 y
>                  flush to pit latrine |      1,674        2.43       16.87 13 y
>               flush to somewhere else |         27        0.04       16.91 14 n
>               flush, don't know where |         19        0.03       16.93 15 y
>          flush, bio-digester (biofil) |      1,211        1.76       18.69 16 y
> ventilated improved pit latrine (vip) |     10,461       15.19       33.88 21 y
>                 pit latrine with slab |     11,961       17.36       51.24 22 y
>     pit latrine without slab/open pit |      9,192       13.34       64.58 23 n
>                no facility/bush/field |     24,110       35.00       99.58 31 n
>                     composting toilet |         85        0.12       99.71 41 y
>                         bucket toilet |          9        0.01       99.72 42 n
>                hanging toilet/latrine |         86        0.12       99.84 43 n
>                                 other |        107        0.16      100.00 96 n
> --------------------------------------+-----------------------------------
>                                 Total |     68,887      100.00 */
. 
. 
. 
. ********************************************************************************
. *** Step 2.7 Drinking Water  ***
. ********************************************************************************
. 
. /*Members of the household are considered deprived if the household does not 
> have access to safe drinking water according to MDG guidelines, or safe drinking 
> water is more than a 30-minute walk from home roundtrip. In cases of mismatch 
> between the MDG guideline and country report, we followed the country report.*/
. 
. 
. clonevar water = hv201  

. clonevar timetowater = hv204  
(7 missing values generated)

. codebook water, tab(100)        

-----------------------------------------------------------------------------------------------------------------------------------------------------------
water                                                                                                                              source of drinking water
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV201

                 range:  [11,96]                      units:  1
         unique values:  15                       missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                           884        11  piped into dwelling
                         1,131        12  piped to yard/plot
                         4,398        13  public tap/standpipe
                         7,402        21  tube well or borehole
                         1,332        31  protected well
                           791        32  unprotected well
                            22        41  protected spring
                           159        42  unprotected spring
                         2,040        43  river/dam/lake/ponds/stream/cana
                                          l/irrigation channel
                            79        51  rainwater
                            49        61  tanker truck
                             1        62  cart with small tank
                            72        71  bottled water
                         3,284        72  sachet water
                             2        96  other

. clonevar ndwater = hv202
(21,646 missing values generated)

. 
. /*
> 
> tab water, m
> 
>                source of drinking water |      Freq.     Percent        Cum.
> ----------------------------------------+-----------------------------------
>                     piped into dwelling |      1,755        2.55        2.55 11 y
>                      piped to yard/plot |      3,316        4.81        7.36 12 y
>                       piped to neighbor |      2,732        3.97       11.33 13 y
>                    public tap/standpipe |      9,613       13.95       25.28 14 y
>                   tube well or borehole |     19,982       29.01       54.29 21 y
>                          protected well |      3,711        5.39       59.68 31 y
>                        unprotected well |      2,669        3.87       63.55 32 n
>                        protected spring |         90        0.13       63.68 41 y
>                      unprotected spring |        730        1.06       64.74 42 n
> river/dam/lake/ponds/stream/canal/irrig |      8,563       12.43       77.17 43 n
>                               rainwater |        428        0.62       77.79 51 y
>                            tanker truck |        122        0.18       77.97 61 y
>                    cart with small tank |         17        0.02       77.99 62 y
>                           bottled water |        552        0.80       78.80 71 y
>                            sachet water |     14,607       21.20      100.00 72 y
> ----------------------------------------+-----------------------------------
>                                   Total |     68,887      100.00 */
. 
. gen water_mdg = 1 if water==11 | water==12 | water==13 | water==14 |  water==15 | water==16 |  water==21 | water==22| water==31 | water==41 | water==51 |
>  water==61 | water==62 | water==71 | water==72| water==82
(2,992 missing values generated)

. replace water_mdg = 0 if water==32 | water==42 | water==43 | water==96 
(2,992 real changes made)

. replace water_mdg = 0 if (water_mdg==1 | water_mdg==.) & timetowater >= 30 & timetowater!=. & timetowater!=996 & timetowater!=998 & timetowater!=999 
(3,154 real changes made)

.         //Deprived if water is at more than 30 minutes' walk (roundtrip) 
. 
. 
. replace water_mdg = . if water==. | water==99
(0 real changes made)

. lab var water_mdg "Household has drinking water with MDG standards (considering distance)"

. tab water water_mdg, miss

                      |     Household has
                      |  drinking water with
                      |     MDG standards
                      |     (considering
   source of drinking |       distance)
                water |         0          1 |     Total
----------------------+----------------------+----------
  piped into dwelling |         0        884 |       884 
   piped to yard/plot |         0      1,131 |     1,131 
 public tap/standpipe |       684      3,714 |     4,398 
tube well or borehole |     2,338      5,064 |     7,402 
       protected well |       105      1,227 |     1,332 
     unprotected well |       791          0 |       791 
     protected spring |         0         22 |        22 
   unprotected spring |       159          0 |       159 
river/dam/lake/ponds/ |     2,040          0 |     2,040 
            rainwater |         0         79 |        79 
         tanker truck |         0         49 |        49 
 cart with small tank |         0          1 |         1 
        bottled water |         2         70 |        72 
         sachet water |        25      3,259 |     3,284 
                other |         2          0 |         2 
----------------------+----------------------+----------
                Total |     6,146     15,500 |    21,646 

. 
. 
. ********************************************************************************
. *** Step 2.8 Housing ***
. ********************************************************************************
. 
. /* Members of the household are considered deprived if the household 
> has a dirt, sand or dung floor */
. 
. clonevar floor = hv213 

. codebook floor, tab(99)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
floor                                                                                                                                   main floor material
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV213

                 range:  [11,36]                      units:  1
         unique values:  9                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                         1,470        11  earth, sand
                           478        12  dung
                            16        21  wood planks
                            21        31  parquet, polished wood
                            12        32  vinyl, asphalt strips
                         1,142        33  ceramic/marble/porcelain tiles /
                                          terrazo
                        15,331        34  cement
                         1,393        35  woolen carpets/ synthetic carpet
                         1,783        36  linoleum/rubber carpet

. gen     floor_imp = 1

. replace floor_imp = 0 if floor==11 | floor==12 | floor==96  
(1,948 real changes made)

.         //Deprived if "mud/earth", "sand", "dung", "other"      
. replace floor_imp = . if floor==. | floor==99 
(0 real changes made)

. lab var floor_imp "Household has floor that it is not earth/sand/dung"

. tab floor floor_imp, miss               

                      |  Household has floor
                      |    that it is not
                      |    earth/sand/dung
  main floor material |         0          1 |     Total
----------------------+----------------------+----------
          earth, sand |     1,470          0 |     1,470 
                 dung |       478          0 |       478 
          wood planks |         0         16 |        16 
parquet, polished woo |         0         21 |        21 
vinyl, asphalt strips |         0         12 |        12 
ceramic/marble/porcel |         0      1,142 |     1,142 
               cement |         0     15,331 |    15,331 
woolen carpets/ synth |         0      1,393 |     1,393 
linoleum/rubber carpe |         0      1,783 |     1,783 
----------------------+----------------------+----------
                Total |     1,948     19,698 |    21,646 

. 
. 
. 
. /* Members of the household are considered deprived if the household has wall 
> made of natural or rudimentary materials */
. clonevar wall = hv214 

. codebook wall, tab(99)  

-----------------------------------------------------------------------------------------------------------------------------------------------------------
wall                                                                                                                                     main wall material
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV214

                 range:  [11,96]                      units:  1
         unique values:  16                       missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                           153        11  no walls
                           144        12  cane / palm / trunks
                         2,882        13  dirt
                         1,085        21  bamboo with mud
                         1,851        22  stone with mud
                           438        23  uncovered adobe
                           145        24  plywood
                            17        25  cardboard
                            24        26  reused wood
                        10,407        31  cement
                           154        32  stone with lime / cement
                           938        33  bricks
                         2,784        34  cement blocks
                           402        35  covered adobe
                            37        36  wood planks / shingles
                           185        96  other

. gen     wall_imp = 1 

. replace wall_imp = 0 if wall<=30 | wall==96  
(6,924 real changes made)

.         /*Deprived if "no wall" "cane/palms/trunk" "mud/dirt" 
>         "grass/reeds/thatch" "pole/bamboo with mud" "stone with mud" "plywood"
>         "cardboard" "carton/plastic" "uncovered adobe" "canvas/tent" 
>         "unburnt bricks" "reused wood" "other"*/
. replace wall_imp = . if wall==. | wall==99      
(0 real changes made)

. lab var wall_imp "Household has wall that it is not of low quality materials"

. tab wall wall_imp, miss 

                      |  Household has wall
                      | that it is not of low
                      |   quality materials
   main wall material |         0          1 |     Total
----------------------+----------------------+----------
             no walls |       153          0 |       153 
 cane / palm / trunks |       144          0 |       144 
                 dirt |     2,882          0 |     2,882 
      bamboo with mud |     1,085          0 |     1,085 
       stone with mud |     1,851          0 |     1,851 
      uncovered adobe |       438          0 |       438 
              plywood |       145          0 |       145 
            cardboard |        17          0 |        17 
          reused wood |        24          0 |        24 
               cement |         0     10,407 |    10,407 
stone with lime / cem |         0        154 |       154 
               bricks |         0        938 |       938 
        cement blocks |         0      2,784 |     2,784 
        covered adobe |         0        402 |       402 
wood planks / shingle |         0         37 |        37 
                other |       185          0 |       185 
----------------------+----------------------+----------
                Total |     6,924     14,722 |    21,646 

.         
. 
.         
. /* Members of the household are considered deprived if the household has roof 
> made of natural or rudimentary materials */
. clonevar roof = hv215

. codebook roof, tab(99)          

-----------------------------------------------------------------------------------------------------------------------------------------------------------
roof                                                                                                                                     main roof material
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV215

                 range:  [11,96]                      units:  1
         unique values:  14                       missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                             6        11  no roof
                         1,667        12  thatch / palm leaf
                            63        21  rustic mat
                           192        22  palm / bamboo
                            16        23  wood planks
                             2        24  cardboard
                         6,090        31  metal
                            20        32  wood
                             2        33  calamine / cement fiber
                           127        34  ceramic tiles
                           252        35  cement
                           739        36  roofing shingles
                        12,468        37  asbestos/slate roofing sheets
                             2        96  other

. gen     roof_imp = 1 

. replace roof_imp = 0 if roof<=24 | roof==96  
(1,948 real changes made)

.         /*Deprived if "no roof" "thatch/palm leaf" "mud/earth/lump of earth" 
>         "sod/grass" "plastic/polythene sheeting" "rustic mat" "cardboard" 
>         "canvas/tent" "wood planks/reused wood" "unburnt bricks" "other"*/
. replace roof_imp = . if roof==. | roof==99      
(0 real changes made)

. lab var roof_imp "Household has roof that it is not of low quality materials"

. tab roof roof_imp, miss

                      |  Household has roof
                      | that it is not of low
                      |   quality materials
   main roof material |         0          1 |     Total
----------------------+----------------------+----------
              no roof |         6          0 |         6 
   thatch / palm leaf |     1,667          0 |     1,667 
           rustic mat |        63          0 |        63 
        palm / bamboo |       192          0 |       192 
          wood planks |        16          0 |        16 
            cardboard |         2          0 |         2 
                metal |         0      6,090 |     6,090 
                 wood |         0         20 |        20 
calamine / cement fib |         0          2 |         2 
        ceramic tiles |         0        127 |       127 
               cement |         0        252 |       252 
     roofing shingles |         0        739 |       739 
asbestos/slate roofin |         0     12,468 |    12,468 
                other |         2          0 |         2 
----------------------+----------------------+----------
                Total |     1,948     19,698 |    21,646 

. 
. 
. 
. /*Household is deprived in housing if the roof, floor OR walls uses 
> low quality materials.*/
. gen housing_1 = 1

. replace housing_1 = 0 if floor_imp==0 | wall_imp==0 | roof_imp==0
(7,507 real changes made)

. replace housing_1 = . if floor_imp==. & wall_imp==. & roof_imp==.
(0 real changes made)

. lab var housing_1 "Household has roof, floor & walls that it is not low quality material"

. tab housing_1, miss

  Household |
  has roof, |
    floor & |
 walls that |
  it is not |
low quality |
   material |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      7,507       34.68       34.68
          1 |     14,139       65.32      100.00
------------+-----------------------------------
      Total |     21,646      100.00

. 
. 
. ********************************************************************************
. *** Step 2.9 Cooking Fuel ***
. ********************************************************************************
. 
. /* Members of the household are considered deprived if the household cooks with 
> solid fuels: wood, charcoal, crop residues or dung. "Indicators for Monitoring 
> the Millennium Development Goals", p. 63 */
. 
. clonevar cookingfuel = hv226  

. codebook cookingfuel, tab(99)

-----------------------------------------------------------------------------------------------------------------------------------------------------------
cookingfuel                                                                                                                            type of cooking fuel
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV226

                 range:  [1,95]                       units:  1
         unique values:  10                       missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                           117         1  electricity
                         3,183         2  lpg
                             6         3  natural gas
                            19         5  kerosene
                            21         6  coal, lignite
                         5,987         7  charcoal
                        11,850         8  wood
                           200         9  straw/shrubs/grass
                            35        10  agricultural crop
                           228        95  no food cooked in house

. 
. 
. gen cooking_mdg = 1 if cookingfuel<=8 | cookingfuel==95 | cookingfuel==96 
(235 missing values generated)

. replace cooking_mdg = 0 if (cookingfuel>8 & cookingfuel<=17)
(235 real changes made)

. replace cooking_mdg = . if cookingfuel==. | cookingfuel==99
(0 real changes made)

. lab var cooking_mdg "Househod has cooking fuel according to MDG standards"

.                          
. tab cookingfuel cooking_mdg, miss       

                      | Househod has cooking
                      | fuel according to MDG
                      |       standards
 type of cooking fuel |         0          1 |     Total
----------------------+----------------------+----------
          electricity |         0        117 |       117 
                  lpg |         0      3,183 |     3,183 
          natural gas |         0          6 |         6 
             kerosene |         0         19 |        19 
        coal, lignite |         0         21 |        21 
             charcoal |         0      5,987 |     5,987 
                 wood |         0     11,850 |    11,850 
   straw/shrubs/grass |       200          0 |       200 
    agricultural crop |        35          0 |        35 
no food cooked in hou |         0        228 |       228 
----------------------+----------------------+----------
                Total |       235     21,411 |    21,646 

. 
. 
. ********************************************************************************
. *** Step 2.10 Assets ownership ***
. ********************************************************************************
. 
. /* Members of the household are considered deprived if the household does not 
> own more than one of: radio, TV, telephone, bike, motorbike or refrigerator and 
> does not own a car or truck. */
. 
.         //Check that for standard assets in living standards: "no"==0 and yes=="1"
. codebook hv208 hv207 hv221 hv243a hv209 hv212 hv210 hv211 hv243c sh110l

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv208                                                                                                                                  has color television
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV208

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  9/21,646

            tabulation:  Freq.   Numeric  Label
                        10,415         0  no
                        11,222         1  yes
                             9         .  

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv207                                                                                                                                             has radio
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV207

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                         6,893         0  no
                        14,753         1  yes

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv221                                                                                                                             has telephone (land-line)
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV221

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  4/21,646

            tabulation:  Freq.   Numeric  Label
                        21,430         0  no
                           212         1  yes
                             4         .  

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv243a                                                                                                                                 has mobile telephone
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV243A

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                         3,631         0  no
                        18,015         1  yes

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv209                                                                                                                                      has refrigerator
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV209

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                        15,625         0  no
                         6,021         1  yes

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv212                                                                                                                                         has car/truck
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV212

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  1/21,646

            tabulation:  Freq.   Numeric  Label
                        19,791         0  no
                         1,854         1  yes
                             1         .  

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv210                                                                                                                                           has bicycle
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV210

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                        13,251         0  no
                         8,395         1  yes

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv211                                                                                                                                has motorcycle/scooter
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV211

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                        18,161         0  no
                         3,485         1  yes

-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv243c                                                                                                                                has animal-drawn cart
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV243C

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                        21,117         0  no
                           529         1  yes

-----------------------------------------------------------------------------------------------------------------------------------------------------------
sh110l                                                                                                                         has computer/tablet computer
-----------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  SH110L

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/21,646

            tabulation:  Freq.   Numeric  Label
                        19,415         0  no
                         2,231         1  yes

. 
. lookfor tv television plasma lcd tl tele

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv208           byte    %8.0g      HV208      has color television
hv221           byte    %8.0g      HV221      has telephone (land-line)
hv243a          byte    %8.0g      HV243A     has mobile telephone
sh110d          byte    %8.0g      SH110D     has a black/white television
sh136f1         byte    %8.0g      SH136F1    heard message about malaria on television in the past 6 months

. clonevar television = hv208 
(9 missing values generated)

. 
. lookfor radio walkman stereo stro

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv207           byte    %8.0g      HV207      has radio
sh136f2         byte    %8.0g      SH136F2    heard message about malaria on radio in the past 6 months

. clonevar radio = hv207 

. 
. lookfor telephone tlphone mobilephone ipod telefone tele celular

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv208           byte    %8.0g      HV208      has color television
hv221           byte    %8.0g      HV221      has telephone (land-line)
hv243a          byte    %8.0g      HV243A     has mobile telephone
sh110d          byte    %8.0g      SH110D     has a black/white television
sh136f1         byte    %8.0g      SH136F1    heard message about malaria on television in the past 6 months
television      byte    %8.0g      HV208      has color television

. gen telephone =  hv221
(4 missing values generated)

. clonevar mobiletelephone = hv243a  

. 
. lookfor refrigerator rfrigrateur refri freezer

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv209           byte    %8.0g      HV209      has refrigerator
sh110i          byte    %8.0g      SH110I     has a freezer

. clonevar refrigerator = hv209 

. clonevar freezer= sh110i

. 
. lookfor car van truck

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv212           byte    %8.0g      HV212      has car/truck
hv243c          byte    %8.0g      HV243C     has animal-drawn cart
sh33            byte    %8.0g      SH33       parent/caretaker's line number
sh136e1         byte    %8.0g      SH136E1  * heard message about seeking urgent care for malaria treatment in the past 6 mont
ha51            byte    %8.0g      HA51       line number of parent/caretaker
hc51            byte    %8.0g      HC51       line number of parent/caretaker
hb51            byte    %8.0g      HB51       line number of parent/caretaker
hml30           byte    %8.0g      HML30      line number of parent/caretaker (for malaria testing)

. clonevar car = hv212    
(1 missing value generated)

. 
. lookfor bicycle cycle bicyclette bicicleta                                                              

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv210           byte    %8.0g      HV210      has bicycle
hv211           byte    %8.0g      HV211      has motorcycle/scooter

. clonevar bicycle = hv210 

. 
. lookfor mbike moto

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv211           byte    %8.0g      HV211      has motorcycle/scooter
hv243d          byte    %8.0g      HV243D     has boat with a motor

. clonevar motorbike = hv211 

. 
. lookfor computer ordinateur laptop ipad tablet                                                  

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv237h          byte    %8.0g      HV237H     water usually treated by: purification tablet
sh110l          byte    %8.0g      SH110L     has computer/tablet computer

. clonevar computer = sh110l

. 
. lookfor brouette cart carro carreta

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv243c          byte    %8.0g      HV243C     has animal-drawn cart

. clonevar animal_cart = hv243c

. 
. foreach var in television radio telephone mobiletelephone refrigerator freezer ///
>                            car bicycle motorbike computer  animal_cart {
  2. replace `var' = . if `var'==9 | `var'==99 | `var'==8 | `var'==98 
  3. }
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

.         //9 , 99 and 8, 98 are missing values
.         
. 
.         //Group telephone and mobiletelephone as a single variable
. replace telephone=1 if mobiletelephone==1
(17,831 real changes made)

. 
.         //Group refrigerator and freezer
. replace refrigerator=1 if freezer==1
(505 real changes made)

. 
. 
. /* Members of the household are considered deprived in assets if the household 
> does not own more than one of: radio, TV, telephone, bike, motorbike, 
> refrigerator, computer or animal_cart and does not own a car or truck.*/
. 
. egen n_small_assets2 = rowtotal(television radio telephone refrigerator bicycle motorbike computer animal_cart), missing

. lab var n_small_assets2 "Household Number of Small Assets Owned" 

.   
.   
. gen hh_assets2 = (car==1 | n_small_assets2 > 1) 

. replace hh_assets2 = . if car==. & n_small_assets2==.
(0 real changes made)

. lab var hh_assets2 "Household Asset Ownership: HH has car or more than 1 small assets incl computer & animal cart"
note: label truncated to 80 characters

. 
. 
.         
. ********************************************************************************
. *** Step 2.11 Rename and keep variables for MPI calculation 
. ********************************************************************************
.         
. 
.         //Retain data on sampling design: 
. desc hv022 hv021        

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv022           byte    %8.0g      HV022      sample strata for sampling errors
hv021           int     %8.0g                 primary sampling unit

. clonevar strata = hv022

. clonevar psu = hv021

. 
. 
.         //Retain year, month & date of interview:
. desc hv007 hv006 hv008

              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------
hv007           int     %8.0g                 year of interview
hv006           byte    %8.0g                 month of interview
hv008           int     %8.0g                 date of interview (cmc)

. clonevar year_interview = hv007         

. clonevar month_interview = hv006 

. clonevar date_interview = hv008

.  
. 
. *** Rename key global MPI indicators for estimation ***
. recode hh_mortality_5y      (0=1)(1=0) , gen(d_cm)
(21517 differences between hh_mortality_5y and d_cm)

. recode hh_nutrition_uw_st       (0=1)(1=0) , gen(d_nutr)
(21170 differences between hh_nutrition_uw_st and d_nutr)

. recode hh_child_atten           (0=1)(1=0) , gen(d_satt)
(21646 differences between hh_child_atten and d_satt)

. recode hh_years_edu6            (0=1)(1=0) , gen(d_educ)
(21646 differences between hh_years_edu6 and d_educ)

. recode electricity                      (0=1)(1=0) , gen(d_elct)
(21646 differences between electricity and d_elct)

. recode water_mdg                        (0=1)(1=0) , gen(d_wtr)
(21646 differences between water_mdg and d_wtr)

. recode toilet_mdg                       (0=1)(1=0) , gen(d_sani)
(21646 differences between toilet_mdg and d_sani)

. recode housing_1                        (0=1)(1=0) , gen(d_hsg)
(21646 differences between housing_1 and d_hsg)

. recode cooking_mdg                      (0=1)(1=0) , gen(d_ckfl)
(21646 differences between cooking_mdg and d_ckfl)

. recode hh_assets2                       (0=1)(1=0) , gen(d_asst)
(21646 differences between hh_assets2 and d_asst)

. 
. 
. 
. *** Keep selected variables for global MPI estimation ***
. keep hh_id ind_id ccty cty survey year subsample strata psu weight area relationship sex age agec7 agec4 marital hhsize region year_interview month_inter
> view date_interview d_cm d_nutr d_satt d_educ d_elct d_wtr d_sani d_hsg d_ckfl d_asst hh_mortality_5y hh_nutrition_uw_st hh_child_atten hh_years_edu6 ele
> ctricity water_mdg toilet_mdg housing_1 cooking_mdg hh_assets2 

. 
. order hh_id ind_id ccty cty survey year subsample strata psu weight area relationship sex age agec7 agec4 marital hhsize region year_interview month_inte
> rview date_interview d_cm d_nutr d_satt d_educ d_elct d_wtr d_sani d_hsg d_ckfl d_asst hh_mortality_5y hh_nutrition_uw_st hh_child_atten hh_years_edu6 el
> ectricity water_mdg toilet_mdg housing_1 cooking_mdg hh_assets2 

. 
. 
. 
. *** Sort, compress and save data for estimation ***
. sort ind_id

. compress
  variable hh_id was double now long
  variable ind_id was double now long
  variable subsample was double now byte
  variable hhsize was double now byte
  variable d_cm was double now byte
  variable d_nutr was double now byte
  variable d_satt was double now byte
  variable d_educ was double now byte
  variable d_wtr was double now byte
  variable d_sani was double now byte
  variable d_hsg was double now byte
  variable d_ckfl was double now byte
  variable d_asst was double now byte
  variable hh_mortality_5y was double now byte
  variable hh_nutrition_uw_st was double now byte
  variable hh_child_atten was double now byte
  variable hh_years_edu6 was double now byte
  variable water_mdg was double now byte
  variable toilet_mdg was double now byte
  variable housing_1 was double now byte
  variable cooking_mdg was double now byte
  variable hh_assets2 was double now byte
  (3,203,608 bytes saved)

. save "$path_out/Ghana_dhs14_pov.dta", replace 
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014\Outputs/Ghana_dhs14_pov.dta saved

. log close
      name:  <unnamed>
       log:  C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Ghana\Ghana 2014/Ghana_dhs14_dataprep.log
  log type:  text
 closed on:   2 Feb 2026, 16:08:05
-----------------------------------------------------------------------------------------------------------------------------------------------------------
