-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019/Sierra Leone_dhs19_dataprep.log
  log type:  text
 opened on:  19 Dec 2025, 18:57:20

. 
. 
. ********************************************************************************
. *** Sierra Leone DHS 2019 ***
. ********************************************************************************
. 
. 
. ********************************************************************************
. *** Step 1: Data preparation 
. *** Selecting variables from BR, IR, & MR recode & merging with PR recode 
. ********************************************************************************
. 
.         
. /* In Sierra Leone DHS 2019, height and weight measurements were collected from children (0-5) in 100% of sample and for women (15-49) in 50% of the sample. 
> We use 100% of sample for MPI. */
. 
. 
. ********************************************************************************
. *** Step 1.1 KR - CHILDREN's RECODE (under 5)
. ********************************************************************************
. 
. use "$path_in/SLPR7AFL.DTA", clear 

. 
. *** Generate individual unique key variable required for data merging
. *** v001=cluster number; 
. *** v002=household number; 
. *** b16=child's line number in household
. gen double ind_id = hv001*1000000 + hv002*100 + hvidx

. format ind_id %20.0g

. label var  ind_id "Individual ID"

. 
. 
. duplicates report ind_id

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |        72248             0
--------------------------------------

. duplicates tag ind_id, gen(duplicates)

Duplicates in terms of ind_id

. tab hc13 if duplicates!=0
no observations

.         
. keep if hv120==1
(66,630 observations deleted)

. 
. gen child_KR=1 

.         //Generate identification variable for observations in KR recode
. 
. 
. *** Next, indicate to STATA where the igrowup_restricted.ado file is stored:
.         ***Source of ado file: http://www.who.int/childgrowth/software/en/
. adopath + "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_child"
  [1]  (BASE)      "C:\Program Files (x86)\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files (x86)\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\Stata configuration\Stata15\ado\personal/"
  [5]  (PLUS)      "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\Stata configuration\Stata15\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"
  [8]              "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_child"

. 
. 
. *** We will now proceed to create three nutritional variables: 
.         *** weight-for-age (underweight),  
.         *** weight-for-height (wasting) 
.         *** height-for-age (stunting)
. 
.         
. /* We use 'reflib' to specify the package directory where the .dta files 
> containing the WHO Child Growth Standards are stored. Note that we use 
> strX to specify the length of the path in string. If the path is long, 
> you may specify str55 or more, so it will run. */       
. gen str150 reflib="C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_child"

. lab var reflib "Directory of reference tables"

. 
. 
. /* We use datalib to specify the working directory where the input STATA 
> dataset containing the anthropometric measurement is stored. */
. gen str150 datalib = "$path_out" 

. lab var datalib "Directory for datafiles"

. 
. 
. /* We use datalab to specify the name that will prefix the output files that 
> will be produced from using this ado file (datalab_z_r_rc and datalab_prev_rc)*/
. gen str30 datalab = "children_nutri_SierraLeone" 

. lab var datalab "Working file"

. 
. 
. *** Next check the variables that WHO ado needs to calculate the z-scores:
. *** sex, age, weight, height
. 
. *** Variable: SEX ***
. tab hv104, miss 

     sex of |
  household |
     member |      Freq.     Percent        Cum.
------------+-----------------------------------
       male |      2,868       51.05       51.05
     female |      2,750       48.95      100.00
------------+-----------------------------------
      Total |      5,618      100.00

.         //"1" for male ;"2" for female
. tab  hv104, nol 

     sex of |
  household |
     member |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      2,868       51.05       51.05
          2 |      2,750       48.95      100.00
------------+-----------------------------------
      Total |      5,618      100.00

. clonevar gender = hv104

. desc gender

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
gender          byte    %8.0g      HV104      sex of household member

. tab gender

     sex of |
  household |
     member |      Freq.     Percent        Cum.
------------+-----------------------------------
       male |      2,868       51.05       51.05
     female |      2,750       48.95      100.00
------------+-----------------------------------
      Total |      5,618      100.00

. 
. 
. *** Variable: AGE ***
. tab hc1, miss 

child's age |
  in months |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         90        1.60        1.60
          1 |        108        1.92        3.52
          2 |         98        1.74        5.27
          3 |        127        2.26        7.53
          4 |         90        1.60        9.13
          5 |         95        1.69       10.82
          6 |        113        2.01       12.83
          7 |        102        1.82       14.65
          8 |        101        1.80       16.45
          9 |         66        1.17       17.62
         10 |         72        1.28       18.90
         11 |        103        1.83       20.74
         12 |        134        2.39       23.12
         13 |        114        2.03       25.15
         14 |        119        2.12       27.27
         15 |        108        1.92       29.19
         16 |         98        1.74       30.94
         17 |         80        1.42       32.36
         18 |         76        1.35       33.71
         19 |         68        1.21       34.92
         20 |         81        1.44       36.37
         21 |         69        1.23       37.59
         22 |         67        1.19       38.79
         23 |         67        1.19       39.98
         24 |         92        1.64       41.62
         25 |        117        2.08       43.70
         26 |        120        2.14       45.83
         27 |        107        1.90       47.74
         28 |         93        1.66       49.39
         29 |         87        1.55       50.94
         30 |         81        1.44       52.39
         31 |         74        1.32       53.70
         32 |         67        1.19       54.89
         33 |         68        1.21       56.11
         34 |         67        1.19       57.30
         35 |         81        1.44       58.74
         36 |        139        2.47       61.21
         37 |        126        2.24       63.46
         38 |        117        2.08       65.54
         39 |        120        2.14       67.68
         40 |        125        2.22       69.90
         41 |        100        1.78       71.68
         42 |         77        1.37       73.05
         43 |         67        1.19       74.24
         44 |         88        1.57       75.81
         45 |         69        1.23       77.04
         46 |         73        1.30       78.34
         47 |         62        1.10       79.44
         48 |        126        2.24       81.68
         49 |        128        2.28       83.96
         50 |        144        2.56       86.53
         51 |        131        2.33       88.86
         52 |        108        1.92       90.78
         53 |         96        1.71       92.49
         54 |         93        1.66       94.14
         55 |         61        1.09       95.23
         56 |         61        1.09       96.32
         57 |         61        1.09       97.40
         58 |         63        1.12       98.52
         59 |         83        1.48      100.00
------------+-----------------------------------
      Total |      5,618      100.00

. codebook hc1

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hc1                                                                                                                                                                   child's age in months
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)

                 range:  [0,59]                       units:  1
         unique values:  60                       missing .:  0/5,618

                  mean:   28.9589
              std. dev:   17.3104

           percentiles:        10%       25%       50%       75%       90%
                                 5        13        29        44        52

.         //Age is measured in months
. clonevar age_months = hc1  

. desc age_months

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
age_months      byte    %8.0g                 child's age in months

. summ age_months

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
  age_months |      5,618    28.95888    17.31039          0         59

. gen  str6 ageunit = "months" 

. lab var ageunit "Months"

. gen mdate = mdy(hc18, hc17, hc19)

. gen bdate = mdy(hc30, hc16, hc31) if hc16 <= 31

.         //Calculate birth date in days from date of interview
. replace bdate = mdy(hc30, 15, hc31) if hc16 > 31 
(0 real changes made)

.         //If date of birth of child has been expressed as more than 31, we use 15
. gen age = (mdate-bdate)/30.4375

.         //Calculate age in months with days expressed as decimals
. 
. gen age2=hc1a/30.4375

. compare age age2

                                        ---------- difference ----------
                            count       minimum      average     maximum
------------------------------------------------------------------------
age=age2                     5618
                       ----------
jointly defined              5618             0            0           0
                       ----------
total                        5618

. drop age2

. 
.         
. *** Variable: BODY WEIGHT (KILOGRAMS) ***
. codebook hc2, tab (10000)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hc2                                                                                                                                                 child's weight in kilograms (1 decimal)
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HC2, but 196 nonmissing values are not labeled

                 range:  [21,9996]                    units:  1
         unique values:  199                      missing .:  20/5,618

            tabulation:  Freq.   Numeric  Label
                             1        21  
                             1        24  
                             2        28  
                             2        29  
                             8        31  
                             7        32  
                             3        33  
                             5        34  
                             9        35  
                             9        36  
                             7        37  
                             3        38  
                             6        39  
                             8        40  
                             5        41  
                             8        42  
                             8        43  
                            12        44  
                            18        45  
                             4        46  
                            13        47  
                            10        48  
                            12        49  
                            15        50  
                            16        51  
                            17        52  
                            15        53  
                            20        54  
                            23        55  
                            13        56  
                            17        57  
                            26        58  
                            18        59  
                            20        60  
                            27        61  
                            25        62  
                            34        63  
                            23        64  
                            28        65  
                            36        66  
                            22        67  
                            34        68  
                            22        69  
                            37        70  
                            40        71  
                            35        72  
                            30        73  
                            36        74  
                            35        75  
                            30        76  
                            34        77  
                            36        78  
                            40        79  
                            37        80  
                            41        81  
                            45        82  
                            36        83  
                            30        84  
                            43        85  
                            37        86  
                            37        87  
                            37        88  
                            40        89  
                            36        90  
                            46        91  
                            34        92  
                            54        93  
                            50        94  
                            47        95  
                            39        96  
                            60        97  
                            46        98  
                            43        99  
                            60       100  
                            49       101  
                            65       102  
                            44       103  
                            40       104  
                            44       105  
                            49       106  
                            39       107  
                            32       108  
                            45       109  
                            48       110  
                            49       111  
                            58       112  
                            55       113  
                            33       114  
                            37       115  
                            51       116  
                            41       117  
                            43       118  
                            41       119  
                            43       120  
                            63       121  
                            38       122  
                            45       123  
                            55       124  
                            60       125  
                            48       126  
                            43       127  
                            39       128  
                            57       129  
                            43       130  
                            62       131  
                            51       132  
                            39       133  
                            71       134  
                            53       135  
                            65       136  
                            49       137  
                            56       138  
                            43       139  
                            61       140  
                            67       141  
                            52       142  
                            54       143  
                            31       144  
                            48       145  
                            41       146  
                            38       147  
                            47       148  
                            29       149  
                            41       150  
                            41       151  
                            42       152  
                            33       153  
                            38       154  
                            30       155  
                            30       156  
                            31       157  
                            31       158  
                            26       159  
                            25       160  
                            30       161  
                            27       162  
                            35       163  
                            29       164  
                            14       165  
                            18       166  
                            18       167  
                            29       168  
                            13       169  
                            11       170  
                            22       171  
                            12       172  
                            19       173  
                            17       174  
                            11       175  
                             8       176  
                            10       177  
                             7       178  
                            10       179  
                             9       180  
                             9       181  
                             4       182  
                             7       183  
                             7       184  
                             6       185  
                             5       186  
                             7       187  
                             5       188  
                             5       189  
                             1       190  
                             4       191  
                             2       192  
                             3       193  
                             1       194  
                             6       195  
                             2       196  
                             3       197  
                             3       198  
                             1       200  
                             5       201  
                             1       202  
                             2       203  
                             3       204  
                             3       205  
                             1       206  
                             1       207  
                             1       208  
                             1       210  
                             2       211  
                             2       213  
                             1       215  
                             2       216  
                             2       218  
                             1       221  
                             2       225  
                             1       226  
                             1       227  
                             1       233  
                             2       237  
                             1       238  
                             1       260  
                             1       268  
                           161      9994  not present
                           379      9995  refused
                             5      9996  other
                            20         .  

. gen     weight = hc2/10 
(20 missing values generated)

.         //We divide it by 10 in order to express it in kilograms 
. tab hc2 if hc2>990,m nol   

    child's |
  weight in |
  kilograms |
(1 decimal) |      Freq.     Percent        Cum.
------------+-----------------------------------
       9994 |        161       28.50       28.50
       9995 |        379       67.08       95.58
       9996 |          5        0.88       96.46
          . |         20        3.54      100.00
------------+-----------------------------------
      Total |        565      100.00

.         //Missing values are 994 to 996
. replace weight = . if hc2>=990 
(545 real changes made, 545 to missing)

.         //All missing values or out of range are replaced as "."
. tab     hc13 hc2 if hc2>=990 | hc2==., miss 

  result of |
measurement |
          - |
height/weig |   child's weight in kilograms (1 decimal)
         ht | not prese    refused      other          . |     Total
------------+--------------------------------------------+----------
not present |       160          0          0          0 |       160 
    refused |         0        379          0          0 |       379 
      other |         1          0          5         20 |        26 
------------+--------------------------------------------+----------
      Total |       161        379          5         20 |       565 

.         //hc13: result of the measurement
. desc weight 

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
weight          double  %10.0g                

. summ weight

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      weight |      5,053    11.38789    3.584034        2.1       26.8

. 
. 
. *** Variable: HEIGHT (CENTIMETERS)
. codebook hc3, tab (10000)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hc3                                                                                                                                               child's height in centimeters (1 decimal)
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HC3, but 656 nonmissing values are not labeled

                 range:  [200,9996]                   units:  1
         unique values:  659                      missing .:  20/5,618

            tabulation:  Freq.   Numeric  Label
                             1       200  
                             1       248  
                             1       372  
                             1       402  
                             1       414  
                             1       443  
                             1       453  
                             1       454  
                             1       455  
                             1       457  
                             1       460  
                             1       467  
                             1       470  
                             2       472  
                             1       480  
                             1       483  
                             2       485  
                             2       486  
                             1       487  
                             1       489  
                             3       490  
                             4       491  
                             1       492  
                             3       493  
                             1       494  
                             2       495  
                             1       496  
                             1       499  
                             3       500  
                             8       501  
                             8       502  
                             3       504  
                             4       505  
                             4       510  
                             3       511  
                             2       512  
                             1       513  
                             4       515  
                             2       516  
                             1       517  
                             2       519  
                             6       520  
                             5       522  
                             6       523  
                             3       524  
                            10       525  
                             3       526  
                             3       527  
                             1       528  
                             1       530  
                             2       531  
                             3       532  
                             1       533  
                             1       534  
                             6       535  
                             1       536  
                             2       537  
                             6       538  
                             6       540  
                             5       541  
                             3       542  
                             7       543  
                             1       544  
                             4       545  
                             1       546  
                             1       547  
                             2       549  
                             4       550  
                             5       551  
                             3       552  
                             2       553  
                             1       554  
                             2       555  
                             2       556  
                             3       557  
                             5       560  
                             2       561  
                             7       562  
                             3       563  
                             4       564  
                             5       565  
                             3       566  
                             1       567  
                             3       568  
                             2       569  
                             3       570  
                             4       571  
                             8       572  
                             2       573  
                             4       574  
                             5       575  
                             1       576  
                             5       577  
                             2       578  
                             1       579  
                             6       580  
                             4       581  
                             2       582  
                             6       583  
                             3       584  
                             9       585  
                             3       586  
                             4       587  
                             1       588  
                             5       590  
                             3       591  
                             4       592  
                             7       593  
                             1       594  
                             5       595  
                             5       596  
                             4       597  
                             2       598  
                             1       599  
                             7       600  
                             7       601  
                            15       602  
                             5       603  
                             7       604  
                             3       605  
                             3       606  
                             4       607  
                             2       608  
                             2       609  
                             7       610  
                             3       611  
                             6       612  
                            10       613  
                             4       614  
                             8       615  
                             3       616  
                             5       617  
                             1       618  
                             1       619  
                             6       620  
                             5       621  
                             5       622  
                            10       623  
                             4       624  
                            10       625  
                             7       626  
                             2       627  
                             3       628  
                            13       630  
                             5       631  
                             5       632  
                             7       633  
                             7       634  
                             7       635  
                             3       636  
                             2       637  
                             3       638  
                             2       639  
                             7       640  
                             5       641  
                             8       642  
                             3       643  
                             3       644  
                            10       645  
                             3       646  
                             2       647  
                             4       648  
                             1       649  
                            11       650  
                             4       651  
                             7       652  
                             9       653  
                             7       654  
                             8       655  
                             6       656  
                             6       657  
                             4       658  
                             5       659  
                            11       660  
                             8       661  
                             6       662  
                             1       663  
                            15       665  
                             7       666  
                             9       667  
                            10       668  
                             7       669  
                             9       670  
                            12       671  
                             6       672  
                             7       673  
                             5       674  
                             4       675  
                             6       676  
                             4       677  
                             1       678  
                            10       680  
                             8       681  
                            13       682  
                             4       683  
                             7       684  
                             8       685  
                             4       686  
                             2       687  
                             2       688  
                             1       689  
                             8       690  
                             9       691  
                             9       692  
                             3       693  
                             9       694  
                             9       695  
                             3       696  
                             6       697  
                             6       698  
                             1       699  
                            18       700  
                            12       701  
                            18       702  
                            13       703  
                             7       704  
                             8       705  
                            12       706  
                             5       707  
                             4       708  
                             3       709  
                            13       710  
                             5       711  
                            17       712  
                             9       713  
                             9       714  
                            13       715  
                            12       716  
                             7       717  
                             2       718  
                             1       719  
                            10       720  
                             6       721  
                            12       722  
                             8       723  
                             8       724  
                            18       725  
                             7       726  
                             2       727  
                             6       728  
                             4       729  
                            12       730  
                             9       731  
                            17       732  
                            11       733  
                             8       734  
                            15       735  
                             7       736  
                             5       737  
                             5       738  
                             9       739  
                            16       740  
                            10       741  
                            17       742  
                            11       743  
                            15       744  
                            15       745  
                             9       746  
                             9       747  
                             4       748  
                             3       749  
                            19       750  
                            11       751  
                            12       752  
                            26       753  
                            13       754  
                            22       755  
                             6       756  
                             6       757  
                             1       758  
                             6       759  
                            19       760  
                             8       761  
                            16       762  
                            22       763  
                             8       764  
                            20       765  
                             9       766  
                             4       767  
                             2       768  
                             3       769  
                            19       770  
                            11       771  
                            13       772  
                            11       773  
                             9       774  
                            10       775  
                             8       776  
                             3       777  
                             4       778  
                             3       779  
                            21       780  
                            18       781  
                            23       782  
                            11       783  
                            12       784  
                            23       785  
                             8       786  
                            11       787  
                             8       788  
                             5       789  
                            25       790  
                            16       791  
                            14       792  
                            15       793  
                            13       794  
                            10       795  
                             9       796  
                             6       797  
                             6       798  
                             3       799  
                            30       800  
                             9       801  
                            20       802  
                            22       803  
                             9       804  
                            12       805  
                             3       806  
                             8       807  
                             4       808  
                             3       809  
                            14       810  
                            11       811  
                            14       812  
                            13       813  
                             6       814  
                            19       815  
                            16       816  
                             6       817  
                             5       818  
                             3       819  
                            24       820  
                            11       821  
                            21       822  
                            15       823  
                             7       824  
                            17       825  
                             2       826  
                             6       827  
                             2       828  
                             5       829  
                            21       830  
                            10       831  
                            19       832  
                            13       833  
                            13       834  
                            13       835  
                             5       836  
                             5       837  
                             3       838  
                             1       839  
                            18       840  
                            14       841  
                            11       842  
                            14       843  
                            15       844  
                            17       845  
                             9       846  
                             7       847  
                             5       848  
                             1       849  
                            23       850  
                            16       851  
                            15       852  
                            12       853  
                            13       854  
                            22       855  
                            13       856  
                             7       857  
                             3       858  
                             3       859  
                            18       860  
                             7       861  
                            14       862  
                            15       863  
                             8       864  
                            19       865  
                             8       866  
                             9       867  
                             2       868  
                             7       869  
                            17       870  
                            13       871  
                            14       872  
                            19       873  
                            24       874  
                            16       875  
                             5       876  
                            10       877  
                             4       878  
                             6       879  
                            19       880  
                            13       881  
                            15       882  
                            13       883  
                            17       884  
                            16       885  
                             8       886  
                            14       887  
                             3       888  
                             3       889  
                            20       890  
                            12       891  
                            15       892  
                            19       893  
                            14       894  
                            15       895  
                            11       896  
                             8       897  
                             6       898  
                             2       899  
                            28       900  
                            13       901  
                            18       902  
                            20       903  
                             9       904  
                            19       905  
                            12       906  
                             9       907  
                             6       908  
                             2       909  
                            20       910  
                            14       911  
                            19       912  
                            16       913  
                             7       914  
                            24       915  
                             9       916  
                             7       917  
                             8       918  
                             8       919  
                            17       920  
                            11       921  
                            10       922  
                            18       923  
                            13       924  
                            19       925  
                            10       926  
                            11       927  
                            11       928  
                             5       929  
                            23       930  
                            12       931  
                            15       932  
                             7       933  
                            14       934  
                            12       935  
                             8       936  
                             8       937  
                            14       938  
                             1       939  
                            18       940  
                             5       941  
                            12       942  
                            17       943  
                            18       944  
                            19       945  
                            12       946  
                            10       947  
                             7       948  
                             3       949  
                            24       950  
                            13       951  
                             9       952  
                            20       953  
                            16       954  
                            20       955  
                            10       956  
                             8       957  
                            13       958  
                             3       959  
                            24       960  
                            13       961  
                            23       962  
                            17       963  
                            15       964  
                            30       965  
                            19       966  
                            12       967  
                            11       968  
                             4       969  
                            14       970  
                            13       971  
                            11       972  
                            12       973  
                            10       974  
                            15       975  
                            12       976  
                             4       977  
                             9       978  
                             6       979  
                            19       980  
                             3       981  
                            16       982  
                            16       983  
                            12       984  
                            16       985  
                            10       986  
                             7       987  
                             7       988  
                             3       989  
                            14       990  
                            13       991  
                            21       992  
                            14       993  
                             8       994  
                            17       995  
                             6       996  
                            11       997  
                             8       998  
                             3       999  
                            30      1000  
                            18      1001  
                            20      1002  
                            15      1003  
                            13      1004  
                            12      1005  
                             7      1006  
                             5      1007  
                             8      1008  
                             3      1009  
                             9      1010  
                             6      1011  
                            13      1012  
                            10      1013  
                             6      1014  
                            12      1015  
                             9      1016  
                             4      1017  
                             6      1018  
                             1      1019  
                            15      1020  
                             9      1021  
                            11      1022  
                            12      1023  
                             4      1024  
                            14      1025  
                             8      1026  
                             9      1027  
                             6      1028  
                             4      1029  
                            13      1030  
                            13      1031  
                             9      1032  
                             4      1033  
                             4      1034  
                            10      1035  
                             5      1036  
                             4      1037  
                             5      1038  
                             1      1039  
                             6      1040  
                             5      1041  
                             6      1042  
                             6      1043  
                             5      1044  
                             5      1045  
                             2      1046  
                             3      1047  
                             2      1048  
                             2      1049  
                            11      1050  
                             6      1051  
                             5      1052  
                             4      1053  
                             8      1054  
                            10      1055  
                            13      1056  
                             1      1057  
                             1      1058  
                             2      1059  
                             7      1060  
                             2      1061  
                             3      1062  
                             5      1063  
                             4      1064  
                             5      1065  
                             2      1066  
                             5      1067  
                             2      1068  
                             2      1069  
                             4      1070  
                             4      1071  
                             4      1072  
                             1      1073  
                             2      1074  
                             9      1075  
                             4      1076  
                             2      1077  
                             1      1079  
                             9      1080  
                             2      1081  
                             2      1082  
                             3      1083  
                             1      1084  
                             2      1085  
                             2      1086  
                             3      1087  
                             1      1088  
                             6      1090  
                             3      1092  
                             1      1093  
                             7      1094  
                             3      1095  
                             3      1097  
                             5      1100  
                             2      1101  
                             1      1102  
                             3      1104  
                             2      1105  
                             1      1106  
                             3      1107  
                             1      1108  
                             1      1109  
                             1      1110  
                             1      1111  
                             4      1112  
                             1      1113  
                             1      1114  
                             6      1115  
                             1      1118  
                             2      1120  
                             1      1121  
                             1      1122  
                             2      1123  
                             4      1124  
                             1      1125  
                             1      1128  
                             1      1129  
                             1      1130  
                             2      1131  
                             1      1132  
                             1      1134  
                             1      1135  
                             1      1136  
                             1      1139  
                             1      1140  
                             1      1142  
                             1      1143  
                             1      1144  
                             1      1146  
                             1      1149  
                             1      1150  
                             1      1151  
                             1      1152  
                             1      1170  
                             1      1179  
                             2      1180  
                             1      1183  
                             1      1184  
                             1      1190  
                             1      1195  
                             1      1196  
                             2      1200  
                             1      1212  
                             1      1298  
                           160      9994  not present
                           382      9995  refused
                             5      9996  other
                            20         .  

. gen     height = hc3/10 
(20 missing values generated)

.         //We divide it by 10 in order to express it in centimeters
. tab hc3 if hc3>9990,m nol   

    child's |
  height in |
centimeters |
(1 decimal) |      Freq.     Percent        Cum.
------------+-----------------------------------
       9994 |        160       28.22       28.22
       9995 |        382       67.37       95.59
       9996 |          5        0.88       96.47
          . |         20        3.53      100.00
------------+-----------------------------------
      Total |        567      100.00

.         //Missing values are 9994 to 9996
. replace height = . if hc3>=9990 
(547 real changes made, 547 to missing)

.         //All missing values or out of range are replaced as "."
. tab     hc13 hc3   if hc3>=9990 | hc3==., miss

  result of |
measurement |
          - |
height/weig |  child's height in centimeters (1 decimal)
         ht | not prese    refused      other          . |     Total
------------+--------------------------------------------+----------
not present |       160          0          0          0 |       160 
    refused |         0        379          0          0 |       379 
      other |         0          3          5         20 |        28 
------------+--------------------------------------------+----------
      Total |       160        382          5         20 |       567 

. desc height 

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
height          double  %10.0g                

. summ height

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      height |      5,051    83.59079    14.54655         20      129.8

. 
. 
. *** Variable: MEASURED STANDING/LYING DOWN ***
. codebook hc15

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hc15                                                                                                                                                              height: lying or standing
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HC15

                 range:  [0,2]                        units:  1
         unique values:  3                        missing .:  0/5,618

            tabulation:  Freq.   Numeric  Label
                           567         0  not measured
                         1,997         1  lying
                         3,054         2  standing

. gen measure = "l" if hc15==1 
(3,621 missing values generated)

.         //Child measured lying down
. replace measure = "h" if hc15==2 
(3,054 real changes made)

.         //Child measured standing up
. replace measure = " " if hc15==9 | hc15==0 | hc15==. 
(567 real changes made)

.         //Replace with " " if unknown
. desc measure

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
measure         str1    %9s                   

. tab measure hc15,m

           |    height: lying or standing
   measure | not measu      lying   standing |     Total
-----------+---------------------------------+----------
           |       567          0          0 |       567 
         h |         0          0      3,054 |     3,054 
         l |         0      1,997          0 |     1,997 
-----------+---------------------------------+----------
     Total |       567      1,997      3,054 |     5,618 

. 
.         
. *** Variable: OEDEMA ***
. lookfor oedema

. gen str1 oedema = "n"  

.         //It assumes no-one has oedema
. desc oedema

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
oedema          str1    %9s                   

. tab oedema      

     oedema |      Freq.     Percent        Cum.
------------+-----------------------------------
          n |      5,618      100.00      100.00
------------+-----------------------------------
      Total |      5,618      100.00

. 
. 
. *** Variable: INDIVIDUAL CHILD SAMPLING WEIGHT ***
. gen  sw = hv005/1000000 

.         //For DHS sample weight has to be divided 1000000
. desc sw

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
sw              double  %10.0g                

. summ sw

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
          sw |      5,618    .9704662    .5570741    .161761   7.254974

. 
. keep ind_id child_KR reflib datalib datalab gender age_months ageunit mdate bdate age weight height measure oedema sw

. 
. /*We now run the command to calculate the z-scores with the adofile */
. igrowup_restricted reflib datalib datalab gender age ageunit weight height measure oedema sw

Please wait, programme is running.............

..............................................
Note: z-scores are flagged according to the following rules:
 
                            _zwfl = . if (_zwfl < -5 or _zwfl >5)
                            _zlen = . if (_zlen < -6 or _zlen >6)
                            _zwei = . if (_zwei < -6 or _zwei >5)
                            _zbmi = . if (_zbmi < -5 or _zbmi >5)
                            
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\children_nutri_SierraLeone_z_rc.dta saved
Note 1:     Original data plus z-scores are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\children_nutri_SierraLeone_z_rc.dta
                            
                            
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\children_nutri_SierraLeone_z_rc.xls not found)
Note 2:     Original data plus z-scores are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\children_nutri_SierraLeone_z_rc.xls
                            

Please wait, programme is calculating prevalences.............

..............................................

Set 1:            Sexes combined

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI     Mean      SD
Total    4813       3     2.5     3.5    13.1    12.2    14.1    -.78    1.15
  0-5     494     1.8      .6     3.1     8.1     5.6    10.6    -.27    1.21
 6-11     471       5     2.9     7.1    15.1    11.8    18.4    -.78    1.35
12-23     922     4.3       3     5.7    17.1    14.6    19.6    -.84    1.24
24-35     915     2.9     1.7       4    15.2    12.8    17.6    -.82    1.15
36-47    1013     3.2     2.1     4.3      12     9.9      14    -.84    1.07
48-60     999     1.2      .5     1.9    10.2     8.3    12.2    -.86     .94

Age groups        Length/height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI     Mean      SD
Total    4813    10.4     9.5    11.2    29.2    27.9    30.5   -1.26    1.51
  0-5     494       6     3.8     8.2    17.4      14    20.9    -.78    1.42
 6-11     471     6.8     4.4     9.2    17.5    13.9      21    -.68    1.64
12-23     922      10       8      12    29.8    26.8    32.8   -1.31    1.49
24-35     915    15.4      13    17.8    39.7    36.5    42.9   -1.57    1.58
36-47    1013    10.1     8.2      12    31.6    28.7    34.5   -1.35    1.52
48-60     999    10.2     8.3    12.2    27.8      25    30.7   -1.35    1.32

Age groups        Weight-for-length/height

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    4813       1      .7     1.3     5.3     4.7       6    16.4    15.3    17.4     4.3     3.7     4.9      .9      .6     1.1    -.06    1.19
  0-5     494     1.1      .1     2.1     3.9     2.1     5.7    36.4    32.1    40.8      14    10.9    17.2     3.6     1.8     5.3     .53    1.41
 6-11     471     1.1      .1     2.2    11.2     8.3    14.2    12.1       9    15.1     3.5     1.8     5.3      .8       0     1.8    -.46    1.24
12-23     922     1.7      .8     2.6     8.9       7    10.8    13.2      11    15.5     4.3     2.9     5.6      .4       0      .9    -.28    1.28
24-35     915      .6      .1     1.2     3.1     1.9     4.2    18.6      16    21.1     3.6     2.4     4.9      .5       0       1     .05    1.11
36-47    1013       1      .3     1.7     4.5     3.2     5.9    13.4    11.2    15.5     2.1     1.2     3.1      .3       0      .7    -.08    1.06
48-60     999      .6      .1     1.1     2.8     1.7     3.9    12.5    10.4    14.6     2.5     1.5     3.6      .8      .2     1.4    -.07    1.04

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    4813     1.2      .9     1.5     4.8     4.2     5.4    18.9    17.7      20     4.8     4.2     5.4     1.1      .8     1.4     .03    1.21
  0-5     494     1.5      .4     2.7       4     2.2     5.9    27.4    23.4    31.5     7.2     4.8     9.6       2      .7     3.3     .25     1.3
 6-11     471     2.4      .9     3.8    12.5     9.4    15.6    10.9       8    13.8     2.8     1.2     4.4      .4       0     1.1    -.52    1.25
12-23     922     1.7      .8     2.6     7.2     5.5     8.9    18.2    15.7    20.8     6.4     4.8     8.1     1.4      .6     2.2    -.06    1.32
24-35     915      .9      .2     1.5     2.7     1.6     3.8    25.8    22.9    28.7     6.5     4.8     8.1     1.5      .6     2.3     .28    1.18
36-47    1013     1.1      .4     1.8     3.9     2.7     5.1    17.4      15    19.8     3.2       2     4.3      .4       0      .9     .07     1.1
48-60     999      .5       0       1     2.3     1.3     3.3      14    11.8    16.2     3.1       2     4.2       1      .3     1.6     .02    1.05

Set 2:            Males

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI     Mean      SD
Total    2426     3.4     2.6     4.1    13.8    12.4    15.2    -.78    1.18
  0-5     252     1.8       0     3.7     8.5     4.8    12.1    -.27    1.25
 6-11     225     7.2     3.6    10.8    17.7    12.5      23    -.82     1.5
12-23     463     4.4     2.5     6.4    17.5    13.9      21    -.87    1.24
24-35     450     3.7     1.8     5.5      16    12.5    19.5    -.88    1.14
36-47     543     3.4     1.7       5    12.1     9.2    14.9    -.81    1.07
48-60     493     1.1      .1     2.1    11.2     8.3      14    -.83     .99

Age groups        Length/height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI     Mean      SD
Total    2426    11.7    10.4      13    31.6    29.7    33.5   -1.33    1.52
  0-5     252       7     3.6    10.3    20.5    15.4    25.7    -.78    1.44
 6-11     225     9.4     5.3    13.4      22    16.3    27.6    -.86    1.72
12-23     463    11.1     8.2    14.1    32.4    28.1    36.8   -1.37    1.51
24-35     450    16.9    13.3    20.5    43.8    39.1    48.5   -1.74    1.54
36-47     543    10.2     7.6    12.9    30.3    26.4    34.3   -1.35    1.44
48-60     493    12.6     9.6    15.6    31.2      27    35.4    -1.4    1.39

Age groups        Weight-for-length/height

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    2426     1.1      .7     1.6     5.4     4.5     6.3    18.2    16.7    19.8     4.6     3.7     5.4      .8      .4     1.2    -.03    1.21
  0-5     252     1.4       0       3     4.6     1.8     7.4    38.6    32.4    44.9    14.8    10.2    19.4     2.7      .5     4.9     .53    1.41
 6-11     225     1.7       0     3.6    12.5       8    17.1    14.9      10    19.8     4.4     1.5     7.4     1.2       0     2.9    -.39    1.32
12-23     463     2.1      .7     3.5       9     6.3    11.7    13.6    10.4    16.8     4.1     2.2       6      .2       0      .7    -.28    1.29
24-35     450      .8       0     1.8       3     1.3     4.7      20    16.2    23.8     4.7     2.6     6.7      .6       0     1.4     .08    1.14
36-47     543      .8       0     1.6     4.2     2.4       6    15.3    12.2    18.4     1.9      .6     3.1      .3       0      .8    -.05    1.08
48-60     493      .6       0     1.3     2.6     1.1     4.1    15.2    11.9    18.5     2.8     1.3     4.4     1.1      .1     2.2     .02    1.07

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    2426     1.3      .8     1.8     4.6     3.7     5.4    21.1    19.4    22.7     5.4     4.5     6.4     1.3      .8     1.7      .1    1.23
  0-5     252       2      .1     3.9     3.7     1.1     6.2    27.5    21.8    33.2       7     3.6    10.3     1.3       0     2.9     .26    1.28
 6-11     225     3.4      .8       6    12.1     7.6    16.5    13.8     9.1    18.5     3.7       1     6.4      .3       0     1.2    -.44    1.33
12-23     463     1.9      .5     3.2     7.2     4.8     9.7    18.7    15.1    22.4     7.3     4.8     9.7     1.5      .3     2.7    -.05    1.35
24-35     450     1.1       0     2.1     2.3      .8     3.7    27.5    23.2    31.7     7.9     5.3    10.5     2.3      .8     3.7     .36    1.21
36-47     543      .8       0     1.6     3.6       2     5.3    20.6    17.1    24.1     3.3     1.7     4.9      .5       0     1.2     .12    1.11
48-60     493      .4       0       1     2.2      .8     3.6    17.9    14.4    21.4     3.8       2     5.6     1.5      .3     2.6     .15    1.08

Set 3:            Females

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI     Mean      SD
Total    2387     2.6     1.9     3.2    12.4    11.1    13.8    -.77    1.12
  0-5     242     1.8       0     3.7     7.8     4.2    11.4    -.28    1.16
 6-11     245       3      .7     5.4    12.7     8.3      17    -.74     1.2
12-23     458     4.2     2.3     6.1    16.7    13.2    20.2    -.81    1.24
24-35     465     2.1      .7     3.5    14.5    11.2    17.8    -.76    1.16
36-47     470       3     1.4     4.7    11.8     8.8    14.9    -.87    1.07
48-60     506     1.3      .2     2.3     9.4     6.7      12     -.9     .88

Age groups        Length/height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI     Mean      SD
Total    2387       9     7.8    10.2    26.7    24.9    28.5   -1.18     1.5
  0-5     242     5.1     2.1       8    14.1     9.5    18.7    -.78    1.39
 6-11     245     4.5     1.7     7.3    13.3     8.9    17.8    -.51    1.56
12-23     458     8.8     6.1    11.5    27.2      23    31.4   -1.25    1.46
24-35     465      14    10.7    17.3    35.7    31.2    40.2   -1.39     1.6
36-47     470     9.9     7.1    12.7    33.1    28.7    37.4   -1.34     1.6
48-60     506     7.9     5.5    10.4    24.6    20.7    28.4    -1.3    1.25

Age groups        Weight-for-length/height

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    2387      .9      .5     1.3     5.3     4.3     6.2    14.5    13.1      16       4     3.2     4.8      .9      .5     1.3     -.1    1.17
  0-5     242      .8       0     2.1     3.2      .8     5.6    34.1      28    40.3    13.3     8.8    17.7     4.5     1.6     7.3     .54    1.42
 6-11     245      .6       0     1.8    10.1     6.1      14     9.5     5.6    13.4     2.7      .5     4.9      .5       0     1.6    -.52    1.15
12-23     458     1.3      .2     2.4     8.9     6.2    11.6    12.9     9.7      16     4.5     2.5     6.5      .7       0     1.6    -.27    1.27
24-35     465      .5       0     1.2     3.1     1.4     4.8    17.2    13.7    20.7     2.7     1.1     4.2      .4       0     1.1     .01    1.08
36-47     470     1.3      .2     2.4     4.9     2.8     6.9    11.1     8.2    14.1     2.4      .9     3.9      .4       0       1    -.12    1.03
48-60     506      .6       0     1.4       3     1.4     4.6     9.8     7.1    12.5     2.3      .9     3.7      .5       0     1.2    -.15    1.01

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    2387     1.1      .7     1.5     5.1     4.2       6    16.6    15.1    18.1     4.1     3.3     4.9      .9      .5     1.3    -.03    1.18
  0-5     242     1.1       0     2.6     4.4     1.6     7.2    27.4    21.6    33.2     7.5     3.9      11     2.7      .5       5     .25    1.31
 6-11     245     1.4       0     3.1    12.9     8.5    17.3     8.3     4.6    11.9       2       0       4      .5       0     1.6    -.59    1.18
12-23     458     1.5      .3     2.8     7.1     4.7     9.6    17.7    14.1    21.3     5.6     3.4     7.8     1.3      .2     2.5    -.07     1.3
24-35     465      .7       0     1.5     3.1     1.4     4.8    24.2    20.2    28.2       5     2.9     7.1      .7       0     1.6      .2    1.16
36-47     470     1.5      .3     2.7     4.2     2.3     6.1    13.7    10.5    16.9     2.9     1.3     4.6      .4       0       1     .01    1.09
48-60     506      .6       0     1.4     2.4       1     3.8    10.3     7.5      13     2.4      .9     3.8      .5       0     1.2    -.11     .99
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\children_nutri_SierraLeone_prev_rc.xls not found)
 
Note:       Prevalences are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\children_nutri_SierraLeone_prev_rc.xls

. 
. 
. /*We now turn to using the dta file that was created and that contains 
> the calculated z-scores to create the child nutrition variables following WHO 
> standards */
. use "$path_out/children_nutri_SierraLeone_z_rc.dta", clear 

. 
. 
. 
. *** Standard MPI indicator ***
.         //Takes value 1 if the child is under 2 stdev below the median & 0 otherwise
.         
. gen     underweight = (_zwei < -2.0) 

. replace underweight = . if _zwei == . | _fwei==1
(577 real changes made, 577 to missing)

. lab var underweight  "Child is undernourished (weight-for-age) 2sd - WHO"

. tab underweight, miss

   Child is |
undernouris |
        hed |
(weight-for |
-age) 2sd - |
        WHO |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      4,322       76.93       76.93
          1 |        719       12.80       89.73
          . |        577       10.27      100.00
------------+-----------------------------------
      Total |      5,618      100.00

. 
. 
. gen stunting = (_zlen < -2.0)

. replace stunting = . if _zlen == . | _flen==1
(636 real changes made, 636 to missing)

. lab var stunting "Child is stunted (length/height-for-age) 2sd - WHO"

. tab stunting, miss

   Child is |
    stunted |
(length/hei |
ght-for-age |
) 2sd - WHO |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,454       61.48       61.48
          1 |      1,528       27.20       88.68
          . |        636       11.32      100.00
------------+-----------------------------------
      Total |      5,618      100.00

. 
. 
. gen wasting = (_zwfl < - 2.0)

. replace wasting = . if _zwfl == . | _fwfl == 1
(636 real changes made, 636 to missing)

. lab var wasting  "Child is wasted (weight-for-length/height) 2sd - WHO"

. tab wasting, miss

   Child is |
     wasted |
(weight-for |
-length/hei |
 ght) 2sd - |
        WHO |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      4,709       83.82       83.82
          1 |        273        4.86       88.68
          . |        636       11.32      100.00
------------+-----------------------------------
      Total |      5,618      100.00

. 
. 
.         //Retain relevant variables:
. keep ind_id child_KR underweight stunting wasting 

. 
. order ind_id child_KR underweight stunting wasting 

. 
. sort ind_id

. 
. duplicates report ind_id

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |         5618             0
--------------------------------------

. 
. 
.         //Erase files from folder:
. erase "$path_out/children_nutri_SierraLeone_z_rc.xls"

. erase "$path_out/children_nutri_SierraLeone_prev_rc.xls"

. *erase "$path_out/children_nutri_SierraLeone_z_rc.dta"
. 
. 
.         //Save a temp file for merging with PR:
. save "$path_out/SierraLeone19_KR.dta", replace
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/SierraLeone19_KR.dta not found)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/SierraLeone19_KR.dta saved

.         
. 
. ********************************************************************************
. *** Step 1.2  BR - BIRTH RECODE 
. *** (All females 15-49 years who ever gave birth)  
. ********************************************************************************
. 
. use "$path_in/SLBR7AFL.dta", clear

. 
.                 
. *** Generate individual unique key variable required for data merging
. *** v001=cluster number;  
. *** v002=household number; 
. *** v003=respondent's line number
. gen double ind_id = v001*1000000 + v002*100 + v003 

. format ind_id %20.0g

. label var ind_id "Individual ID"

. 
. 
. desc b3 b7      

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
b3              int     %8.0g                 date of birth (cmc)
b7              int     %8.0g                 age at death (months, imputed)

. gen date_death = b3 + b7
(34,434 missing values generated)

.         //Date of death = date of birth (b3) + age at death (b7)
. gen mdead_survey = v008 - date_death
(34,434 missing values generated)

.         //Months dead from survey = Date of interview (v008) - date of death
. gen ydead_survey = mdead_survey/12
(34,434 missing values generated)

.         //Years dead from survey
. 
.         
. codebook b5, tab (10)   

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
b5                                                                                                                                                                           child is alive
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  B5

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/40,543

            tabulation:  Freq.   Numeric  Label
                         6,109         0  no
                        34,434         1  yes

. gen child_died = 1 if b5==0
(34,434 missing values generated)

.         //Redefine the coding and labels (1=child dead; 0=child alive)
. replace child_died = 0 if b5==1
(34,434 real changes made)

. replace child_died = . if b5==.
(0 real changes made)

. label define lab_died 1 "child has died" 0 "child is alive"

. label values child_died lab_died

. tab b5 child_died, miss

  child is |      child_died
     alive | child is   child has |     Total
-----------+----------------------+----------
        no |         0      6,109 |     6,109 
       yes |    34,434          0 |    34,434 
-----------+----------------------+----------
     Total |    34,434      6,109 |    40,543 

.         
. 
.         /*NOTE: For each woman, sum the number of children who died and compare to 
>         the number of sons/daughters whom they reported have died */
. bysort ind_id: egen tot_child_died = sum(child_died) 

. egen tot_child_died_2 = rsum(v206 v207)

.         //v206: sons who have died
.         //v207: daughters who have died
. compare tot_child_died tot_child_died_2

                                        ---------- difference ----------
                            count       minimum      average     maximum
------------------------------------------------------------------------
tot_chi~d=tot_chi~2         40543
                       ----------
jointly defined             40543             0            0           0
                       ----------
total                       40543

.         //In Sierra Leone DHS 2019, these figures are identical
.         
.                 
. replace child_died=0 if b7>=216 & b7<.
(123 real changes made)

. /* counting only deaths of children <18y (216 months) */
. 
. bysort ind_id: egen tot_child_died_5y=sum(child_died) if ydead_survey<=5
(39135 missing values generated)

.         /*For each woman, sum the number of children who died in the past 5 years 
>         prior to the interview date */
.         
. replace tot_child_died_5y=0 if tot_child_died_5y==. & tot_child_died>=0 & tot_child_died<.
(39,135 real changes made)

.         /*All children who are alive and died longer than 5 years from the interview 
>         date are replaced as '0'*/
.         
. replace tot_child_died_5y=. if child_died==1 & ydead_survey==.
(0 real changes made)

.         //Replace as '.' if there is no information on when the child died  
. 
. tab tot_child_died tot_child_died_5y, miss

tot_child_ |                   tot_child_died_5y
      died |         0          1          2          3          4 |     Total
-----------+-------------------------------------------------------+----------
         0 |    22,118          0          0          0          0 |    22,118 
         1 |     7,997        726          0          0          0 |     8,723 
         2 |     4,843        172        168          0          0 |     5,183 
         3 |     2,374         75         58         45          0 |     2,552 
         4 |     1,113         19         12         18          0 |     1,162 
         5 |       402         16          4          3          4 |       429 
         6 |       210          5          0          0          0 |       215 
         7 |        64          0          8          0          0 |        72 
         8 |        52          0          2          0          0 |        54 
         9 |        19          1          3          0          0 |        23 
        10 |        12          0          0          0          0 |        12 
-----------+-------------------------------------------------------+----------
     Total |    39,204      1,014        255         66          4 |    40,543 

. 
. bysort ind_id: egen child_died_per_wom = max(tot_child_died)

. lab var child_died_per_wom "Total child death for each women (birth recode)"

. 
. bysort ind_id: egen child_died_per_wom_5y = max(tot_child_died_5y)

. lab var child_died_per_wom_5y "Total child death for each women in the last 5 years (birth recode)"

. 
.         
. 
.         //Keep one observation per women
. bysort ind_id: gen id=1 if _n==1
(29,068 missing values generated)

. keep if id==1
(29,068 observations deleted)

. drop id

. 
. duplicates report ind_id 

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |        11475             0
--------------------------------------

. 
. gen women_BR = 1 

.         //Identification variable for observations in BR recode
. 
.         
.         //Retain relevant variables
. keep ind_id women_BR b16 child_died_per_wom child_died_per_wom_5y b7

.  
. order ind_id women_BR b16 child_died_per_wom child_died_per_wom_5y b7

. 
. sort ind_id

. 
.         //Save a temp file for merging with PR:
. save "$path_out/sle19_BR.dta", replace  
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/sle19_BR.dta not found)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/sle19_BR.dta saved

.         
.         
. ********************************************************************************
. *** Step 1.3  IR - WOMEN's RECODE  
. *** (All eligible females 15-49 years in the household)
. ********************************************************************************
. 
. use "$path_in/SLIR7AFL.dta", clear

. 
. 
. *** Generate individual unique key variable required for data merging
. *** v001=cluster number;  
. *** v002=household number; 
. *** v003=respondent's line number
. gen double ind_id = v001*1000000 + v002*100 + v003 

. format ind_id %20.0g

. label var ind_id "Individual ID"

. 
. duplicates report ind_id

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |        15574             0
--------------------------------------

. 
. gen women_IR=1 

.         //Identification variable for observations in IR recode
. 
. 
. keep ind_id women_IR v003 v005 v012 v201 v206 v207

.  
. order ind_id women_IR v003 v005 v012 v201 v206 v207

. 
.  
. sort ind_id

. 
.         //Save a temp file for merging with PR:
. save "$path_out/sle19_IR.dta", replace
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/sle19_IR.dta not found)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/sle19_IR.dta saved

. 
. 
. ********************************************************************************
. *** Step 1.4  IR - WOMEN'S RECODE  
. *** (Girls 15-19 years in the household)
. ********************************************************************************
. 
. use "$path_in/SLPR7AFL.dta", clear

. 
. *** Generate individual unique key variable required for data merging
. *** v001=cluster number;  
. *** v002=household number; 
. *** v003=respondent's line number
. gen double ind_id = hv001*1000000 + hv002*100 + hvidx 

. format ind_id %20.0g

. label var ind_id "Individual ID"

. 
. duplicates report ind_id        

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |        72248             0
--------------------------------------

. 
. keep if hv104==2 & hv105>=15 & hv105<=19 & hv042==1
(70,378 observations deleted)

. ***Variables required to calculate the z-scores to produce BMI-for-age:
. 
. *** Variable: SEX ***
. gen gender=2 

. 
. *** Variable: AGE IN MONTHS ***
. compare hv807c hv008

                                        ---------- difference ----------
                            count       minimum      average     maximum
------------------------------------------------------------------------
hv807c=hv008                 1782
hv807c>hv008                   88             1     1.318182           4
                       ----------
jointly defined              1870             0     .0620321           4
                       ----------
total                        1870

. /* date of biomarker vs date of interview, they should be identical */
. 
. gen age_month=hv807c-ha32

. lab var age_month "Age in months, individuals 15-19 years"      

. 
.         
. *** Variable: AGE UNIT ***
. gen str6 ageunit = "months" 

. lab var ageunit "Months"

. 
.                 
. *** Variable: BODY WEIGHT (KILOGRAMS) ***
. codebook ha2, tab (999)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
ha2                                                                                                                                                 woman's weight in kilograms (1 decimal)
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HA2, but 368 nonmissing values are not labeled

                 range:  [278,9996]                   units:  1
         unique values:  371                      missing .:  0/1,870

            tabulation:  Freq.   Numeric  Label
                             1       278  
                             1       302  
                             1       314  
                             1       318  
                             1       327  
                             1       330  
                             1       342  
                             1       344  
                             1       345  
                             1       349  
                             1       353  
                             1       356  
                             1       358  
                             1       361  
                             1       370  
                             2       371  
                             1       375  
                             1       376  
                             1       379  
                             1       381  
                             1       384  
                             1       386  
                             1       387  
                             1       389  
                             3       390  
                             1       391  
                             1       393  
                             2       395  
                             1       396  
                             2       397  
                             2       398  
                             1       399  
                             1       400  
                             4       401  
                             2       402  
                             3       403  
                             4       404  
                             3       406  
                             1       407  
                             2       408  
                             2       409  
                             4       410  
                             3       411  
                             6       412  
                             5       413  
                             3       414  
                             3       415  
                             3       416  
                             3       417  
                             1       418  
                             1       419  
                             6       420  
                             6       421  
                             2       422  
                             3       423  
                             5       424  
                             2       425  
                             5       426  
                             2       427  
                             5       428  
                             3       429  
                             4       430  
                             6       431  
                             2       432  
                             5       433  
                             8       434  
                             6       435  
                             3       436  
                             2       437  
                             9       438  
                             6       439  
                             5       440  
                             7       441  
                             3       442  
                             2       443  
                             5       444  
                             4       445  
                             2       446  
                             4       447  
                             7       448  
                             6       449  
                            12       450  
                             9       451  
                            12       452  
                             7       453  
                            10       454  
                             6       455  
                            13       456  
                             2       457  
                             8       458  
                             6       459  
                             8       460  
                            11       461  
                            11       462  
                             6       463  
                            10       464  
                            10       465  
                            15       466  
                             8       467  
                             5       468  
                             6       469  
                             5       470  
                             5       471  
                             7       472  
                             5       473  
                            10       474  
                             4       475  
                             8       476  
                             3       477  
                             7       478  
                             3       479  
                            13       480  
                             7       481  
                            11       482  
                             7       483  
                            12       484  
                            13       485  
                            10       486  
                             9       487  
                            11       488  
                            13       489  
                            12       490  
                             6       491  
                            12       492  
                             8       493  
                            10       494  
                             7       495  
                            12       496  
                            12       497  
                             5       498  
                             7       499  
                            16       500  
                             7       501  
                            13       502  
                            10       503  
                             3       504  
                            10       505  
                             8       506  
                            10       507  
                            10       508  
                            10       509  
                            12       510  
                             9       511  
                            10       512  
                            11       513  
                             9       514  
                            13       515  
                             9       516  
                             8       517  
                            11       518  
                             7       519  
                             9       520  
                             8       521  
                             7       522  
                             5       523  
                             4       524  
                            10       525  
                             9       526  
                             4       527  
                             5       528  
                             7       529  
                             6       530  
                             6       531  
                             7       532  
                             5       533  
                            18       534  
                             9       535  
                             6       536  
                            14       537  
                             9       538  
                             2       539  
                             9       540  
                            14       541  
                             8       542  
                            11       543  
                             3       544  
                            10       545  
                            12       546  
                            14       547  
                             3       548  
                             8       549  
                             6       550  
                            10       551  
                             5       552  
                             3       553  
                             8       554  
                            13       555  
                             4       556  
                             6       557  
                             6       558  
                             6       559  
                             7       560  
                             9       561  
                             6       562  
                             8       563  
                            12       564  
                             4       565  
                             4       566  
                             8       567  
                             1       568  
                             1       569  
                             3       570  
                             6       571  
                             6       572  
                             5       573  
                             5       574  
                             6       575  
                             3       576  
                             6       577  
                             5       578  
                             4       579  
                             4       580  
                             5       581  
                             4       582  
                             5       583  
                             2       584  
                             4       585  
                             5       586  
                             5       587  
                             6       588  
                             2       589  
                             9       590  
                             3       591  
                             5       592  
                             7       593  
                             4       594  
                             5       595  
                             5       596  
                             1       597  
                             5       598  
                             3       599  
                             3       600  
                             7       601  
                             4       602  
                             3       603  
                             6       604  
                             3       605  
                             3       606  
                             3       607  
                             3       608  
                             4       609  
                             5       610  
                             5       611  
                             5       612  
                             3       613  
                             6       614  
                             4       615  
                             2       617  
                             3       618  
                             2       619  
                             6       620  
                             6       621  
                             4       623  
                             3       624  
                             5       625  
                             1       626  
                             3       627  
                             5       628  
                             2       629  
                             2       630  
                             4       632  
                             2       633  
                             3       634  
                             2       635  
                             3       636  
                             3       637  
                             1       638  
                             1       639  
                             1       641  
                             4       643  
                             2       645  
                             2       646  
                             4       647  
                             2       648  
                             1       649  
                             2       650  
                             4       651  
                             5       652  
                             2       653  
                             2       655  
                             3       656  
                             2       657  
                             4       658  
                             2       660  
                             3       661  
                             2       662  
                             1       663  
                             3       664  
                             1       666  
                             6       667  
                             2       668  
                             2       669  
                             1       671  
                             1       672  
                             1       673  
                             2       674  
                             1       675  
                             2       676  
                             1       680  
                             1       681  
                             1       682  
                             1       683  
                             1       684  
                             1       685  
                             1       686  
                             4       687  
                             1       688  
                             1       689  
                             1       690  
                             1       692  
                             2       693  
                             4       694  
                             1       696  
                             1       699  
                             3       700  
                             1       701  
                             2       702  
                             1       703  
                             2       704  
                             1       705  
                             1       706  
                             2       708  
                             1       710  
                             2       711  
                             2       712  
                             2       714  
                             1       717  
                             1       718  
                             1       721  
                             3       723  
                             1       728  
                             1       737  
                             1       738  
                             1       742  
                             2       749  
                             1       750  
                             1       751  
                             2       753  
                             1       754  
                             1       755  
                             1       756  
                             1       757  
                             1       760  
                             1       762  
                             1       763  
                             1       764  
                             1       766  
                             1       769  
                             1       770  
                             1       773  
                             1       778  
                             2       780  
                             1       788  
                             1       790  
                             1       798  
                             1       802  
                             1       832  
                             1       836  
                             1       851  
                             1       857  
                             1       860  
                             1       868  
                             1       899  
                             2       907  
                             1       932  
                             1      1051  
                             1      1431  
                             1      1471  
                            85      9994  not present
                           131      9995  refused
                             4      9996  other

. gen weight = ha2/10

.         //We divide it by 10 in order to express it in kilograms
. replace weight = . if ha2>=9990 
(220 real changes made, 220 to missing)

.         //All missing values or out of range are replaced as "."
. summ weight

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      weight |      1,650    53.02206    9.012155       27.8      147.1

. 
. 
. *** Variable: HEIGHT (CENTIMETERS)
. codebook ha3, tab (999)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
ha3                                                                                                                                               woman's height in centimeters (1 decimal)
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HA3, but 288 nonmissing values are not labeled

                 range:  [1136,9996]                  units:  1
         unique values:  291                      missing .:  0/1,870

            tabulation:  Freq.   Numeric  Label
                             1      1136  
                             1      1150  
                             1      1153  
                             1      1160  
                             1      1163  
                             1      1204  
                             1      1213  
                             1      1221  
                             1      1266  
                             1      1343  
                             1      1350  
                             1      1360  
                             1      1386  
                             1      1387  
                             1      1388  
                             1      1389  
                             1      1396  
                             1      1402  
                             1      1404  
                             1      1415  
                             2      1422  
                             1      1423  
                             2      1425  
                             1      1426  
                             2      1431  
                             2      1432  
                             2      1433  
                             1      1441  
                             1      1443  
                             1      1444  
                             1      1445  
                             1      1447  
                             4      1450  
                             2      1451  
                             2      1452  
                             4      1453  
                             1      1454  
                             2      1455  
                             3      1456  
                             1      1457  
                             1      1459  
                             3      1460  
                             3      1461  
                             4      1462  
                             2      1463  
                             3      1464  
                             1      1465  
                             2      1466  
                             1      1467  
                             1      1469  
                             3      1470  
                             3      1471  
                             5      1472  
                             3      1474  
                             6      1475  
                             4      1476  
                             1      1477  
                             5      1478  
                             1      1479  
                             1      1480  
                             2      1481  
                             9      1482  
                            10      1483  
                             5      1484  
                             5      1485  
                             3      1486  
                             1      1487  
                             1      1488  
                             1      1489  
                             6      1490  
                             5      1491  
                             7      1492  
                             5      1493  
                             3      1494  
                            11      1495  
                             6      1496  
                             1      1497  
                             1      1498  
                             5      1499  
                            12      1500  
                             6      1501  
                            12      1502  
                             9      1503  
                             4      1504  
                            12      1505  
                             3      1506  
                             2      1507  
                             6      1508  
                             1      1509  
                            12      1510  
                             6      1511  
                            11      1512  
                             8      1513  
                             2      1514  
                             7      1515  
                             7      1516  
                             9      1517  
                             4      1518  
                             6      1519  
                            10      1520  
                            11      1521  
                             7      1522  
                            14      1523  
                             8      1524  
                             9      1525  
                             6      1526  
                             6      1527  
                             7      1528  
                             3      1529  
                            15      1530  
                            12      1531  
                             6      1532  
                            10      1533  
                            11      1534  
                            14      1535  
                            16      1536  
                            10      1537  
                             5      1538  
                             5      1539  
                            15      1540  
                             7      1541  
                            11      1542  
                            13      1543  
                             9      1544  
                            25      1545  
                            11      1546  
                             5      1547  
                             7      1548  
                             1      1549  
                            12      1550  
                            12      1551  
                            15      1552  
                            12      1553  
                            11      1554  
                            19      1555  
                            11      1556  
                             6      1557  
                            12      1558  
                             5      1559  
                            25      1560  
                            17      1561  
                            17      1562  
                            12      1563  
                            10      1564  
                            10      1565  
                            10      1566  
                             9      1567  
                             9      1568  
                             2      1569  
                            28      1570  
                             7      1571  
                            12      1572  
                            18      1573  
                            20      1574  
                            16      1575  
                             6      1576  
                             6      1577  
                             7      1578  
                            10      1579  
                            19      1580  
                             7      1581  
                            14      1582  
                            18      1583  
                            11      1584  
                            14      1585  
                             3      1586  
                             8      1587  
                             4      1588  
                             5      1589  
                            15      1590  
                            10      1591  
                             8      1592  
                             7      1593  
                            13      1594  
                            14      1595  
                             5      1596  
                             4      1597  
                             5      1598  
                             2      1599  
                            18      1600  
                             5      1601  
                             2      1602  
                            11      1603  
                             8      1604  
                            18      1605  
                             2      1606  
                             8      1607  
                             3      1608  
                             4      1609  
                             8      1610  
                             6      1611  
                             3      1612  
                            10      1613  
                             8      1614  
                            16      1615  
                             4      1616  
                             4      1617  
                             6      1618  
                             4      1619  
                             8      1620  
                            13      1621  
                             5      1622  
                            10      1623  
                             9      1624  
                            16      1625  
                             2      1626  
                             4      1627  
                             3      1628  
                             1      1629  
                            17      1630  
                             8      1631  
                             9      1632  
                             6      1633  
                             3      1634  
                             6      1635  
                             3      1636  
                             3      1637  
                             3      1638  
                             4      1640  
                             6      1641  
                             5      1642  
                             7      1643  
                             1      1644  
                            11      1645  
                             5      1646  
                             1      1647  
                             2      1648  
                             1      1649  
                            10      1650  
                             4      1651  
                             5      1652  
                             6      1653  
                             3      1655  
                             1      1656  
                             1      1657  
                             3      1658  
                             3      1659  
                            12      1660  
                             1      1661  
                             6      1663  
                             2      1664  
                             1      1665  
                             1      1666  
                             3      1667  
                             5      1668  
                             1      1669  
                             5      1670  
                             2      1671  
                             5      1672  
                             1      1673  
                             4      1674  
                             3      1675  
                             1      1676  
                             1      1677  
                             3      1678  
                             2      1679  
                             3      1680  
                             3      1681  
                             4      1682  
                             1      1683  
                             6      1685  
                             3      1686  
                             1      1687  
                             2      1688  
                             1      1689  
                             2      1690  
                             1      1691  
                             3      1692  
                             3      1695  
                             1      1698  
                             2      1700  
                             2      1701  
                             1      1702  
                             3      1703  
                             1      1706  
                             1      1710  
                             1      1712  
                             1      1713  
                             1      1715  
                             1      1716  
                             1      1718  
                             2      1720  
                             1      1722  
                             2      1724  
                             1      1725  
                             2      1732  
                             1      1742  
                             1      1760  
                            84      9994  not present
                           132      9995  refused
                             4      9996  other

. gen     height = ha3/10 

.         //We divide it by 10 in order to express it in centimeters
. replace height = . if ha3>=9990 
(220 real changes made, 220 to missing)

.         //All missing values or out of range are replaced as "."
. summ height

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      height |      1,650    156.5611    6.564196      113.6        176

. 
. 
. *** Variable: OEDEMA
. lookfor oedema

. gen oedema = "n"  

. tab oedema      

     oedema |      Freq.     Percent        Cum.
------------+-----------------------------------
          n |      1,870      100.00      100.00
------------+-----------------------------------
      Total |      1,870      100.00

. 
. 
. 
. *** Variable: SAMPLING WEIGHT ***
. gen  sw = hv005/1000000 

.         //For DHS sample weight has to be divided 1000000*
. summ sw         

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
          sw |      1,870    .9924466    .5395847    .161761   7.254974

.         
. *** Next, indicate to STATA where the igrowup_restricted.ado file is stored:    
. adopath + "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"
  [1]  (BASE)      "C:\Program Files (x86)\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files (x86)\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\Stata configuration\Stata15\ado\personal/"
  [5]  (PLUS)      "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\Stata configuration\Stata15\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_child"
  [8]              "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"

. 
. 
. /* We use 'reflib' to specify the package directory where the .dta files 
> containing the WHO Growth reference are stored. Note that we use strX to specity 
> the length of the path in string. */            
. gen str150 reflib="C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"

. lab var reflib "Directory of reference tables"

. 
. 
. /* We use datalib to specify the working directory where the input STATA data
> set containing the anthropometric measurement is stored. */
. gen str150 datalib = "$path_out" 

. lab var datalib "Directory for datafiles"

. 
. 
. /* We use datalab to specify the name that will prefix the output files that 
> will be produced from using this ado file*/
. gen str30 datalab = "girl_nutri_SierraLeone" 

. lab var datalab "Working file"

.         
. 
. 
. /*We now run the command to calculate the z-scores with the adofile */
. who2007 reflib datalib datalab gender age_month ageunit weight height oedema sw

Please wait, programme is running.............

..............................................
Note: z-scores are flagged according to the following rules:
 
                            _zhfa = . if (_zhfa < -6 or _zhfa >6)
                            _zwfa = . if (_zwfa < -6 or _zwfa >5)
                            _zbfa = . if (_zbfa < -5 or _zbfa >5)
                            
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\girl_nutri_SierraLeone_z.dta not found)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\girl_nutri_SierraLeone_z.dta saved
Note 1:     Original data plus z-scores are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\girl_nutri_SierraLeone_z.dta
                            
                            
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\girl_nutri_SierraLeone_z.xls not found)
Note 2:     Original data plus z-scores are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\girl_nutri_SierraLeone_z.xls
                            

Please wait, programme is calculating prevalences.............

..............................................

Set 1:            Sexes combined

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    1283      .9      .3     1.4    10.3     8.6      12       2     1.2     2.8       0       0       0       0       0       0    -.91      .9
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15     373     1.5      .1     2.9    11.1     7.8    14.4     1.3       0     2.6       0       0      .1       0       0      .1    -.98      .9
   16     298       1       0     2.2      10     6.4    13.5     2.1      .3     3.9       0       0      .2       0       0      .2    -.88     .89
   17     276      .3       0     1.1     9.2     5.6    12.8     2.5      .5     4.5       0       0      .2       0       0      .2    -.94     .87
   18     317      .6       0     1.7      11     7.4    14.6     1.5       0       3       0       0      .2       0       0      .2    -.85     .93
   19      19       0       0     2.6     5.1       0    17.6    14.8       0    33.5       0       0     2.6       0       0     2.6    -.26    1.19

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    1284      .1       0      .3       1      .4     1.6    13.2    11.4    15.1     2.1     1.3     2.9      .1       0      .4     .05      .9
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15     371       0       0      .1     1.2       0     2.5     8.5     5.5    11.5     1.4      .1     2.7       0       0      .1    -.07     .84
   16     299      .4       0     1.2       1       0     2.3    14.1      10    18.3     2.2      .4     4.1      .4       0     1.2     .05     .93
   17     278       0       0      .2      .1       0      .7    17.6      13    22.3     1.8      .1     3.6       0       0      .2     .17     .88
   18     317       0       0      .2     1.4       0     2.8    14.7    10.7    18.8     3.2     1.1     5.3      .2       0      .8      .1     .92
   19      19       0       0     2.6     2.9       0      13     3.5       0    14.3       0       0     2.6       0       0     2.6    -.43      .9

Set 2:            Males

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Set 3:            Females

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    1283      .9      .3     1.4    10.3     8.6      12       2     1.2     2.8       0       0       0       0       0       0    -.91      .9
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15     373     1.5      .1     2.9    11.1     7.8    14.4     1.3       0     2.6       0       0      .1       0       0      .1    -.98      .9
   16     298       1       0     2.2      10     6.4    13.5     2.1      .3     3.9       0       0      .2       0       0      .2    -.88     .89
   17     276      .3       0     1.1     9.2     5.6    12.8     2.5      .5     4.5       0       0      .2       0       0      .2    -.94     .87
   18     317      .6       0     1.7      11     7.4    14.6     1.5       0       3       0       0      .2       0       0      .2    -.85     .93
   19      19       0       0     2.6     5.1       0    17.6    14.8       0    33.5       0       0     2.6       0       0     2.6    -.26    1.19

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    1284      .1       0      .3       1      .4     1.6    13.2    11.4    15.1     2.1     1.3     2.9      .1       0      .4     .05      .9
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15     371       0       0      .1     1.2       0     2.5     8.5     5.5    11.5     1.4      .1     2.7       0       0      .1    -.07     .84
   16     299      .4       0     1.2       1       0     2.3    14.1      10    18.3     2.2      .4     4.1      .4       0     1.2     .05     .93
   17     278       0       0      .2      .1       0      .7    17.6      13    22.3     1.8      .1     3.6       0       0      .2     .17     .88
   18     317       0       0      .2     1.4       0     2.8    14.7    10.7    18.8     3.2     1.1     5.3      .2       0      .8      .1     .92
   19      19       0       0     2.6     2.9       0      13     3.5       0    14.3       0       0     2.6       0       0     2.6    -.43      .9
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\girl_nutri_SierraLeone_prev.xls not found)
 
Note:       Prevalences are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\girl_nutri_SierraLeone_prev.xls

. 
. 
. /*We now turn to using the dta file that was created and that contains 
> the calculated z-scores to compute BMI-for-age*/
. use "$path_out/girl_nutri_SierraLeone_z.dta", clear

. 
.                 
. gen     z_bmi = _zbfa
(575 missing values generated)

. replace z_bmi = . if _fbfa==1 
(2 real changes made, 2 to missing)

. lab var z_bmi "z-score bmi-for-age WHO"

. 
. 
. gen     low_bmiage = (z_bmi < -2.0) 

.         /*Takes value 1 if BMI-for-age is under 2 stdev below the median & 0 
>         otherwise */
. replace low_bmiage = . if z_bmi==.
(577 real changes made, 577 to missing)

. lab var low_bmiage "Teenage low bmi 2sd - WHO"

. 
. 
. gen teen_IR=1 

.         //Identification variable for observations in IR recode (only 15-19 years)      
. 
. 
.         //Retain relevant variables:    
. keep ind_id teen_IR age_month low_bmiage

.  
. order ind_id teen_IR age_month low_bmiage

.  
. sort ind_id

. 
. 
.         //Erase files from folder:
. erase "$path_out/girl_nutri_SierraLeone_z.xls"

. erase "$path_out/girl_nutri_SierraLeone_prev.xls"

. erase "$path_out/girl_nutri_SierraLeone_z.dta"

. 
. 
.         //Save a temp file for merging with PR:
. save "$path_out/sle19_IR_girls.dta", replace
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/sle19_IR_girls.dta not found)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/sle19_IR_girls.dta saved

. 
. 
. ********************************************************************************
. *** Step 1.5  MR - MEN'S RECODE  
. ***(All eligible man: 15-59 years in the household) 
. ********************************************************************************
. 
. use "$path_in/SLMR7AFL.dta", clear 

. 
. 
. *** Generate individual unique key variable required for data merging
.         *** mv001=cluster number; 
.         *** mv002=household number;
.         *** mv003=respondent's line number
. gen double ind_id = mv001*1000000 + mv002*100 + mv003   

. format ind_id %20.0g

. label var ind_id "Individual ID"

. 
. duplicates report ind_id

Duplicates in terms of ind_id

--------------------------------------
   copies | observations       surplus
----------+---------------------------
        1 |         7197             0
--------------------------------------

. 
. gen men_MR=1    

.         //Identification variable for observations in MR recode
. 
. 
. keep ind_id men_MR mv003 mv005 mv012 mv201 mv206 mv207

. 
. order ind_id men_MR mv003 mv005 mv012 mv201 mv206 mv207 

. 
. sort ind_id

. 
.         //Save a temp file for merging with PR:
. save "$path_out/sle19_MR.dta", replace
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/sle19_MR.dta not found)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/sle19_MR.dta saved

. 
. 
. ********************************************************************************
. *** Step 1.6a  MR - MEN'S RECODE  
. ***(Boys 15-19 years in the household) 
. ********************************************************************************
. /* Note: In the case of Sierra Leone 2019, anthropometric data was not collected 
> for men. */
. 
. use "$path_in/SLPR7AFL.DTA", clear 

. 
.         
. *** Generate individual unique key variable required for data merging
. *** v001=cluster number;  
. *** v002=household number; 
. *** v003=respondent's line number
. gen double ind_id = hv001*1000000 + hv002*100 + hvidx 

. format ind_id %20.0g

. label var ind_id "Individual ID"

. codebook ind_id 

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
ind_id                                                                                                                                                                        Individual ID
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1000301,5.780e+08]          units:  1
         unique values:  72,248                   missing .:  0/72,248

                  mean:   2.9e+08
              std. dev:   1.7e+08

           percentiles:        10%       25%       50%       75%       90%
                           5.6e+07   1.4e+08   2.9e+08   4.3e+08   5.2e+08

. 
. count if hv104==1 & hv105>=15 & hv105<=19 & hv027==1
  1,676

.         //Total number of men 15-19 years in the PR recode      
. keep if hv104==1 & hv105>=15 & hv105<=19 & hv027==1
(70,572 observations deleted)

.         //Keep only men between the age 15-19 years to merge with the MR recode 
.         
. count if hb2!=. 
  1,676

.         //hb2: man's weight in kilograms
. count if hb3!=.
  1,676

.         //hb3: man's height in centimeters
.         
. codebook hb13, tab (10)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hb13                                                                                                                                                  result of measurement - height/weight
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HB13

                 range:  [0,6]                        units:  1
         unique values:  4                        missing .:  0/1,676

            tabulation:  Freq.   Numeric  Label
                         1,442         0  measured
                           104         3  not present
                           128         4  refused
                             2         6  other

.         //hb13: result of measurement - height/weight
.         
. gen teen_MR_temp = 1    

.         
. keep ind_id teen_MR_temp hb2 hb3 hb13 hb40 hv104 hv105 hb32 hv008 hv005 hv807c

.         //Retain the height and weight variables
. 
. sort ind_id

. 
. 
. ***Variables required to calculate the z-scores to produce BMI-for-age:
. 
. *** Variable: SEX ***
. gen gender=1 

.         /*Assign all observations as "1" for male, as the file contains all 
>         men, 15-19*/
.         
. compare hv807c hv008

                                        ---------- difference ----------
                            count       minimum      average     maximum
------------------------------------------------------------------------
hv807c=hv008                 1586
hv807c>hv008                   90             1          1.1           4
                       ----------
jointly defined              1676             0     .0590692           4
                       ----------
total                        1676

. /* date of biomarker vs date of interview, they should be identical */
. 
. gen age_month=hv807c-hb32

. *gen age_month = hv008-hb32
. /* this is a more accurate way to calculate age in months using information from the PR file,
> the same file from which we extract weight and height info */
. 
. *** Variable: AGE UNIT ***
. gen str6 ageunit = "months" 

. lab var ageunit "Months"

. 
. 
. /* some men under 20 years were in the PR file but not in the MR file, we need to
> construct the age in months for these men since they do not have info in variables mv from MR file */
. 
. *** Variable: BODY WEIGHT (KILOGRAMS) ***
.         /*In the case of India DHS 2015-16, the usual mv437 variable (body weight) 
>         does not exist in the MR file. Hence we use the hb2 (man's weight in 
>         kilograms) variable that were extracted from the PR file. */
. 
. codebook hb2, tab (9999)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hb2                                                                                                                                                   man's weight in kilograms (1 decimal)
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HB2, but 347 nonmissing values are not labeled

                 range:  [255,9996]                   units:  1
         unique values:  350                      missing .:  0/1,676

            tabulation:  Freq.   Numeric  Label
                             1       255  
                             1       256  
                             1       263  
                             1       270  
                             1       289  
                             1       302  
                             2       306  
                             1       317  
                             1       323  
                             2       325  
                             1       330  
                             1       336  
                             1       343  
                             1       344  
                             1       363  
                             1       365  
                             2       376  
                             1       383  
                             2       384  
                             1       390  
                             2       392  
                             1       394  
                             1       397  
                             3       400  
                             4       401  
                             1       402  
                             4       403  
                             2       404  
                            12       405  
                             5       406  
                             4       407  
                             3       408  
                             2       409  
                             6       410  
                             2       411  
                             2       412  
                             4       413  
                             2       414  
                             3       415  
                             3       416  
                             2       417  
                             3       418  
                             1       419  
                             3       420  
                             1       421  
                             1       422  
                             3       423  
                             2       424  
                             4       425  
                             1       426  
                             2       427  
                             1       428  
                             3       429  
                             6       430  
                             3       431  
                             2       432  
                             6       433  
                             1       434  
                             3       435  
                             2       436  
                             2       439  
                             2       441  
                             7       442  
                             2       443  
                             1       444  
                             5       445  
                             1       446  
                             2       447  
                             5       448  
                             2       449  
                             6       450  
                             3       451  
                             5       452  
                             9       453  
                             5       454  
                            11       455  
                             7       456  
                             5       457  
                             4       458  
                             5       459  
                             1       460  
                             7       461  
                             1       462  
                             9       463  
                             1       464  
                             6       465  
                             3       466  
                             6       467  
                             3       468  
                             2       469  
                             4       470  
                             6       471  
                             6       472  
                             4       473  
                             5       474  
                             4       475  
                             5       476  
                             5       477  
                             3       478  
                             1       479  
                             7       480  
                             3       481  
                             8       482  
                             9       483  
                             8       484  
                             4       485  
                            12       486  
                             6       487  
                             7       488  
                             4       489  
                             5       490  
                             5       491  
                             7       492  
                             9       493  
                             8       494  
                             8       495  
                             7       496  
                             8       497  
                             5       498  
                             7       499  
                             6       500  
                            10       501  
                            10       502  
                             7       503  
                             5       504  
                             5       505  
                             8       506  
                             6       507  
                             7       508  
                             6       509  
                             7       510  
                             6       511  
                             6       512  
                             4       513  
                             6       514  
                             4       515  
                             5       516  
                             5       517  
                             5       518  
                             4       519  
                             6       520  
                             9       521  
                             7       522  
                             7       523  
                             5       524  
                             7       525  
                             5       526  
                             5       527  
                             4       528  
                             5       529  
                             5       530  
                             6       531  
                             6       532  
                             1       533  
                            15       534  
                             8       535  
                            10       536  
                             5       537  
                             9       538  
                             6       539  
                             8       540  
                            12       541  
                            13       542  
                            12       543  
                             4       544  
                             7       545  
                             9       546  
                             4       547  
                            11       548  
                             4       549  
                            10       550  
                            11       551  
                            13       552  
                             6       553  
                            10       554  
                             6       555  
                             1       556  
                             6       557  
                             7       558  
                             4       559  
                             6       560  
                             8       561  
                             8       562  
                             6       563  
                            11       564  
                             6       565  
                             7       566  
                             6       567  
                             6       568  
                            10       569  
                            12       570  
                            15       571  
                             8       572  
                             5       573  
                             5       574  
                             6       575  
                             4       576  
                             4       577  
                             6       578  
                             3       579  
                             4       580  
                             8       581  
                             9       582  
                            12       583  
                             7       584  
                             5       585  
                             5       586  
                             6       587  
                             8       588  
                             5       589  
                             6       590  
                            10       591  
                             2       592  
                             2       593  
                             8       594  
                             9       595  
                            11       596  
                             3       597  
                             3       598  
                             4       599  
                             9       600  
                             5       601  
                             9       602  
                             9       603  
                             2       604  
                             2       605  
                             3       606  
                             7       607  
                             5       608  
                             4       609  
                             5       610  
                             1       611  
                             6       612  
                             5       613  
                             9       614  
                             1       615  
                             3       616  
                             2       617  
                             2       618  
                             4       619  
                             7       620  
                             9       621  
                             4       622  
                             4       623  
                             8       624  
                             6       625  
                             2       626  
                             2       627  
                             2       628  
                             5       629  
                             7       630  
                             4       631  
                             3       632  
                             3       633  
                             3       634  
                             1       636  
                             2       637  
                             1       638  
                             2       639  
                             2       640  
                             3       641  
                             2       642  
                             1       643  
                             2       644  
                             3       645  
                             2       646  
                             3       647  
                             2       648  
                             2       649  
                             3       650  
                             2       651  
                             2       652  
                             2       653  
                             3       654  
                             2       655  
                             1       656  
                             1       657  
                             1       658  
                             1       659  
                             4       660  
                             3       661  
                             3       663  
                             1       664  
                             2       665  
                             1       666  
                             1       667  
                             2       669  
                             2       671  
                             1       673  
                             1       674  
                             1       675  
                             1       677  
                             3       679  
                             3       681  
                             3       682  
                             1       683  
                             1       684  
                             1       685  
                             1       686  
                             2       687  
                             1       690  
                             6       691  
                             2       692  
                             1       693  
                             1       694  
                             1       695  
                             4       700  
                             1       703  
                             3       704  
                             4       705  
                             1       706  
                             1       707  
                             2       708  
                             2       709  
                             1       715  
                             2       716  
                             3       718  
                             1       719  
                             1       721  
                             1       723  
                             1       725  
                             1       726  
                             1       729  
                             2       730  
                             1       737  
                             1       739  
                             1       740  
                             1       741  
                             1       742  
                             1       743  
                             1       744  
                             1       745  
                             1       750  
                             1       754  
                             1       755  
                             1       761  
                             1       762  
                             1       768  
                             1       779  
                             1       786  
                             2       802  
                             1       805  
                             1       828  
                             1       861  
                             1       906  
                             1      1412  
                             1      1619  
                           104      9994  not present
                           128      9995  refused
                             2      9996  other

. gen weight = hb2/10

.         //We divide it by 10 in order to express it in kilograms 
. replace weight = . if hb2>=9990 
(234 real changes made, 234 to missing)

.         //All missing values or out of range are replaced as "."
. summ weight

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      weight |      1,442    54.20992    8.940214       25.5      161.9

. 
. 
. *** Variable: HEIGHT (CENTIMETERS)
.         /*In the case of India DHS 2015-16, the usual mv438 variable (height) 
>         does not exist in the MR file. Hence we use the hb3 (man's height in 
>         centimeters) variable that were extracted from the PR file. */
.         
. codebook hb3, tab (9999)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hb3                                                                                                                                                 man's height in centimeters (1 decimal)
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HB3, but 346 nonmissing values are not labeled

                 range:  [1166,9996]                  units:  1
         unique values:  349                      missing .:  0/1,676

            tabulation:  Freq.   Numeric  Label
                             1      1166  
                             1      1169  
                             1      1210  
                             1      1238  
                             1      1282  
                             1      1287  
                             1      1336  
                             2      1344  
                             1      1347  
                             1      1374  
                             1      1376  
                             1      1377  
                             1      1384  
                             1      1392  
                             1      1393  
                             1      1394  
                             1      1395  
                             1      1396  
                             1      1401  
                             1      1403  
                             1      1405  
                             1      1407  
                             2      1412  
                             1      1417  
                             1      1431  
                             1      1433  
                             1      1437  
                             1      1439  
                             1      1440  
                             1      1441  
                             1      1444  
                             2      1450  
                             1      1451  
                             1      1453  
                             1      1455  
                             1      1460  
                             2      1461  
                             1      1463  
                             1      1465  
                             1      1466  
                             1      1471  
                             2      1472  
                             1      1473  
                             1      1474  
                             4      1475  
                             2      1477  
                             1      1481  
                             2      1483  
                             2      1484  
                             1      1485  
                             3      1487  
                             1      1488  
                             2      1489  
                             3      1490  
                             3      1492  
                             3      1493  
                             2      1494  
                             2      1496  
                             1      1497  
                             1      1498  
                             7      1500  
                             2      1501  
                             2      1502  
                             4      1503  
                             6      1504  
                             4      1505  
                             3      1506  
                             2      1507  
                             4      1509  
                             3      1510  
                             4      1512  
                             3      1513  
                             2      1514  
                             2      1515  
                             2      1516  
                             2      1518  
                             1      1519  
                             4      1520  
                             5      1521  
                             4      1522  
                             4      1523  
                             3      1524  
                             3      1525  
                             1      1526  
                             3      1527  
                             3      1528  
                             3      1530  
                             6      1531  
                             7      1532  
                             5      1533  
                             5      1534  
                             5      1535  
                             1      1536  
                             2      1537  
                             3      1538  
                             1      1539  
                             1      1540  
                             1      1541  
                             4      1542  
                             6      1543  
                             3      1544  
                             6      1545  
                             6      1546  
                             1      1548  
                            12      1550  
                             3      1551  
                             7      1552  
                             5      1553  
                             6      1554  
                             7      1555  
                             2      1556  
                             2      1557  
                             6      1558  
                             4      1559  
                             8      1560  
                             7      1561  
                             7      1562  
                             5      1563  
                             6      1564  
                             6      1565  
                             5      1566  
                             3      1567  
                             6      1568  
                             6      1570  
                             1      1571  
                             2      1572  
                            12      1573  
                             5      1574  
                             2      1575  
                             5      1576  
                             3      1577  
                             3      1578  
                             2      1579  
                             9      1580  
                             4      1581  
                             4      1582  
                            14      1583  
                             5      1584  
                             5      1585  
                            10      1586  
                             9      1587  
                             1      1588  
                             3      1589  
                            11      1590  
                             3      1591  
                             9      1592  
                             4      1593  
                            11      1594  
                            12      1595  
                             5      1596  
                             7      1597  
                             3      1598  
                             3      1599  
                            12      1600  
                             5      1601  
                             5      1602  
                             8      1603  
                             2      1604  
                            18      1605  
                             2      1606  
                             4      1607  
                             6      1608  
                             4      1609  
                             8      1610  
                             5      1611  
                             2      1612  
                             8      1613  
                             2      1614  
                             7      1615  
                             2      1616  
                             5      1617  
                             8      1618  
                             4      1619  
                             4      1620  
                             7      1621  
                             8      1622  
                            14      1623  
                             5      1624  
                            14      1625  
                             6      1626  
                            12      1627  
                             3      1629  
                            16      1630  
                             4      1631  
                             8      1632  
                            11      1633  
                             8      1634  
                            12      1635  
                             6      1636  
                             5      1637  
                             4      1638  
                             2      1639  
                             7      1640  
                             6      1641  
                             8      1642  
                             6      1643  
                             6      1644  
                            11      1645  
                             3      1646  
                             6      1647  
                             3      1648  
                             3      1649  
                             8      1650  
                            10      1651  
                             7      1652  
                             8      1653  
                             6      1654  
                             8      1655  
                             4      1656  
                             5      1657  
                             2      1658  
                             4      1659  
                            12      1660  
                             7      1661  
                            12      1662  
                             6      1663  
                             7      1664  
                             6      1665  
                             4      1666  
                             7      1667  
                             6      1668  
                             3      1669  
                            12      1670  
                             4      1671  
                             9      1672  
                             6      1673  
                             7      1674  
                             7      1675  
                             4      1676  
                            10      1677  
                             1      1678  
                            12      1680  
                             4      1681  
                            10      1682  
                            12      1683  
                             4      1684  
                             7      1685  
                             3      1686  
                             5      1687  
                             4      1688  
                             3      1689  
                             4      1690  
                             5      1691  
                             7      1692  
                            12      1693  
                             5      1694  
                             8      1695  
                             6      1696  
                             3      1697  
                             6      1698  
                             4      1699  
                             9      1700  
                             6      1701  
                             2      1702  
                             5      1703  
                             8      1704  
                             9      1705  
                             3      1706  
                             5      1707  
                             4      1708  
                             1      1709  
                             6      1710  
                             7      1711  
                             3      1712  
                             6      1713  
                             3      1714  
                             6      1715  
                             9      1716  
                             4      1717  
                             4      1718  
                             1      1719  
                             7      1720  
                             7      1721  
                             5      1722  
                             3      1723  
                             3      1724  
                             7      1725  
                             1      1726  
                             2      1727  
                             4      1728  
                             8      1730  
                             5      1731  
                             2      1732  
                             4      1734  
                             7      1735  
                             2      1736  
                             2      1737  
                             6      1740  
                             1      1741  
                             4      1742  
                             5      1743  
                             1      1744  
                             3      1745  
                             2      1746  
                             3      1750  
                             2      1751  
                             3      1752  
                             2      1753  
                             1      1754  
                             5      1755  
                             1      1756  
                             1      1757  
                             1      1758  
                             7      1760  
                             5      1761  
                             1      1762  
                             5      1763  
                             1      1764  
                             1      1765  
                             1      1766  
                             2      1767  
                             3      1770  
                             4      1771  
                             3      1772  
                             3      1773  
                             1      1774  
                             2      1775  
                             1      1776  
                             2      1778  
                             4      1780  
                             2      1781  
                             1      1785  
                             1      1786  
                             2      1788  
                             4      1790  
                             2      1792  
                             1      1795  
                             1      1796  
                             1      1801  
                             1      1802  
                             1      1804  
                             1      1805  
                             1      1806  
                             1      1811  
                             1      1814  
                             2      1817  
                             1      1820  
                             1      1825  
                             1      1831  
                             1      1835  
                             1      1840  
                             1      1843  
                             1      1855  
                             1      1875  
                             1      1880  
                             1      1885  
                           104      9994  not present
                           128      9995  refused
                             2      9996  other

. gen     height = hb3/10 

.         //We divide it by 10 in order to express it in centimeters
. replace height = . if hb3>=9990 
(234 real changes made, 234 to missing)

.         //All missing values or out of range are replaced as "."
. summ height

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      height |      1,442    162.7611    8.647532      116.6      188.5

. 
. 
. *** Variable: OEDEMA
. gen oedema = "n"  

. tab oedema      

     oedema |      Freq.     Percent        Cum.
------------+-----------------------------------
          n |      1,676      100.00      100.00
------------+-----------------------------------
      Total |      1,676      100.00

. 
. 
. *** Variable: SAMPLING WEIGHT ***
. gen  sw = hv005/1000000 

.         //For DHS sample weight has to be divided 1000000
. summ sw

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
          sw |      1,676    .9760717    .5147799    .161761   7.254974

. 
. 
. *** Keep only relevant sample: teenagers 15 - 19 years ***
. *count if mv012>=15 & mv012<=19
.         //Total number of boys in the MR recode 
. *keep if mv012>=15 & mv012<=19  
.         //Keep only boys between age 15-19 years to compute BMI-for-age
. 
. count if age_month<240
  1,648

. keep if age_month<240
(28 observations deleted)

.         
. /* 
> For this part of the do-file we use the WHO AnthroPlus software. This is to 
> calculate the z-scores for 15-19 years. 
> Source of ado file: https://www.who.int/growthref/tools/en/
> */
.         
. *** Indicate to STATA where the igrowup_restricted.ado file is stored:  
. adopath + "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"
  [1]  (BASE)      "C:\Program Files (x86)\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files (x86)\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\Stata configuration\Stata15\ado\personal/"
  [5]  (PLUS)      "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\Stata configuration\Stata15\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_child"
  [8]              "C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"

. 
. 
. /* We use 'reflib' to specify the package directory where the .dta files 
> containing the WHO Growth reference are stored. Note that we use strX to specity 
> the length of the path in string. */            
. gen str150 reflib="C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\WHO_anthroplus"

. lab var reflib "Directory of reference tables"

. 
. 
. /* We use datalib to specify the working directory where the input STATA data
> set containing the anthropometric measurement is stored. */
. gen str150 datalib = "$path_out" 

. lab var datalib "Directory for datafiles"

. 
. 
. /* We use datalab to specify the name that will prefix the output files that 
> will be produced from using this ado file*/
. gen str30 datalab = "boy_nutri_sle" 

. lab var datalab "Working file"  

.         
. capture drop _merge

.         
. /*We now run the command to calculate the z-scores with the adofile */
. who2007 reflib datalib datalab gender age_month ageunit weight height oedema sw

Please wait, programme is running.............

..............................................
Note: z-scores are flagged according to the following rules:
 
                            _zhfa = . if (_zhfa < -6 or _zhfa >6)
                            _zwfa = . if (_zwfa < -6 or _zwfa >5)
                            _zbfa = . if (_zbfa < -5 or _zbfa >5)
                            
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\boy_nutri_sle_z.dta not found)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\boy_nutri_sle_z.dta saved
Note 1:     Original data plus z-scores are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\boy_nutri_sle_z.dta
                            
                            
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\boy_nutri_sle_z.xls not found)
Note 2:     Original data plus z-scores are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\boy_nutri_sle_z.xls
                            

Please wait, programme is calculating prevalences.............

..............................................

Set 1:            Sexes combined

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    1180     7.6       6     9.1    28.7    26.1    31.3      .8      .2     1.3       0       0       0       0       0       0    -1.5    1.06
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15     361     8.2     5.3    11.2    29.2    24.4      34     1.4      .1     2.8       0       0      .1       0       0      .1   -1.48    1.15
   16     269     7.6     4.3      11    29.1    23.5    34.7       0       0      .2       0       0      .2       0       0      .2    -1.5    1.02
   17     250    10.9     6.8    14.9    35.4    29.2    41.5     1.1       0     2.7       0       0      .2       0       0      .2   -1.59    1.14
   18     273     3.5     1.1     5.8    21.4    16.4    26.5       0       0      .2       0       0      .2       0       0      .2   -1.43     .87
   19      26     9.7       0      23    30.9    11.1    50.7     4.9       0    15.2       0       0     1.9       0       0     1.9   -1.42    1.15

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    1180      .4       0      .7     4.3     3.1     5.5     7.1     5.6     8.6      .4       0      .8      .1       0      .3     -.4     .94
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15     361      .1       0      .7     3.8     1.7       6     8.8     5.7    11.8      .8       0     1.8       0       0      .1    -.26     .94
   16     270      .3       0     1.2     3.9     1.4     6.4     6.8     3.6      10      .4       0     1.4      .4       0     1.4    -.38     .98
   17     249      .7       0       2     6.7     3.4      10     5.4     2.4     8.4       0       0      .2       0       0      .2    -.57     .93
   18     273      .3       0     1.2     2.9      .7     5.1     6.2     3.1     9.2       0       0      .2       0       0      .2    -.46     .86
   19      26       0       0     1.9     4.9       0    15.2    12.1       0    26.7     2.8       0    11.1       0       0     1.9    -.35    1.03

Set 2:            Males

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    1180     7.6       6     9.1    28.7    26.1    31.3      .8      .2     1.3       0       0       0       0       0       0    -1.5    1.06
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15     361     8.2     5.3    11.2    29.2    24.4      34     1.4      .1     2.8       0       0      .1       0       0      .1   -1.48    1.15
   16     269     7.6     4.3      11    29.1    23.5    34.7       0       0      .2       0       0      .2       0       0      .2    -1.5    1.02
   17     250    10.9     6.8    14.9    35.4    29.2    41.5     1.1       0     2.7       0       0      .2       0       0      .2   -1.59    1.14
   18     273     3.5     1.1     5.8    21.4    16.4    26.5       0       0      .2       0       0      .2       0       0      .2   -1.43     .87
   19      26     9.7       0      23    30.9    11.1    50.7     4.9       0    15.2       0       0     1.9       0       0     1.9   -1.42    1.15

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total    1180      .4       0      .7     4.3     3.1     5.5     7.1     5.6     8.6      .4       0      .8      .1       0      .3     -.4     .94
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15     361      .1       0      .7     3.8     1.7       6     8.8     5.7    11.8      .8       0     1.8       0       0      .1    -.26     .94
   16     270      .3       0     1.2     3.9     1.4     6.4     6.8     3.6      10      .4       0     1.4      .4       0     1.4    -.38     .98
   17     249      .7       0       2     6.7     3.4      10     5.4     2.4     8.4       0       0      .2       0       0      .2    -.57     .93
   18     273      .3       0     1.2     2.9      .7     5.1     6.2     3.1     9.2       0       0      .2       0       0      .2    -.46     .86
   19      26       0       0     1.9     4.9       0    15.2    12.1       0    26.7     2.8       0    11.1       0       0     1.9    -.35    1.03

Set 3:            Females

Age groups        Weight-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        Height-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69

Age groups        BMI-for-age

            N  %<-3SD     95%     CI   %<-2SD     95%     CI    %>1SD     95%     CI    %>2SD     95%     CI    %>3SD     95%     CI     Mean      SD
Total       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    5       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    6       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    7       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    8       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
    9       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   10       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   11       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   12       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   13       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   14       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   15       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   16       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   17       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   18       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
   19       0     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69     -69
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\boy_nutri_sle_prev.xls not found)
 
Note:       Prevalences are written to
            C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs\boy_nutri_sle_prev.xls

. 
.         
. /*We now turn to using the dta file that was created and that contains 
> the calculated z-scores to compute BMI-for-age*/
. use "$path_out/boy_nutri_sle_z.dta", clear 

. 
.                 
. gen     z_bmi = _zbfa
(451 missing values generated)

. replace z_bmi = . if _fbfa==1 
(2 real changes made, 2 to missing)

. lab var z_bmi "z-score bmi-for-age WHO"

. 
. 
.         /*Takes value 1 if BMI-for-age is under 2 stdev below the median & 0 
>         otherwise */
. gen     low_bmiage = (z_bmi < -2.0) 

. replace low_bmiage = . if z_bmi==.
(453 real changes made, 453 to missing)

. lab var low_bmiage "Teenage low bmi 2sd - WHO"

. 
. 
. gen teen_MR = 1

.         //Identification variable for observations in IR recode (only 15-19 years)
. 
.         
.         //Retain relevant variables:    
. keep ind_id teen_MR age_month low_bmiage

.  
. order ind_id teen_MR age_month low_bmiage

. 
. ren age_month age_month_boys  

. ren low_bmiage low_bmiage_boys

. 
. sort ind_id

. 
.         //erase files from folder:
. erase "$path_out/boy_nutri_sle_z.xls"

. erase "$path_out/boy_nutri_sle_prev.xls"

. erase "$path_out/boy_nutri_sle_z.dta"

. 
. 
.         //Save a temp file for merging with PR:
. save "$path_out/sle19_MR_boys.dta", replace
(note: file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/sle19_MR_boys.dta not found)
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/sle19_MR_boys.dta saved

. 
. 
. ********************************************************************************
. *** Step 1.7  PR - HOUSEHOLD MEMBER'S RECODE 
. ********************************************************************************
. 
. use "$path_in/SLPR7AFL.dta", clear

. 
. gen cty         = "Sierra Leone" 

. gen ccty        = "SLE"  

. gen year    = "2019"  

. gen survey  = "DHS"

. 
. 
. *** Generate a household unique key variable at the household level using: 
.         ***hv001=cluster number 
.         ***hv002=household number
. gen double hh_id = hv001*10000 + hv002 

. format hh_id %20.0g

. label var hh_id "Household ID"

. codebook hh_id  

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hh_id                                                                                                                                                                          Household ID
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [10003,5780266]              units:  1
         unique values:  13,399                   missing .:  0/72,248

                  mean:   2.9e+06
              std. dev:   1.7e+06

           percentiles:        10%       25%       50%       75%       90%
                            560280   1.4e+06   2.9e+06   4.3e+06   5.2e+06

. 
. 
. *** Generate individual unique key variable required for data merging using:
.         *** hv001=cluster number; 
.         *** hv002=household number; 
.         *** hvidx=respondent's line number.
. gen double ind_id = hv001*1000000 + hv002*100 + hvidx 

. format ind_id %20.0g

. label var ind_id "Individual ID"

. codebook ind_id

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
ind_id                                                                                                                                                                        Individual ID
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (double)

                 range:  [1000301,5.780e+08]          units:  1
         unique values:  72,248                   missing .:  0/72,248

                  mean:   2.9e+08
              std. dev:   1.7e+08

           percentiles:        10%       25%       50%       75%       90%
                           5.6e+07   1.4e+08   2.9e+08   4.3e+08   5.2e+08

. 
. 
. sort hh_id ind_id

.         
.         
. ********************************************************************************
. *** 1.8 DATA MERGING
. ********************************************************************************
. 
. *** Merging BR Recode 
. *****************************************
. merge 1:1 ind_id using "$path_out/sle19_BR.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        60,773
        from master                    60,773  (_merge==1)
        from using                          0  (_merge==2)

    matched                            11,475  (_merge==3)
    -----------------------------------------

. 
. drop _merge

. 
. erase "$path_out/sle19_BR.dta"

. 
. 
. *** Merging IR Recode 
. *****************************************
. merge 1:1 ind_id using "$path_out/sle19_IR.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        56,674
        from master                    56,674  (_merge==1)
        from using                          0  (_merge==2)

    matched                            15,574  (_merge==3)
    -----------------------------------------

. 
. tab women_IR hv117, miss col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

           |    eligibility for
           |   female interview
  women_IR | not eligi   eligible |     Total
-----------+----------------------+----------
         1 |         0     15,574 |    15,574 
           |      0.00      96.74 |     21.56 
-----------+----------------------+----------
         . |    56,149        525 |    56,674 
           |    100.00       3.26 |     78.44 
-----------+----------------------+----------
     Total |    56,149     16,099 |    72,248 
           |    100.00     100.00 |    100.00 

. tab ha65 if hv117==1 & women_IR ==., miss

       result of |
         woman's |
      individual |
       interview |      Freq.     Percent        Cum.
-----------------+-----------------------------------
     not at home |        111       21.14       21.14
       postponed |          1        0.19       21.33
         refused |        106       20.19       41.52
partly completed |          1        0.19       41.71
   incapacitated |         31        5.90       47.62
               . |        275       52.38      100.00
-----------------+-----------------------------------
           Total |        525      100.00

.         //Total number of eligible women not interviewed
. tab ha65 ha13 if women_IR == . & hv117==1, miss  

       result of |
         woman's |
      individual |         result of measurement - height/weight
       interview |  measured  not prese    refused      other          . |     Total
-----------------+-------------------------------------------------------+----------
     not at home |         5         98          7          1          0 |       111 
       postponed |         1          0          0          0          0 |         1 
         refused |         4         15         87          0          0 |       106 
partly completed |         0          0          1          0          0 |         1 
   incapacitated |        20          2          2          7          0 |        31 
               . |         0          0          0          0        275 |       275 
-----------------+-------------------------------------------------------+----------
           Total |        30        115         97          8        275 |       525 

. 
. drop _merge

. 
. erase "$path_out/sle19_IR.dta"

. 
. 
. *** Merging IR Recode: 15-19 years girls 
. *****************************************
. merge 1:1 ind_id using "$path_out/sle19_IR_girls.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        70,378
        from master                    70,378  (_merge==1)
        from using                          0  (_merge==2)

    matched                             1,870  (_merge==3)
    -----------------------------------------

. 
. tab teen_IR hv117 if hv105>=15 & hv105<=19 & hv042==1, miss col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

           |    eligibility for
           |   female interview
   teen_IR | not eligi   eligible |     Total
-----------+----------------------+----------
         1 |        29      1,841 |     1,870 
           |      1.70     100.00 |     52.74 
-----------+----------------------+----------
         . |     1,676          0 |     1,676 
           |     98.30       0.00 |     47.26 
-----------+----------------------+----------
     Total |     1,705      1,841 |     3,546 
           |    100.00     100.00 |    100.00 

. tab ha65 if hv117==1 & teen_IR ==. & (hv105>=15 & hv105<=19 & hv042==1), miss 
no observations

.         //Total number of eligible girls not interviewed
. tab ha65 ha13 if hv117==1 & teen_IR ==. & (hv105>=15 & hv105<=19 & hv042==1), miss 
no observations

. tab ha40 if ha65==1 & ha13 ==0 & hv117==1 & teen_IR ==. & (hv105>=15 & hv105<=19 & hv042==1), miss 
no observations

. 
. 
. drop _merge

. 
. erase "$path_out/sle19_IR_girls.dta"

. 
. 
. *** Merging MR Recode 
. *****************************************
. merge 1:1 ind_id using "$path_out/sle19_MR.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        65,051
        from master                    65,051  (_merge==1)
        from using                          0  (_merge==2)

    matched                             7,197  (_merge==3)
    -----------------------------------------

. 
. tab men_MR hv118, miss col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

           | eligibility for male
           |       interview
    men_MR | not eligi   eligible |     Total
-----------+----------------------+----------
         1 |         0      7,197 |     7,197 
           |      0.00      96.88 |      9.96 
-----------+----------------------+----------
         . |    64,819        232 |    65,051 
           |    100.00       3.12 |     90.04 
-----------+----------------------+----------
     Total |    64,819      7,429 |    72,248 
           |    100.00     100.00 |    100.00 

. 
. drop _merge

. 
. erase "$path_out/sle19_MR.dta"

. 
. 
. *** Merging MR Recode: 15-19 years boys 
. *****************************************
. merge 1:1 ind_id using "$path_out/sle19_MR_boys.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        70,600
        from master                    70,600  (_merge==1)
        from using                          0  (_merge==2)

    matched                             1,648  (_merge==3)
    -----------------------------------------

.         
. drop _merge

. 
. erase "$path_out/sle19_MR_boys.dta"

. 
. 
. *** Merging KR Recode 
. *****************************************
. merge 1:1 ind_id using "$path_out/SierraLeone19_KR.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                        66,630
        from master                    66,630  (_merge==1)
        from using                          0  (_merge==2)

    matched                             5,618  (_merge==3)
    -----------------------------------------

. count if b16==0 & child_KR==1
  0

. 
. drop _merge

. 
. erase "$path_out/SierraLeone19_KR.dta"

. 
. 
. sort ind_id

. 
. 
. ********************************************************************************
. *** Step 1.9 KEEPING ONLY DE JURE HOUSEHOLD MEMBERS ***
. ********************************************************************************
. 
. //Permanent (de jure) household members 
. clonevar resident = hv102 

. codebook resident, tab (10) 

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
resident                                                                                                                                                                     usual resident
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV102

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/72,248

            tabulation:  Freq.   Numeric  Label
                           603         0  no
                        71,645         1  yes

. label var resident "Permanent (de jure) household member"

. 
. 
. drop if resident!=1 
(603 observations deleted)

. tab resident, miss

  Permanent |
  (de jure) |
  household |
     member |      Freq.     Percent        Cum.
------------+-----------------------------------
        yes |     71,645      100.00      100.00
------------+-----------------------------------
      Total |     71,645      100.00

.         /*Note: The Global MPI is based on de jure (permanent) household members 
>         only. As such, non-usual residents will be excluded from the sample. 
>         
>         In the context of Sierra Leone DHS 2019, 945 (1.27%) individuals who were 
>         non-usual residents were dropped from the sample*/
. 
. 
. ********************************************************************************
. *** 1.10 CONTROL VARIABLES
. ********************************************************************************
. 
. /* Households are identified as having 'no eligible' members if there are no 
> applicable population, that is, children 0-5 years, adult women 15-49 years or 
> men 15-59 years. These households will not have information on relevant 
> indicators of health. As such, these households are considered as non-deprived 
> in those relevant indicators.*/
. 
. 
. *** No Eligible Women 15-49 years
. *****************************************
. gen fem_eligible = (hv117==1)

. bys hh_id: egen hh_n_fem_eligible = sum(fem_eligible)   

.         //Number of eligible women for interview in the hh
. gen no_fem_eligible = (hh_n_fem_eligible==0)                                                                    

.         //Takes value 1 if the household had no eligible females for an interview
. lab var no_fem_eligible "Household has no eligible women"

. tab no_fem_eligible, miss

  Household |
     has no |
   eligible |
      women |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     62,772       87.62       87.62
          1 |      8,873       12.38      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. 
. *** No Eligible Men 15-59 years
. *****************************************
. gen male_eligible = (hv118==1)

. bys hh_id: egen hh_n_male_eligible = sum(male_eligible)  

.         //Number of eligible men for interview in the hh
. gen no_male_eligible = (hh_n_male_eligible==0)  

.         //Takes value 1 if the household had no eligible males for an interview
. lab var no_male_eligible "Household has no eligible man"

. tab no_male_eligible, miss

  Household |
     has no |
   eligible |
        man |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     29,193       40.75       40.75
          1 |     42,452       59.25      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. 
. *** No Eligible Children 0-5 years
. *****************************************
. gen child_eligible = (hv120==1) 

. bys hh_id: egen hh_n_children_eligible = sum(child_eligible)  

.         //Number of eligible children for anthropometrics
. gen no_child_eligible = (hh_n_children_eligible==0) 

.         //Takes value 1 if there were no eligible children for anthropometrics
. lab var no_child_eligible "Household has no children eligible"

. tab no_child_eligible, miss

  Household |
     has no |
   children |
   eligible |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     24,415       34.08       34.08
          1 |     47,230       65.92      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. 
. *** No Eligible Women and Men 
. ***********************************************
.         /*NOTE: In the DHS datasets, we use this variable as a control 
>         variable for the child mortality indicator if mortality data was 
>         collected from women and men. If child mortality was only colelcted 
>         from women, the we use 'no_fem_eligible' as the eligibility criteria */
. gen     no_adults_eligible = (no_fem_eligible==1 & no_male_eligible==1) 

.         //Takes value 1 if the household had no eligible men & women for an interview
. lab var no_adults_eligible "Household has no eligible women or men"

. tab no_adults_eligible, miss 

  Household |
     has no |
   eligible |
   women or |
        men |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     65,276       91.11       91.11
          1 |      6,369        8.89      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. 
. *** No Eligible Children and Women  
. ***********************************************
.         /*NOTE: In the DHS datasets, we use this variable as a control 
>         variable for the nutrition indicator if nutrition data is 
>         present for children and women.*/
. gen     no_child_fem_eligible = (no_child_eligible==1 & no_fem_eligible==1)

. lab var no_child_fem_eligible "Household has no children or women eligible"

. tab no_child_fem_eligible, miss 

  Household |
     has no |
children or |
      women |
   eligible |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     63,739       88.97       88.97
          1 |      7,906       11.03      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. 
. *** No Eligible Women, Men or Children 
. ***********************************************
.         /*NOTE: In the DHS datasets, we use this variable as a control 
>         variable for the nutrition indicator if nutrition data is 
>         present for children, women and men. */
. gen no_eligibles = (no_fem_eligible==1 & no_male_eligible==1 & no_child_eligible==1)

. lab var no_eligibles "Household has no eligible women, men, or children"

. tab no_eligibles, miss

  Household |
     has no |
   eligible |
women, men, |
or children |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     65,656       91.64       91.64
          1 |      5,989        8.36      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. 
. *** No Eligible Subsample 
. *****************************************
.         /*hv042 (household selected for hemoglobin) is essentially a variable that 
>         indicates whether there is selection of a subsample for anthropometric 
>         data. */        
. gen hem_eligible =(hv042==1)

. bys hh_id: egen hh_n_hem_eligible = sum(hem_eligible) 

. gen no_hem_eligible = (hh_n_hem_eligible==0) 

.         //Takes value 1 if the HH had no eligible females for hemoglobin test   
. lab var no_hem_eligible "Household has no eligible individuals for hemoglobin measurements"

. tab no_hem_eligible, miss

  Household |
     has no |
   eligible |
individuals |
        for |
 hemoglobin |
measurement |
          s |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     36,170       50.49       50.49
          1 |     35,475       49.51      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. 
. drop fem_eligible hh_n_fem_eligible male_eligible hh_n_male_eligible child_eligible hh_n_children_eligible hem_eligible hh_n_hem_eligible 

. 
. 
. sort hh_id ind_id

. 
. 
. ********************************************************************************
. *** 1.11 SUBSAMPLE VARIABLE ***
. ********************************************************************************
. 
. /* In Sierra Leone DHS 2019, height and weight measurements were
> collected from children (0-5) in 50% of sample and for women (15-49) in 50% of the sample. 
> We use 50% of sample for MPI */
. 
. gen subsample=hv042

. label var subsample "Households selected as part of nutrition subsample" 

. tab subsample, miss

 Households |
selected as |
    part of |
  nutrition |
  subsample |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     35,475       49.51       49.51
          1 |     36,170       50.49      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. 
. ********************************************************************************
. *** 1.12 RENAMING DEMOGRAPHIC VARIABLES ***
. ********************************************************************************
. 
. //Sample weight
. desc hv005

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv005           long    %12.0g                household sample weight (6 decimals)

. clonevar weight = hv005 

. label var weight "Sample weight"

. 
. 
. //Area: urban or rural  
. desc hv025

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv025           byte    %8.0g      HV025      type of place of residence

. codebook hv025, tab (5)         

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv025                                                                                                                                                            type of place of residence
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV025

                 range:  [1,2]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        26,241         1  urban
                        45,404         2  rural

. clonevar area = hv025  

. replace area=0 if area==2  
(45,404 real changes made)

. label define lab_area 1 "urban" 0 "rural"

. label values area lab_area

. label var area "Area: urban-rural"

. 
. 
. //Relationship to the head of household 
. clonevar relationship = hv101 

. codebook relationship, tab (20)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
relationship                                                                                                                                                           relationship to head
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV101

                 range:  [1,15]                       units:  1
         unique values:  15                       missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        13,399         1  head
                         9,246         2  wife or husband
                        25,465         3  son/daughter
                           703         4  son/daughter-in-law
                         6,975         5  grandchild
                         1,325         6  parent
                           244         7  parent-in-law
                         2,443         8  brother/sister
                             3         9  co-spouse
                         2,441        10  other relative
                         2,014        11  adopted/foster child
                         1,236        12  not related
                         4,195        13  niece/nephew by blood
                         1,169        14  niece/nephew by marriage
                           787        15  brother/sister in law

. recode relationship (1=1)(2=2)(3=3)(11=3)(4/10=4)(13/15=4)(12=5)(98=.)
(relationship: 22832 changes made)

. label define lab_rel 1"head" 2"spouse" 3"child" 4"extended family" 5"not related" 6"maid"

. label values relationship lab_rel

. label var relationship "Relationship to the head of household"

. tab hv101 relationship, miss

                      |         Relationship to the head of household
 relationship to head |      head     spouse      child  extended   not relat |     Total
----------------------+-------------------------------------------------------+----------
                 head |    13,399          0          0          0          0 |    13,399 
      wife or husband |         0      9,246          0          0          0 |     9,246 
         son/daughter |         0          0     25,465          0          0 |    25,465 
  son/daughter-in-law |         0          0          0        703          0 |       703 
           grandchild |         0          0          0      6,975          0 |     6,975 
               parent |         0          0          0      1,325          0 |     1,325 
        parent-in-law |         0          0          0        244          0 |       244 
       brother/sister |         0          0          0      2,443          0 |     2,443 
            co-spouse |         0          0          0          3          0 |         3 
       other relative |         0          0          0      2,441          0 |     2,441 
 adopted/foster child |         0          0      2,014          0          0 |     2,014 
          not related |         0          0          0          0      1,236 |     1,236 
niece/nephew by blood |         0          0          0      4,195          0 |     4,195 
niece/nephew by marri |         0          0          0      1,169          0 |     1,169 
brother/sister in law |         0          0          0        787          0 |       787 
----------------------+-------------------------------------------------------+----------
                Total |    13,399      9,246     27,479     20,285      1,236 |    71,645 

. 
. 
. //Sex of household member       
. codebook hv104, tab (10)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv104                                                                                                                                                               sex of household member
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV104

                 range:  [1,2]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        34,977         1  male
                        36,668         2  female

. clonevar sex = hv104  

. label var sex "Sex of household member"

. 
. 
. //Age of household member
. codebook hv105, tab (1000)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv105                                                                                                                                                              age of household members
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV105, but 95 nonmissing values are not labeled

                 range:  [0,95]                       units:  1
         unique values:  96                       missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                         2,017         0  
                         1,985         1  
                         1,958         2  
                         2,266         3  
                         2,237         4  
                         2,080         5  
                         2,304         6  
                         2,526         7  
                         2,337         8  
                         2,045         9  
                         2,364        10  
                         1,733        11  
                         2,270        12  
                         1,984        13  
                         1,638        14  
                         1,879        15  
                         1,289        16  
                         1,298        17  
                         1,453        18  
                         1,341        19  
                         1,384        20  
                           845        21  
                           985        22  
                           909        23  
                           794        24  
                         1,516        25  
                           816        26  
                           911        27  
                           976        28  
                           670        29  
                         1,273        30  
                           510        31  
                           852        32  
                           590        33  
                           530        34  
                         1,441        35  
                           643        36  
                           682        37  
                           791        38  
                           569        39  
                         1,052        40  
                           403        41  
                           605        42  
                           463        43  
                           326        44  
                         1,066        45  
                           407        46  
                           487        47  
                           529        48  
                           367        49  
                           649        50  
                           443        51  
                           556        52  
                           401        53  
                           422        54  
                           694        55  
                           353        56  
                           351        57  
                           392        58  
                           221        59  
                           598        60  
                           233        61  
                           284        62  
                           237        63  
                           181        64  
                           517        65  
                           103        66  
                           199        67  
                           206        68  
                           118        69  
                           393        70  
                            95        71  
                           144        72  
                            94        73  
                            73        74  
                           294        75  
                            81        76  
                            58        77  
                           109        78  
                            55        79  
                           173        80  
                            36        81  
                            42        82  
                            38        83  
                            33        84  
                           105        85  
                            26        86  
                            35        87  
                            28        88  
                            28        89  
                            54        90  
                             5        91  
                            11        92  
                             4        93  
                             7        94  
                            70        95  95+

. clonevar age = hv105  

. replace age = . if age>=98
(0 real changes made)

. label var age "Age of household member"

. 
. 
. //Age group 
. recode age (0/4 = 1 "0-4")(5/9 = 2 "5-9")(10/14 = 3 "10-14") ///
>                    (15/17 = 4 "15-17")(18/59 = 5 "18-59")(60/max=6 "60+"), gen(agec7)
(69660 differences between age and agec7)

. lab var agec7 "age groups (7 groups)"   

.            
. recode age (0/9 = 1 "0-9") (10/17 = 2 "10-17")(18/59 = 3 "18-59") ///
>                    (60/max=4 "60+"), gen(agec4)
(69660 differences between age and agec4)

. lab var agec4 "age groups (4 groups)"

. 
. 
. //Marital status of household member
. clonevar marital = hv115 
(31,744 missing values generated)

. codebook marital, tab (20)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
marital                                                                                                                                                              current marital status
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV115

                 range:  [0,4]                        units:  1
         unique values:  4                        missing .:  31,744/71,645

            tabulation:  Freq.   Numeric  Label
                        11,564         0  never married
                        23,553         1  married
                         3,169         3  widowed
                         1,615         4  divorced
                        31,744         .  

. recode marital (0=1)(1=2)(8=.)
(marital: 35117 changes made)

. label define lab_mar 1"never married" 2"currently married" ///
>                                          3"widowed" 4"divorced" 5"not living together"

. label values marital lab_mar    

. label var marital "Marital status of household member"

. tab hv115 marital, miss

    current marital |           Marital status of household member
             status | never mar  currently    widowed   divorced          . |     Total
--------------------+-------------------------------------------------------+----------
      never married |    11,564          0          0          0          0 |    11,564 
            married |         0     23,553          0          0          0 |    23,553 
            widowed |         0          0      3,169          0          0 |     3,169 
           divorced |         0          0          0      1,615          0 |     1,615 
                  . |         0          0          0          0     31,744 |    31,744 
--------------------+-------------------------------------------------------+----------
              Total |    11,564     23,553      3,169      1,615     31,744 |    71,645 

. 
. 
. //Total number of de jure hh members in the household
. gen member = 1

. bysort hh_id: egen hhsize = sum(member)

. label var hhsize "Household size"

. tab hhsize, miss

  Household |
       size |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        804        1.12        1.12
          2 |      1,994        2.78        3.91
          3 |      5,058        7.06       10.97
          4 |      8,940       12.48       23.44
          5 |     11,210       15.65       39.09
          6 |     10,524       14.69       53.78
          7 |      8,610       12.02       65.80
          8 |      6,800        9.49       75.29
          9 |      4,743        6.62       81.91
         10 |      3,560        4.97       86.88
         11 |      2,684        3.75       90.62
         12 |      1,968        2.75       93.37
         13 |      1,248        1.74       95.11
         14 |        924        1.29       96.40
         15 |        705        0.98       97.39
         16 |        528        0.74       98.12
         17 |        408        0.57       98.69
         18 |        162        0.23       98.92
         19 |        171        0.24       99.16
         20 |        120        0.17       99.32
         21 |        105        0.15       99.47
         22 |        110        0.15       99.62
         23 |         46        0.06       99.69
         24 |         48        0.07       99.76
         25 |         25        0.03       99.79
         28 |         28        0.04       99.83
         29 |         29        0.04       99.87
         30 |         60        0.08       99.95
         33 |         33        0.05      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. drop member

. compare hv009 hhsize

                                        ---------- difference ----------
                            count       minimum      average     maximum
------------------------------------------------------------------------
hv009=hhsize                69291
hv009>hhsize                 2354             1     1.453271           6
                       ----------
jointly defined             71645             0     .0477493           6
                       ----------
total                       71645

. 
. //Subnational region
. lookfor region

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv024           byte    %8.0g      HV024      region

. codebook hv024, tab (100)       

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv024                                                                                                                                                                                region
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV024

                 range:  [1,5]                        units:  1
         unique values:  5                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        14,682         1  eastern
                        16,845         2  northern
                        13,054         3  north western
                        16,782         4  southern
                        10,282         5  western

. clonevar region = hv024

. lab var region "Region for subnational decomposition"

. 
. label values region region_lab

. tab hv024 region, miss

              |          Region for subnational decomposition
       region |         1          2          3          4          5 |     Total
--------------+-------------------------------------------------------+----------
      eastern |    14,682          0          0          0          0 |    14,682 
     northern |         0     16,845          0          0          0 |    16,845 
north western |         0          0     13,054          0          0 |    13,054 
     southern |         0          0          0     16,782          0 |    16,782 
      western |         0          0          0          0     10,282 |    10,282 
--------------+-------------------------------------------------------+----------
        Total |    14,682     16,845     13,054     16,782     10,282 |    71,645 

. 
. 
. ********************************************************************************
. ***  Step 2 Data preparation  ***
. ***  Standardization of the 10 Global MPI indicators 
. ***  Identification of non-deprived & deprived individuals  
. ********************************************************************************
. 
. 
. ********************************************************************************
. *** Step 2.1 Years of Schooling ***
. ********************************************************************************
. 
. ** official entrance age = 6 yrs
. ** duration of primary = 6 yrs
. 
. codebook hv108, tab(30)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv108                                                                                                                                                   education completed in single years
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV108, but 20 nonmissing values are not labeled

                 range:  [0,98]                       units:  1
         unique values:  21                       missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        36,756         0  
                         3,648         1  
                         3,411         2  
                         3,091         3  
                         2,995         4  
                         2,917         5  
                         3,167         6  
                         2,528         7  
                         2,781         8  
                         2,093         9  
                         1,421        10  
                         2,304        11  
                         2,515        12  
                           192        13  
                           364        14  
                           892        15  
                           439        16  
                             9        17  
                            22        18  
                            14        19  
                            86        98  don't know

. clonevar eduyears = hv108   

.         *total number of years of education
. replace eduyears = . if eduyears>30
(86 real changes made, 86 to missing)

.         *recode any unreasonable years of highest education as missing value
. replace eduyears = . if eduyears>=age & age>0
(0 real changes made)

. replace eduyears = 0 if age < 10
(5,235 real changes made)

. replace eduyears = 0 if (age==10 | age==11) & eduyears < 6
(3,518 real changes made)

.         /*The variable "eduyears" was replaced with a '0' given that the criteria 
>         for this indicator is household member aged 12 years or older */
. replace eduyears=6 if age>=10 & age<. & (hv106==2 | hv106==3) & (hv108==. | hv108==98 | hv108==99)
(2 real changes made)

. /* there a few people with missing years of schooling but according to hv106 we know there are in secondary or higher so they completed at least 6 yrs of schooling, I am imputing them a
>  value of 6 years since this is sufficient for the MPI to be considered not deprived */
. 
.         
.         /*A control variable is created on whether there is information on 
>         years of education for at least 2/3 of the household members. */
. gen temp = 1 if (eduyears!=. & (age>=12 & age!=.)) | (((age==10 | age==11) & eduyears>=6 & eduyears<.))
(25,852 missing values generated)

. bysort  hh_id: egen no_missing_edu = sum(temp)

.         /*Total household members who are 12 years and older with no missing 
>         years of education but recognizing as an achievement if the member is 10 or 11 and already completed 6 yrs of schooling */
. gen temp2 = 1 if (age>=12 & age!=.) | (((age==10 | age==11) & eduyears>=6 & eduyears<.))
(25,768 missing values generated)

. bysort hh_id: egen hhs = sum(temp2)

.         //Total number of household members who are 12 years and older 
. replace no_missing_edu = no_missing_edu/hhs
(69,104 real changes made)

. replace no_missing_edu = (no_missing_edu>=2/3)
(536 real changes made)

.         /*Identify whether there is information on years of education for at 
>         least 2/3 of the household members aged 12 years and older */
. tab no_missing_edu, miss

no_missing_ |
        edu |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |         71        0.10        0.10
          1 |     71,574       99.90      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. label var no_missing_edu "No missing edu for at least 2/3 of the HH members aged 12 years & older"              

. drop temp temp2 hhs

. 
. 
. /*The entire household is considered deprived if no household member aged 
> 12 years or older has completed SIX years of schooling. */
. 
. gen      years_edu6 = (eduyears>=6)

.         /* The years of schooling indicator takes a value of "1" if at least someone 
>         in the hh has reported 6 years of education or more */
. replace years_edu6 = . if eduyears==.
(84 real changes made, 84 to missing)

. bysort hh_id: egen hh_years_edu6_1 = max(years_edu6)

. gen     hh_years_edu6 = (hh_years_edu6_1==1)

. replace hh_years_edu6 = . if hh_years_edu6_1==.
(0 real changes made)

. replace hh_years_edu6 = . if hh_years_edu6==0 & no_missing_edu==0 
(34 real changes made, 34 to missing)

. lab var hh_years_edu6 "Household has at least one member with 6 years of edu"

. 
. 
. 
. ********************************************************************************
. *** Step 2.2 Child School Attendance ***
. ********************************************************************************
. 
. codebook hv121, tab (10)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv121                                                                                                                                     member attended school during current school year
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV121

                 range:  [0,2]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        46,977         0  no
                        24,668         2  attended at some time

. clonevar attendance = hv121 

. recode attendance (2=1) 
(attendance: 24668 changes made)

. codebook attendance, tab (10)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
attendance                                                                                                                                member attended school during current school year
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV121

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        46,977         0  no
                        24,668         1  currently attending

. 
. replace attendance = 0 if (attendance==9 | attendance==.) & hv109==0 
(0 real changes made)

.         /*In some countries, they don't assess attendance for those with no 
>          educational attainment. These are replaced with a '0' */
. replace attendance = . if  attendance==9 & hv109!=0
(0 real changes made)

.         //Replace missing values
.         
.         
. 
. *** Old & New Standard MPI ***
. ******************************************************************* 
. /*The entire household is considered deprived if any school-aged child is not 
> attending school up to class 8. */ 
. 
. gen child_schoolage = (age>=6 & age<=14)

.         /* Note: In Sierra Leone, the official school entrance age is 7 years.  
>         So, age range is 6-14 (6+8)
>         Source: http://data.uis.unesco.org/?ReportId=163. */
.         
.         
.         /*A control variable is created on whether there is no information on 
>         school attendance for at least 2/3 of the school age children */
. count if child_schoolage==1 & attendance==.
  0

.         //Understand how many eligible school aged children are not attending school 
. gen temp = 1 if child_schoolage==1 & attendance!=.
(52,444 missing values generated)

.         /*Generate a variable that captures the number of eligible school aged 
>         children who are attending school */
. bysort hh_id: egen no_missing_atten = sum(temp) 

.         /*Total school age children with no missing information on school 
>         attendance */
. gen temp2 = 1 if child_schoolage==1     
(52,444 missing values generated)

. bysort hh_id: egen hhs = sum(temp2)

.         //Total number of household members who are of school age
. replace no_missing_atten = no_missing_atten/hhs 
(53,895 real changes made, 13,330 to missing)

. replace no_missing_atten = (no_missing_atten>=2/3)
(13,330 real changes made)

.         /*Identify whether there is missing information on school attendance for 
>         more than 2/3 of the school age children */                     
. tab no_missing_atten, miss

no_missing_ |
      atten |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     71,645      100.00      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. label var no_missing_atten "No missing school attendance for at least 2/3 of the school aged children"          

. drop temp temp2 hhs

.         
.         
. bysort hh_id: egen hh_children_schoolage = sum(child_schoolage)

. replace hh_children_schoolage = (hh_children_schoolage>0) 
(40,565 real changes made)

.         //Control variable: 
.         //It takes value 1 if the household has children in school age
. lab var hh_children_schoolage "Household has children in school age"

. 
. 
. gen     child_not_atten = (attendance==0) if child_schoolage==1
(52,444 missing values generated)

. replace child_not_atten = . if attendance==. & child_schoolage==1
(0 real changes made)

. bysort  hh_id: egen any_child_not_atten = max(child_not_atten)
(13330 missing values generated)

. gen     hh_child_atten = (any_child_not_atten==0) 

. replace hh_child_atten = . if any_child_not_atten==.
(13,330 real changes made, 13,330 to missing)

. replace hh_child_atten = 1 if hh_children_schoolage==0
(13,330 real changes made)

. replace hh_child_atten = . if hh_child_atten==1 & no_missing_atten==0 
(0 real changes made)

.         /*If the household has been intially identified as non-deprived, but has 
>         missing school attendance for at least 2/3 of the school aged children, then 
>         we replace this household with a value of '.' because there is insufficient 
>         information to conclusively conclude that the household is not deprived */
. lab var hh_child_atten "Household has all school age children up to class 8 in school"

. tab hh_child_atten, miss

  Household |
    has all |
 school age |
children up |
 to class 8 |
  in school |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     12,388       17.29       17.29
          1 |     59,257       82.71      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
.         /*Note: The indicator takes value 1 if ALL children in school age are 
>         attending school and 0 if there is at least one child not attending. 
>         Households with no children receive a value of 1 as non-deprived. The 
>         indicator has a missing value only when there are all missing values on 
>         children attendance in households that have children in school age. */
.         
.         
. ********************************************************************************
. *** Step 2.3 Nutrition ***
. ********************************************************************************
. 
. 
. ********************************************************************************
. *** Step 2.3a Adult Nutrition ***
. ********************************************************************************
. /* Note: Sierra Leone DHS 2019 does not have anthropometric data for men */
. 
. lookfor body mass

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
ha40            int     %8.0g      HA40       body mass index
hb40            int     %8.0g      HB40       body mass index

. codebook ha40

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
ha40                                                                                                                                                                        body mass index
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (int)
                 label:  HA40, but 1715 nonmissing values are not labeled

                 range:  [1282,9998]                  units:  1
         unique values:  1,716                    missing .:  64,117/71,645

              examples:  .     
                         .     
                         .     
                         .     

. *gen hb40 = .
. 
. foreach var in ha40 hb40 {
  2.                          gen inf_`var' = 1 if `var'!=.
  3.                          bys sex: tab age inf_`var' 
  4.                          drop inf_`var'
  5.                          }
(64,117 missing values generated)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> sex = male
no observations

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> sex = female

    Age of |
 household |  inf_ha40
    member |         1 |     Total
-----------+-----------+----------
        15 |       378 |       378 
        16 |       282 |       282 
        17 |       275 |       275 
        18 |       331 |       331 
        19 |       355 |       355 
        20 |       349 |       349 
        21 |       234 |       234 
        22 |       258 |       258 
        23 |       248 |       248 
        24 |       227 |       227 
        25 |       369 |       369 
        26 |       199 |       199 
        27 |       237 |       237 
        28 |       261 |       261 
        29 |       161 |       161 
        30 |       352 |       352 
        31 |       134 |       134 
        32 |       203 |       203 
        33 |       151 |       151 
        34 |       127 |       127 
        35 |       378 |       378 
        36 |       180 |       180 
        37 |       173 |       173 
        38 |       210 |       210 
        39 |       147 |       147 
        40 |       238 |       238 
        41 |        99 |        99 
        42 |       130 |       130 
        43 |       109 |       109 
        44 |        84 |        84 
        45 |       205 |       205 
        46 |       106 |       106 
        47 |       107 |       107 
        48 |       123 |       123 
        49 |       108 |       108 
-----------+-----------+----------
     Total |     7,528 |     7,528 

(65,094 missing values generated)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> sex = male

    Age of |
 household |  inf_hb40
    member |         1 |     Total
-----------+-----------+----------
        15 |       399 |       399 
        16 |       241 |       241 
        17 |       260 |       260 
        18 |       273 |       273 
        19 |       251 |       251 
        20 |       228 |       228 
        21 |       161 |       161 
        22 |       156 |       156 
        23 |       165 |       165 
        24 |       123 |       123 
        25 |       254 |       254 
        26 |       129 |       129 
        27 |       164 |       164 
        28 |       162 |       162 
        29 |       140 |       140 
        30 |       210 |       210 
        31 |       100 |       100 
        32 |       176 |       176 
        33 |       106 |       106 
        34 |       109 |       109 
        35 |       240 |       240 
        36 |       122 |       122 
        37 |       138 |       138 
        38 |       144 |       144 
        39 |        96 |        96 
        40 |       197 |       197 
        41 |        86 |        86 
        42 |       142 |       142 
        43 |       101 |       101 
        44 |        84 |        84 
        45 |       219 |       219 
        46 |       105 |       105 
        47 |       112 |       112 
        48 |       105 |       105 
        49 |        83 |        83 
        50 |       118 |       118 
        51 |        64 |        64 
        52 |        83 |        83 
        53 |        74 |        74 
        54 |        67 |        67 
        55 |       114 |       114 
        56 |        60 |        60 
        57 |        65 |        65 
        58 |        58 |        58 
        59 |        67 |        67 
-----------+-----------+----------
     Total |     6,551 |     6,551 

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> sex = female
no observations


. 
. 
. *** ELIGIBILITY FOR BMI ***
. 
. ** WOMEN
. gen fem_eligible_bmi = 1 if ha13<.
(63,154 missing values generated)

. replace fem_eligible_bmi = 0 if ha13==.
(63,154 real changes made)

. replace fem_eligible_bmi = 0 if age>49 & age<.
(0 real changes made)

. bys hh_id: egen hh_n_fem_eligible_bmi = sum(fem_eligible_bmi)   

.         //Number of eligible women for BMI in the hh
. gen no_fem_eligible_bmi = (hh_n_fem_eligible_bmi==0)                                                                    

.         //Takes value 1 if the household had no eligible females for an interview
. lab var no_fem_eligible_bmi "Household has no eligible women"

. tab no_fem_eligible_bmi, miss

  Household |
     has no |
   eligible |
      women |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     32,854       45.86       45.86
          1 |     38,791       54.14      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. ** MEN
. gen male_eligible_bmi = 1 if hb13<.
(63,990 missing values generated)

. replace male_eligible_bmi = 0 if hb13==.
(63,990 real changes made)

. replace male_eligible_bmi = 0 if age>59 & age<.
(0 real changes made)

. bys hh_id: egen hh_n_male_eligible_bmi = sum(male_eligible_bmi)  

.         //Number of eligible men for BMI
. gen no_male_eligible_bmi = (hh_n_male_eligible_bmi==0)  

.         //Takes value 1 if the household had no eligible males for an interview
. lab var no_male_eligible_bmi "Household has no eligible man"

. tab no_male_eligible_bmi, miss

  Household |
     has no |
   eligible |
        man |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     30,078       41.98       41.98
          1 |     41,567       58.02      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. *** No Eligible Women and Men for BMI
. ***********************************************
.         /*NOTE: In the DHS datasets, we use this variable as a control 
>         variable for nutrition when anthropometrics is available for women and men */
. gen     no_adults_eligible_bmi = (no_fem_eligible_bmi==1 & no_male_eligible_bmi==1) 

.         //Takes value 1 if the household had no eligible men & women for BMI
. lab var no_adults_eligible_bmi "Household has no eligible women or men"

. tab no_adults_eligible_bmi, miss

  Household |
     has no |
   eligible |
   women or |
        men |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     35,079       48.96       48.96
          1 |     36,566       51.04      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. 
. *** No Eligible Women or Children for BMI
. ***********************************************
.         /*NOTE: In the DHS datasets, we use this variable as a control 
>         variable for the nutrition indicator if nutrition data is 
>         present for children, women and men. */
. gen no_eligibles_bmi = (no_fem_eligible_bmi==1 & no_male_eligible_bmi==1 & no_child_eligible==1)

. lab var no_eligibles_bmi "Household has no eligible women, men or children for BMI"

. tab no_eligibles_bmi, miss

  Household |
     has no |
   eligible |
 women, men |
or children |
    for BMI |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     35,396       49.40       49.40
          1 |     36,249       50.60      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. 
. *** BMI Indicator for Women 15-49 years ***
. ******************************************************************* 
. 
. gen     f_bmi = ha40/100
(64,117 missing values generated)

.         //Low BMI of women 15-49 years  
. lab var f_bmi "Women's BMI"

. 
. gen     f_low_bmi = (f_bmi<18.5)

. replace f_low_bmi = . if f_bmi==. | f_bmi>=99.90
(64,121 real changes made, 64,121 to missing)

. replace f_low_bmi = . if age>49 & age<.
(0 real changes made)

. lab var f_low_bmi "BMI of women < 18.5"

. 
. bysort hh_id: egen low_bmi = max(f_low_bmi)
(41684 missing values generated)

. 
. gen     hh_no_low_bmi = (low_bmi==0)

.         /*Under this section, households take a value of '1' if no women in the 
>         household has low bmi */
.         
. replace hh_no_low_bmi = . if low_bmi==.
(41,684 real changes made, 41,684 to missing)

.         /*Under this section, households take a value of '.' if there is no 
>         information from eligible women*/
. 
. 
. replace hh_no_low_bmi = 1 if no_fem_eligible_bmi==1
(38,791 real changes made)

.         /*Under this section, households that don't have eligible female population 
>         are identified as non-deprived in nutrition. */ 
.         
. drop low_bmi

. lab var hh_no_low_bmi "Household has no adult with low BMI"

. 
. tab hh_no_low_bmi, miss

  Household |
     has no |
 adult with |
    low BMI |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,257        4.55        4.55
          1 |     65,495       91.42       95.96
          . |      2,893        4.04      100.00
------------+-----------------------------------
      Total |     71,645      100.00

.         /*Figures are exclusively based on information from eligible adult 
>         women (15-49 years) */
. 
. 
. *** BMI Indicator for Men 15-59 years ***
. ******************************************************************* 
. 
. gen m_bmi = hb40/100
(65,094 missing values generated)

. lab var m_bmi "Male's BMI"

. 
. gen m_low_bmi = (m_bmi<18.5)

. replace m_low_bmi = . if m_bmi==. | m_bmi>=99.90
(65,094 real changes made, 65,094 to missing)

. replace m_low_bmi = . if age>59 & age<.
(0 real changes made)

. lab var m_low_bmi "BMI of male < 18.5"

.  
. bysort hh_id: egen low_bmi = max(m_low_bmi) 
(45200 missing values generated)

. 
. replace hh_no_low_bmi = 0 if low_bmi==1
(3,343 real changes made)

.         /*Under this section, households take a value of '0' if there's any male 
>         with low bmi*/
.         
. replace hh_no_low_bmi = 1 if low_bmi==0 & hh_no_low_bmi==.
(727 real changes made)

.         /*Under this section, households take a value of '1' if no male has low BMI 
>         & info is missing for women */
.         
. drop low_bmi

.         
. tab hh_no_low_bmi if subsample==1, miss

  Household |
     has no |
 adult with |
    low BMI |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      6,600       18.25       18.25
          1 |     27,494       76.01       94.26
          . |      2,076        5.74      100.00
------------+-----------------------------------
      Total |     36,170      100.00

.         /*Figures are based on information from eligible adult women and eligible
>         men. For countries that do not have male recode or lack anthropometric data
>         for men, then the figures are exclusively from women.  */
.         
. 
. 
. *** BMI-for-age for individuals 15-19 years and BMI for individuals 20-49 years ***
. ******************************************************************* 
. replace age_month=age_month_boys if age_month_boys<. & age_month==.
(1,629 real changes made)

. replace low_bmiage=low_bmiage_boys if low_bmiage_boys<. & low_bmiage==.
(1,182 real changes made)

. 
. gen low_bmi_byage = 0

. lab var low_bmi_byage "Individuals with low BMI or BMI-for-age"

. 
. replace low_bmi_byage = 1 if f_low_bmi==1
(502 real changes made)

.         //Replace variable "low_bmi_byage = 1" if eligible women have low BMI
. 
.         
.         /*Note: The following command will result in 0 changes when there is no BMI 
>         information from men*/
.         
. replace low_bmi_byage = 1 if low_bmi_byage==0 & m_low_bmi==1 
(617 real changes made)

.         //Replace variable "low_bmi_byage = 1" if eligible men have low BMI
.         
.         
.         /*Note: The following command replaces BMI with BMI-for-age for those 
>         between the age group of 15-19 by their age in months where information is 
>         available */
.         
. //Replacement for girls: 
. replace low_bmi_byage = 1 if low_bmiage==1 & age_month!=.
(0 real changes made)

. replace low_bmi_byage = 0 if low_bmiage==0 & age_month!=.
(429 real changes made)

. 
.                 //Replacements for boys:
. replace low_bmi_byage = 1 if low_bmiage_b==1 & age_month_b!=.
(0 real changes made)

. replace low_bmi_byage = 0 if low_bmiage_b==0 & age_month_b!=.
(0 real changes made)

.         
.         
.         /*Note: The following control variable is applied when there is BMI 
>         information for women and men, as well as BMI-for-age for teenagers */
. replace low_bmi_byage = . if f_low_bmi==. & m_low_bmi==. & low_bmiage==. & low_bmiage_b==. 
(57,570 real changes made, 57,570 to missing)

. 
.                 
. bysort hh_id: egen low_bmi = max(low_bmi_byage)
(38866 missing values generated)

. 
. gen     hh_no_low_bmiage = (low_bmi==0)

.         /*Households take a value of '1' if all eligible adults and teenagers in the 
>         household has normal bmi or bmi-for-age */
.         
. replace hh_no_low_bmiage = . if low_bmi==.
(38,866 real changes made, 38,866 to missing)

.         /*Households take a value of '.' if there is no information from eligible 
>         individuals in the household */
.         
. replace hh_no_low_bmiage = 1 if no_adults_eligible_bmi==1
(36,566 real changes made)

.         /*Households take a value of '1' if there is no eligible population.*/
. 
. 
. drop low_bmi

. lab var hh_no_low_bmiage "Household has no adult with low BMI or BMI-for-age"

. 
. tab hh_no_low_bmi if subsample==1, m    

  Household |
     has no |
 adult with |
    low BMI |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      6,600       18.25       18.25
          1 |     27,494       76.01       94.26
          . |      2,076        5.74      100.00
------------+-----------------------------------
      Total |     36,170      100.00

. tab hh_no_low_bmiage if subsample==1, m

  Household |
     has no |
 adult with |
 low BMI or |
BMI-for-age |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      4,273       11.81       11.81
          1 |     29,597       81.83       93.64
          . |      2,300        6.36      100.00
------------+-----------------------------------
      Total |     36,170      100.00

. 
.         /*NOTE that hh_no_low_bmi takes value 1 if: (a) no any eligible adult in the 
>         household has (observed) low BMI or (b) there are no eligible adults in the 
>         household. One has to check and adjust the dofile so all people who are 
>         eligible and/or measured are included. It is particularly important to check 
>         if male are measured and what age group among males and females. The 
>         variable takes values 0 for those households that have at least one adult 
>         with observed low BMI. The variable has a missing value only when there is 
>         missing info on BMI for ALL eligible adults in the household */
. 
.         
. 
. ********************************************************************************
. *** Step 2.3b Child Nutrition ***
. ********************************************************************************
. 
. *** Child Underweight Indicator ***
. ************************************************************************
. 
. bysort hh_id: egen temp = max(underweight)
(49563 missing values generated)

. gen     hh_no_underweight = (temp==0) 

.         //Takes value 1 if no child in the hh is underweight 
. replace hh_no_underweight = . if temp==.
(49,563 real changes made, 49,563 to missing)

. replace hh_no_underweight = 1 if no_child_eligible==1 
(47,230 real changes made)

.         /* Households with no eligible children will receive a value of 1 */
. lab var hh_no_underweight "Household has no child underweight - 2 stdev"

. drop temp

. 
. 
. *** Child Stunting Indicator ***
. ************************************************************************
. 
. bysort hh_id: egen temp = max(stunting)
(49780 missing values generated)

. gen     hh_no_stunting = (temp==0) 

.         //Takes value 1 if no child in the hh is stunted
. replace hh_no_stunting = . if temp==.
(49,780 real changes made, 49,780 to missing)

. replace hh_no_stunting = 1 if no_child_eligible==1 
(47,230 real changes made)

. lab var hh_no_stunting "Household has no child stunted - 2 stdev"

. drop temp

. 
. 
. *** Child Either Stunted or Underweight Indicator ***
. ************************************************************************
. 
. gen uw_st = 1 if stunting==1 | underweight==1
(69,949 missing values generated)

. replace uw_st = 0 if stunting==0 & underweight==0
(3,273 real changes made)

. replace uw_st = . if stunting==. & underweight==.
(0 real changes made)

. 
. bysort hh_id: egen temp = max(uw_st)
(49679 missing values generated)

. gen     hh_no_uw_st = (temp==0) 

.         //Takes value 1 if no child in the hh is underweight or stunted
. replace hh_no_uw_st = . if temp==.
(49,679 real changes made, 49,679 to missing)

. replace hh_no_uw_st = 1 if no_child_eligible==1
(47,230 real changes made)

.         //Households with no eligible children will receive a value of 1 
. lab var hh_no_uw_st "Household has no child underweight or stunted"

. drop temp

. 
. 
. 
. ********************************************************************************
. *** Step 2.3c Household Nutrition Indicator ***
. ********************************************************************************
. 
. gen hh_nutrition_uw_st = 1 if (hh_no_low_bmiage==1 & hh_no_uw_st==1) | (hh_no_low_bmiage==. & hh_no_uw_st==1 & no_child_eligible==0) | (hh_no_low_bmiage==1 & hh_no_uw_st==. & no_adults_
> eligible_bmi==0)
(14,558 missing values generated)

. replace hh_nutrition_uw_st = 0 if hh_no_low_bmiage==0 | hh_no_uw_st==0
(12,322 real changes made)

. replace hh_nutrition_uw_st = . if hh_no_low_bmiage==. & hh_no_uw_st==.
(0 real changes made)

. replace hh_nutrition_uw_st = 1 if no_eligibles_bmi==1
(0 real changes made)

.         /*If country have collected anthropometric data from women, 
>         child 0-5 & a subsample of men, we only replace households which do not have 
>         any of these three applicable population as non-deprived*/
. lab var hh_nutrition_uw_st "Household has no child underweight/stunted or adult deprived by BMI/BMI-for-age"

. 
. 
. ********************************************************************************
. *** Step 2.4 Child Mortality ***
. ********************************************************************************
. 
. codebook v206 v207 mv206 mv207

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
v206                                                                                                                                                                     sons who have died
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)

                 range:  [0,9]                        units:  1
         unique values:  8                        missing .:  56,284/71,645

            tabulation:  Freq.  Value
                        12,986  0
                         1,746  1
                           474  2
                           114  3
                            34  4
                             5  5
                             1  6
                             1  9
                        56,284  .

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
v207                                                                                                                                                                daughters who have died
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)

                 range:  [0,7]                        units:  1
         unique values:  8                        missing .:  56,284/71,645

            tabulation:  Freq.  Value
                        13,252  0
                         1,570  1
                           408  2
                            88  3
                            32  4
                             5  5
                             4  6
                             2  7
                        56,284  .

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
mv206                                                                                                                                                                    sons who have died
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)

                 range:  [0,11]                       units:  1
         unique values:  11                       missing .:  64,530/71,645

                  mean:   .365425
              std. dev:   .850002

           percentiles:        10%       25%       50%       75%       90%
                                 0         0         0         0         1

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
mv207                                                                                                                                                               daughters who have died
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)

                 range:  [0,11]                       units:  1
         unique values:  10                       missing .:  64,530/71,645

                  mean:   .309346
              std. dev:   .752106

           percentiles:        10%       25%       50%       75%       90%
                                 0         0         0         0         1

.         //v206 or mv206: number of sons who have died 
.         //v207 or mv207: number of daughters who have died
.         
. 
.         //Total child mortality reported by eligible women
. egen temp_f = rowtotal(v206 v207), missing
(56284 missing values generated)

. replace temp_f = 0 if v201==0
(0 real changes made)

. bysort  hh_id: egen child_mortality_f = sum(temp_f), missing
(10031 missing values generated)

. lab var child_mortality_f "Occurrence of child mortality reported by women"

. tab child_mortality_f, miss

 Occurrence |
   of child |
  mortality |
reported by |
      women |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     40,623       56.70       56.70
          1 |     10,777       15.04       71.74
          2 |      5,568        7.77       79.51
          3 |      2,472        3.45       82.96
          4 |      1,094        1.53       84.49
          5 |        605        0.84       85.34
          6 |        200        0.28       85.62
          7 |        129        0.18       85.80
          8 |         53        0.07       85.87
          9 |         21        0.03       85.90
         10 |         54        0.08       85.97
         12 |         10        0.01       85.99
         13 |          8        0.01       86.00
          . |     10,031       14.00      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. drop temp_f

.         
.         //Total child mortality reported by eligible men        
. egen temp_m = rowtotal(mv206 mv207), missing
(64530 missing values generated)

. replace temp_m = 0 if mv201==0
(0 real changes made)

. bysort  hh_id: egen child_mortality_m = sum(temp_m), missing
(43029 missing values generated)

. lab var child_mortality_m "Occurrence of child mortality reported by men"

. tab child_mortality_m, miss

 Occurrence |
   of child |
  mortality |
reported by |
        men |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     15,660       21.86       21.86
          1 |      5,435        7.59       29.44
          2 |      3,327        4.64       34.09
          3 |      1,655        2.31       36.40
          4 |      1,105        1.54       37.94
          5 |        579        0.81       38.75
          6 |        355        0.50       39.24
          7 |        214        0.30       39.54
          8 |         73        0.10       39.64
          9 |         74        0.10       39.75
         10 |         44        0.06       39.81
         11 |         63        0.09       39.90
         12 |          8        0.01       39.91
         14 |          8        0.01       39.92
         18 |         16        0.02       39.94
          . |     43,029       60.06      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. drop temp_m

. 
. egen child_mortality = rowmax(child_mortality_f child_mortality_m)
(7239 missing values generated)

. lab var child_mortality "Total child mortality within household reported by women & men"

. tab child_mortality if subsample==1, miss       

Total child |
  mortality |
     within |
  household |
reported by |
women & men |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     16,379       45.28       45.28
          1 |      7,656       21.17       66.45
          2 |      4,710       13.02       79.47
          3 |      2,543        7.03       86.50
          4 |      1,473        4.07       90.58
          5 |        830        2.29       92.87
          6 |        433        1.20       94.07
          7 |        287        0.79       94.86
          8 |        106        0.29       95.15
          9 |         53        0.15       95.30
         10 |         98        0.27       95.57
         11 |         63        0.17       95.75
         12 |          8        0.02       95.77
         13 |          8        0.02       95.79
         14 |          8        0.02       95.81
         18 |         16        0.04       95.86
          . |      1,499        4.14      100.00
------------+-----------------------------------
      Total |     36,170      100.00

.         
.         
. /*Deprived if any children died in the household */
. ************************************************************************
. 
. gen     hh_mortality = (child_mortality==0)

.         /*Household is replaced with a value of "1" if there is no incidence of 
>         child mortality*/
. replace hh_mortality = . if child_mortality==.
(7,239 real changes made, 7,239 to missing)

. 
. replace hh_mortality = 1 if no_adults_eligible==1 
(6,369 real changes made)

.         /*Change eligibility to "no_fem_eligible==1" if child mortality indicator 
>         is constructed solely using information from women */
.         
. lab var hh_mortality "Household had no child mortality"

. tab hh_mortality if subsample==1, miss

  Household |
     had no |
      child |
  mortality |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     18,292       50.57       50.57
          1 |     17,622       48.72       99.29
          . |        256        0.71      100.00
------------+-----------------------------------
      Total |     36,170      100.00

. 
. 
. /*Deprived if any children died in the household in the last 5 years 
> from the survey year */
. ************************************************************************
. 
. tab child_died_per_wom_5y, miss

Total child |
  death for |
 each women |
in the last |
    5 years |
     (birth |
    recode) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     10,228       14.28       14.28
          1 |        997        1.39       15.67
          2 |        124        0.17       15.84
          3 |         22        0.03       15.87
          4 |          1        0.00       15.87
          . |     60,273       84.13      100.00
------------+-----------------------------------
      Total |     71,645      100.00

.         /* The 'child_died_per_wom_5y' variable was constructed in Step 1.2 using 
>         information from individual women who ever gave birth in the BR file. The 
>         missing values represent eligible woman who have never ever given birth and 
>         so are not present in the BR file. But these 'missing women' may be living 
>         in households where there are other women with child mortality information 
>         from the BR file. So at this stage, it is important that we aggregate the 
>         information that was obtained from the BR file at the household level. This
>         ensures that women who were not present in the BR file is assigned with a 
>         value, following the information provided by other women in the household.*/
. 
. replace child_died_per_wom_5y = 0 if v201==0 
(3,989 real changes made)

.         /*Assign a value of "0" for:
>         - all eligible women who never ever gave birth */
. replace child_died_per_wom_5y = 0 if v206==0 & v207==0 & child_died_per_wom_5y==. /* NEW */
(0 real changes made)

. 
. replace child_died_per_wom_5y = 0 if no_fem_eligible==1 
(8,873 real changes made)

.         /*Assign a value of "0" for:
>         - individuals living in households that have non-eligible women */      
.         
. bysort hh_id: egen child_mortality_5y = sum(child_died_per_wom_5y), missing
(1158 missing values generated)

. 
. replace child_mortality_5y = 0 if child_mortality_5y==. & child_mortality==0
(179 real changes made)

.         /*Replace all households as 0 death if women has missing value and men 
>         reported no death in those households */
. 
. label var child_mortality_5y "Total child mortality within household past 5 years reported by women"

. tab child_mortality_5y if subsample==1, miss

Total child |
  mortality |
     within |
  household |
     past 5 |
      years |
reported by |
      women |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     31,985       88.43       88.43
          1 |      3,170        8.76       97.19
          2 |        545        1.51       98.70
          3 |         75        0.21       98.91
          4 |         30        0.08       98.99
          . |        365        1.01      100.00
------------+-----------------------------------
      Total |     36,170      100.00

. 
.         /*
>         The new standard MPI indicator takes a value of "1" if eligible women  
>         within the household reported no child mortality or if any child died longer 
>         than 5 years from the survey year. The indicator takes a value of "0" if 
>         women in the household reported any child mortality in the last 5 years from 
>         the survey year. Households were replaced with a value of "1" if eligible 
>         men within the household reported no child mortality in the absence of 
>         information from women. The indicator takes a missing value if there was 
>         missing information on reported death from eligible individuals.
>         */
. 
. gen hh_mortality_5y = (child_mortality_5y==0)

. replace hh_mortality_5y = . if child_mortality_5y==.
(979 real changes made, 979 to missing)

. tab hh_mortality_5y if subsample==1, miss       

hh_mortalit |
       y_5y |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,820       10.56       10.56
          1 |     31,985       88.43       98.99
          . |        365        1.01      100.00
------------+-----------------------------------
      Total |     36,170      100.00

. lab var hh_mortality_5y "Household had no child mortality in the last 5 years"

. 
. 
. 
. ********************************************************************************
. *** Step 2.5 Electricity ***
. ********************************************************************************
. /*Members of the household are considered deprived if the household has no 
> electricity */
. 
. clonevar electricity = hv206 

. codebook electricity, tab (10)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
electricity                                                                                                                                                                 has electricity
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV206

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        59,077         0  no
                        12,568         1  yes

. label var electricity "Household has electricity"

. 
. 
. ********************************************************************************
. *** Step 2.6 Sanitation ***
. ********************************************************************************
. 
. /*Members of the household are considered deprived if the household's sanitation 
> facility is not improved, according to MDG guidelines, or it is improved but 
> shared with other household. In cases of mismatch between the MDG guideline and 
> country report, we followed the country report. */
. 
. clonevar toilet = hv205  

. codebook toilet, tab(30) 

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
toilet                                                                                                                                                              type of toilet facility
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV205

                 range:  [11,43]                      units:  1
         unique values:  12                       missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                           152        11  flush to piped sewer system
                         3,495        12  flush to septic tank
                         1,598        13  flush to pit latrine
                           103        14  flush to somewhere else
                             9        15  flush, don't know where
                         1,570        21  ventilated improved pit latrine
                                          (vip)
                        29,470        22  pit latrine with slab
                        19,455        23  pit latrine without slab/open
                                          pit
                        13,553        31  no facility/bush/field
                           788        41  composting toilet
                           130        42  bucket toilet
                         1,322        43  hanging toilet/latrine

. codebook hv225, tab(30)  

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv225                                                                                                                                                    share toilet with other households
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV225

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  13,553/71,645

            tabulation:  Freq.   Numeric  Label
                        17,661         0  no
                        40,431         1  yes
                        13,553         .  

. clonevar shared_toilet = hv225 
(13,553 missing values generated)

.         //0=no;1=yes;.=missing
. 
. gen toilet_mdg = 1 if (toilet==11 | toilet==12 | toilet==13 | toilet==15 | toilet==21 | toilet==22 | toilet==41 | toilet==44)
(34,563 missing values generated)

. replace toilet_mdg = 0 if toilet==14 | toilet==23 | toilet==31 | toilet==42 | toilet==43 | toilet==96
(34,563 real changes made)

. replace toilet_mdg = 0 if shared_toilet==1 
(24,693 real changes made)

. lab var toilet_mdg "Household has improved sanitation with MDG Standards"

. tab toilet toilet_mdg, miss

                      |     Household has
                      |  improved sanitation
       type of toilet |  with MDG Standards
             facility |         0          1 |     Total
----------------------+----------------------+----------
flush to piped sewer  |        86         66 |       152 
 flush to septic tank |       413      3,082 |     3,495 
 flush to pit latrine |       762        836 |     1,598 
flush to somewhere el |       103          0 |       103 
flush, don't know whe |         0          9 |         9 
ventilated improved p |     1,176        394 |     1,570 
pit latrine with slab |    21,684      7,786 |    29,470 
pit latrine without s |    19,455          0 |    19,455 
no facility/bush/fiel |    13,553          0 |    13,553 
    composting toilet |       572        216 |       788 
        bucket toilet |       130          0 |       130 
hanging toilet/latrin |     1,322          0 |     1,322 
----------------------+----------------------+----------
                Total |    59,256     12,389 |    71,645 

. 
. /* follows DHS report:
>           flush to piped sewer system |        152        0.21        0.21 11 y
>                  flush to septic tank |      3,495        4.88        5.09 12 y
>                  flush to pit latrine |      1,598        2.23        7.32 13 y
>               flush to somewhere else |        103        0.14        7.46 14 n
>               flush, don't know where |          9        0.01        7.48 15 y
> ventilated improved pit latrine (vip) |      1,570        2.19        9.67 21 y
>                 pit latrine with slab |     29,470       41.13       50.80 22 y
>     pit latrine without slab/open pit |     19,455       27.15       77.96 23 n
>                no facility/bush/field |     13,553       18.92       96.87 31 n
>                     composting toilet |        788        1.10       97.97 41 y
>                         bucket toilet |        130        0.18       98.15 42 n
>                hanging toilet/latrine |      1,322        1.85      100.00 43 n
> --------------------------------------+-----------------------------------
>                                 Total |     71,645      100.00 */
. 
. ********************************************************************************
. *** Step 2.7 Drinking Water  ***
. ********************************************************************************
. 
. /*Members of the household are considered deprived if the household does not 
> have access to safe drinking water according to MDG guidelines, or safe drinking 
> water is more than a 30-minute walk from home roundtrip. In cases of mismatch 
> between the MDG guideline and country report, we followed the country report.*/
. 
. 
. clonevar water = hv201  

. clonevar timetowater = hv204  

. codebook water, tab(100)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
water                                                                                                                                                              source of drinking water
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV201

                 range:  [11,72]                      units:  1
         unique values:  15                       missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                           162        11  piped into dwelling
                           897        12  piped to yard/plot
                         1,582        13  piped to neighbor
                         8,468        14  public tap/standpipe
                        13,164        21  tube well or borehole
                        15,592        31  protected well
                         5,855        32  unprotected well
                           984        41  protected spring
                         7,062        42  unprotected spring
                        13,992        43  river/dam/lake/ponds/stream/cana
                                          l/irrigation channel
                         1,244        51  rainwater
                            55        61  tanker truck
                            32        62  cart with small tank
                            32        71  bottled water
                         2,524        72  sachet

. 
. gen water_mdg = 1 if water==11 | water==12 | water==13 | water==14 | water==21 | water==31 | water==41 | water==51 | water==61 | water==62 | water==71 | water==72
(26,909 missing values generated)

. replace water_mdg = 0 if water==32 | water==42 | water==43 | water==96 
(26,909 real changes made)

. replace water_mdg = 0 if timetowater >= 30 & timetowater!=. & timetowater!=996 & timetowater!=998 & timetowater!=999 
(9,800 real changes made)

.         //Deprived if water is at 30 minutes' walk or more (roundtrip) 
. 
. lab var water_mdg "Household has drinking water with MDG standards (considering distance)"

. tab water water_mdg, miss

                      |     Household has
                      |  drinking water with
                      |     MDG standards
                      |     (considering
   source of drinking |       distance)
                water |         0          1 |     Total
----------------------+----------------------+----------
  piped into dwelling |         0        162 |       162 
   piped to yard/plot |         0        897 |       897 
    piped to neighbor |         0      1,582 |     1,582 
 public tap/standpipe |     2,149      6,319 |     8,468 
tube well or borehole |     3,030     10,134 |    13,164 
       protected well |     3,309     12,283 |    15,592 
     unprotected well |     5,855          0 |     5,855 
     protected spring |       486        498 |       984 
   unprotected spring |     7,062          0 |     7,062 
river/dam/lake/ponds/ |    13,992          0 |    13,992 
            rainwater |         0      1,244 |     1,244 
         tanker truck |        26         29 |        55 
 cart with small tank |         8         24 |        32 
        bottled water |         1         31 |        32 
               sachet |       791      1,733 |     2,524 
----------------------+----------------------+----------
                Total |    36,709     34,936 |    71,645 

. 
. /* Follows the DHS report */
. 
. /*                  piped into dwelling |        162        0.23        0.23 11 y
>                      piped to yard/plot |        897        1.25        1.48 12 y
>                       piped to neighbor |      1,582        2.21        3.69 13 y
>                    public tap/standpipe |      8,468       11.82       15.51 14 y
>                   tube well or borehole |     13,164       18.37       33.88 21 y
>                          protected well |     15,592       21.76       55.64 31 y
>                        unprotected well |      5,855        8.17       63.81 32 n
>                        protected spring |        984        1.37       65.19 41 y
>                      unprotected spring |      7,062        9.86       75.05 42 n
> river/dam/lake/ponds/stream/canal/irrig |     13,992       19.53       94.57 43 n
>                               rainwater |      1,244        1.74       96.31 51 y
>                            tanker truck |         55        0.08       96.39 61 y
>                    cart with small tank |         32        0.04       96.43 62 y
>                           bottled water |         32        0.04       96.48 71 y
>                                  sachet |      2,524        3.52      100.00 72 y
> ----------------------------------------+-----------------------------------
>                                   Total |     71,645      100.00 */
. 
. ********************************************************************************
. *** Step 2.8 Housing ***
. ********************************************************************************
. 
. /* Members of the household are considered deprived if the household 
> has a dirt, sand or dung floor */
. 
. clonevar floor = hv213 

. codebook floor, tab(99)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
floor                                                                                                                                                                   main floor material
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV213

                 range:  [11,96]                      units:  1
         unique values:  10                       missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        32,917        11  earth/sand
                           989        12  dung
                            22        21  wood planks
                            32        22  palm/bamboo
                           128        31  parquet or polished wood
                           352        32  vinyl or asphalt strips
                         5,336        33  ceramic tiles
                        31,273        34  cement
                           559        35  carpet
                            37        96  other

. gen     floor_imp = 1

. replace floor_imp = 0 if floor==11 | floor==12 | floor==96  
(33,943 real changes made)

.         //Deprived if "mud/earth", "sand", "dung", "other"      
. replace floor_imp = . if floor==. | floor==99 
(0 real changes made)

. lab var floor_imp "Household has floor that it is not earth/sand/dung"

. tab floor floor_imp, m  

                      |  Household has floor
                      |    that it is not
                      |    earth/sand/dung
  main floor material |         0          1 |     Total
----------------------+----------------------+----------
           earth/sand |    32,917          0 |    32,917 
                 dung |       989          0 |       989 
          wood planks |         0         22 |        22 
          palm/bamboo |         0         32 |        32 
parquet or polished w |         0        128 |       128 
vinyl or asphalt stri |         0        352 |       352 
        ceramic tiles |         0      5,336 |     5,336 
               cement |         0     31,273 |    31,273 
               carpet |         0        559 |       559 
                other |        37          0 |        37 
----------------------+----------------------+----------
                Total |    33,943     37,702 |    71,645 

. 
. 
. 
. /* Members of the household are considered deprived if the household has wall 
> made of natural or rudimentary materials */
. clonevar wall = hv214 

. codebook wall, tab(99)  

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
wall                                                                                                                                                                     main wall material
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV214

                 range:  [11,96]                      units:  1
         unique values:  16                       missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                           122        11  no walls
                           199        12  cane/palm/trunks
                        17,557        13  dirt
                         5,588        21  bamboo with mud
                         5,115        22  stone with mud
                            28        23  uncovered adobe
                            59        24  plywood
                            54        25  cardboard
                            42        26  reused wood
                        34,294        31  cement
                           257        32  stone with lime/cement
                         3,657        33  bricks
                         3,335        34  cement blocks
                            34        35  covered adobe
                           115        36  wood planks/shingles
                         1,189        96  other

. gen     wall_imp = 1 

. replace wall_imp = 0 if wall<=26 | wall==96  
(29,953 real changes made)

.         /*Deprived if "no wall" "cane/palms/trunk" "mud/dirt" 
>         "grass/reeds/thatch" "pole/bamboo with mud" "stone with mud" "plywood"
>         "cardboard" "carton/plastic" "uncovered adobe" "canvas/tent" 
>         "unburnt bricks" "reused wood" "other"*/
. replace wall_imp = . if wall==. | wall==99      
(0 real changes made)

. lab var wall_imp "Household has wall that it is not of low quality materials"

. tab wall wall_imp, m

                      |  Household has wall
                      | that it is not of low
                      |   quality materials
   main wall material |         0          1 |     Total
----------------------+----------------------+----------
             no walls |       122          0 |       122 
     cane/palm/trunks |       199          0 |       199 
                 dirt |    17,557          0 |    17,557 
      bamboo with mud |     5,588          0 |     5,588 
       stone with mud |     5,115          0 |     5,115 
      uncovered adobe |        28          0 |        28 
              plywood |        59          0 |        59 
            cardboard |        54          0 |        54 
          reused wood |        42          0 |        42 
               cement |         0     34,294 |    34,294 
stone with lime/cemen |         0        257 |       257 
               bricks |         0      3,657 |     3,657 
        cement blocks |         0      3,335 |     3,335 
        covered adobe |         0         34 |        34 
 wood planks/shingles |         0        115 |       115 
                other |     1,189          0 |     1,189 
----------------------+----------------------+----------
                Total |    29,953     41,692 |    71,645 

.         
. 
.         
. /* Members of the household are considered deprived if the household has roof 
> made of natural or rudimentary materials */
. clonevar roof = hv215

. codebook roof, tab(99)          

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
roof                                                                                                                                                                     main roof material
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV215

                 range:  [11,96]                      units:  1
         unique values:  14                       missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                           251        11  no roof
                         5,198        12  thatch/palm leaf
                            16        13  sod
                           480        21  rustic mat
                         1,048        22  palm/bamboo
                           457        23  wood planks
                           371        24  cardboard
                        63,112        31  metal/zinc
                           177        32  wood
                            24        33  calamine/cement fiber
                            89        34  ceramic tiles
                           418        35  cement
                             3        36  roofing shingles
                             1        96  other

. gen     roof_imp = 1 

. replace roof_imp = 0 if roof<=26 | roof==96  
(7,822 real changes made)

.         /*Deprived if "no roof" "thatch/palm leaf" "mud/earth/lump of earth" 
>         "sod/grass" "plastic/polythene sheeting" "rustic mat" "cardboard" 
>         "canvas/tent" "wood planks/reused wood" "unburnt bricks" "other"*/
. replace roof_imp = . if roof==. | roof==99      
(0 real changes made)

. lab var roof_imp "Household has roof that it is not of low quality materials"

. tab roof roof_imp, m

                      |  Household has roof
                      | that it is not of low
                      |   quality materials
   main roof material |         0          1 |     Total
----------------------+----------------------+----------
              no roof |       251          0 |       251 
     thatch/palm leaf |     5,198          0 |     5,198 
                  sod |        16          0 |        16 
           rustic mat |       480          0 |       480 
          palm/bamboo |     1,048          0 |     1,048 
          wood planks |       457          0 |       457 
            cardboard |       371          0 |       371 
           metal/zinc |         0     63,112 |    63,112 
                 wood |         0        177 |       177 
calamine/cement fiber |         0         24 |        24 
        ceramic tiles |         0         89 |        89 
               cement |         0        418 |       418 
     roofing shingles |         0          3 |         3 
                other |         1          0 |         1 
----------------------+----------------------+----------
                Total |     7,822     63,823 |    71,645 

. 
. 
. 
. /*Household is deprived in housing if the roof, floor OR walls uses 
> low quality materials.*/
. gen housing_1 = 1

. replace housing_1 = 0 if floor_imp==0 | wall_imp==0 | roof_imp==0
(38,785 real changes made)

. replace housing_1 = . if floor_imp==. & wall_imp==. & roof_imp==.
(0 real changes made)

. lab var housing_1 "Household has roof, floor & walls that it is not low quality material"

. tab housing_1, m

  Household |
  has roof, |
    floor & |
 walls that |
  it is not |
low quality |
   material |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     38,785       54.13       54.13
          1 |     32,860       45.87      100.00
------------+-----------------------------------
      Total |     71,645      100.00

. 
. 
. ********************************************************************************
. *** Step 2.9 Cooking Fuel ***
. ********************************************************************************
. 
. /* Members of the household are considered deprived if the household cooks with 
> solid fuels: wood, charcoal, crop residues or dung. "Indicators for Monitoring 
> the Millennium Development Goals", p. 63 */
. 
. clonevar cookingfuel = hv226  

. codebook cookingfuel, tab(99)

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
cookingfuel                                                                                                                                                            type of cooking fuel
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV226

                 range:  [1,96]                       units:  1
         unique values:  11                       missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                            38         1  electricity
                            85         2  lpg
                            32         3  natural gas
                           114         4  biogas
                             3         5  kerosene
                           197         6  coal, lignite
                        18,689         7  charcoal
                        52,196         8  wood
                             5         9  straw/shrubs/grass
                           281        95  no food cooked in house
                             5        96  other

. 
. 
. gen cooking_mdg = 1 if cookingfuel<=5 | cookingfuel==95 | cookingfuel==96
(71,087 missing values generated)

. replace cooking_mdg = 0 if (cookingfuel>5 & cookingfuel<=12)
(71,087 real changes made)

. replace cooking_mdg = . if cookingfuel==. | cookingfuel==99
(0 real changes made)

. lab var cooking_mdg "Househod has cooking fuel according to MDG standards"

.                          
. tab cookingfuel cooking_mdg, m

                      | Househod has cooking
                      | fuel according to MDG
                      |       standards
 type of cooking fuel |         0          1 |     Total
----------------------+----------------------+----------
          electricity |         0         38 |        38 
                  lpg |         0         85 |        85 
          natural gas |         0         32 |        32 
               biogas |         0        114 |       114 
             kerosene |         0          3 |         3 
        coal, lignite |       197          0 |       197 
             charcoal |    18,689          0 |    18,689 
                 wood |    52,196          0 |    52,196 
   straw/shrubs/grass |         5          0 |         5 
no food cooked in hou |         0        281 |       281 
                other |         0          5 |         5 
----------------------+----------------------+----------
                Total |    71,087        558 |    71,645 

. 
. 
. ********************************************************************************
. *** Step 2.10 Assets ownership ***
. ********************************************************************************
. 
. /* Members of the household are considered deprived if the household does not 
> own more than one of: radio, TV, telephone, bike, motorbike or refrigerator and 
> does not own a car or truck. */
. 
.         //Check that for standard assets in living standards: "no"==0 and yes=="1"
. codebook hv208 hv207 hv221 hv243a hv209 hv212 hv210 hv211 hv243c hv243e

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv208                                                                                                                                                                        has television
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV208

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        59,600         0  no
                        12,045         1  yes

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv207                                                                                                                                                                             has radio
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV207

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        31,456         0  no
                        40,189         1  yes

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv221                                                                                                                                                             has telephone (land-line)
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV221

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        71,338         0  no
                           307         1  yes

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv243a                                                                                                                                                                 has mobile telephone
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV243A

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        18,521         0  no
                        53,124         1  yes

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv209                                                                                                                                                                      has refrigerator
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV209

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        64,162         0  no
                         7,483         1  yes

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv212                                                                                                                                                                         has car/truck
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV212

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        69,532         0  no
                         2,113         1  yes

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv210                                                                                                                                                                           has bicycle
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV210

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        66,351         0  no
                         5,294         1  yes

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv211                                                                                                                                                                has motorcycle/scooter
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV211

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        62,904         0  no
                         8,741         1  yes

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv243c                                                                                                                                                                has animal-drawn cart
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV243C

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        71,471         0  no
                           174         1  yes

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv243e                                                                                                                                                                       has a computer
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  HV243E

                 range:  [0,1]                        units:  1
         unique values:  2                        missing .:  0/71,645

            tabulation:  Freq.   Numeric  Label
                        68,547         0  no
                         3,098         1  yes

. 
. clonevar television = hv208 

. gen bw_television   = .
(71,645 missing values generated)

. clonevar radio = hv207 

. clonevar telephone =  hv221 

. clonevar mobiletelephone = hv243a  

. clonevar refrigerator = hv209 

. clonevar car = hv212    

. clonevar bicycle = hv210 

. clonevar motorbike = hv211 

. clonevar computer = hv243e

. clonevar animal_cart = hv243c

. 
. foreach var in television radio telephone mobiletelephone refrigerator car bicycle motorbike computer animal_cart {
  2. replace `var' = . if `var'==9 | `var'==99 | `var'==8 | `var'==98 
  3. }
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

.         //9 , 99 and 8, 98 are missing values
.         
. 
.         //Group telephone and mobiletelephone as a single variable
. replace telephone=1 if mobiletelephone==1
(52,840 real changes made)

. 
. 
. /* Members of the household are considered deprived in assets if the household 
> does not own more than one of: radio, TV, telephone, bike, motorbike, 
> refrigerator, computer or animal_cart and does not own a car or truck.*/
. 
. egen n_small_assets2 = rowtotal(television radio telephone refrigerator bicycle motorbike computer animal_cart), missing

. lab var n_small_assets2 "Household Number of Small Assets Owned" 

.   
.   
. gen hh_assets2 = (car==1 | n_small_assets2 > 1) 

. replace hh_assets2 = . if car==. & n_small_assets2==.
(0 real changes made)

. lab var hh_assets2 "Household Asset Ownership: HH has car or more than 1 small assets incl computer & animal cart"
note: label truncated to 80 characters

. 
. ta hh_assets2,m

  Household |
      Asset |
 Ownership: |
 HH has car |
    or more |
     than 1 |
      small |
assets incl |
  computer  |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     31,802       44.39       44.39
          1 |     39,843       55.61      100.00
------------+-----------------------------------
      Total |     71,645      100.00

.         
. ********************************************************************************
. *** Step 2.11 Rename and keep variables for MPI calculation 
. ********************************************************************************
.         
. 
.         //Retain data on sampling design: 
. desc hv022 hv021        

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv022           byte    %8.0g      HV022      sample strata for sampling errors
hv021           int     %8.0g                 primary sampling unit

. clonevar strata = hv022

. clonevar psu = hv021

. 
. 
.         //Retain year, month & date of interview:
. desc hv007 hv006 hv008

              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hv007           int     %8.0g                 year of interview
hv006           byte    %8.0g                 month of interview
hv008           int     %8.0g                 date of interview (cmc)

. clonevar year_interview = hv007         

. clonevar month_interview = hv006 

. clonevar date_interview = hv008

.  
. 
. *** Rename key global MPI indicators for estimation ***
. recode hh_mortality_5y      (0=1)(1=0) , gen(d_cm)
(70666 differences between hh_mortality_5y and d_cm)

. recode hh_nutrition_uw_st       (0=1)(1=0) , gen(d_nutr)
(69409 differences between hh_nutrition_uw_st and d_nutr)

. recode hh_child_atten           (0=1)(1=0) , gen(d_satt)
(71645 differences between hh_child_atten and d_satt)

. recode hh_years_edu6            (0=1)(1=0) , gen(d_educ)
(71611 differences between hh_years_edu6 and d_educ)

. recode electricity                      (0=1)(1=0) , gen(d_elct)
(71645 differences between electricity and d_elct)

. recode water_mdg                        (0=1)(1=0) , gen(d_wtr)
(71645 differences between water_mdg and d_wtr)

. recode toilet_mdg                       (0=1)(1=0) , gen(d_sani)
(71645 differences between toilet_mdg and d_sani)

. recode housing_1                        (0=1)(1=0) , gen(d_hsg)
(71645 differences between housing_1 and d_hsg)

. recode cooking_mdg                      (0=1)(1=0) , gen(d_ckfl)
(71645 differences between cooking_mdg and d_ckfl)

. recode hh_assets2                       (0=1)(1=0) , gen(d_asst)
(71645 differences between hh_assets2 and d_asst)

. 
. 
. 
. *** Keep selected variables for global MPI estimation ***
. keep hh_id ind_id ccty cty survey year subsample strata psu weight area relationship sex age agec7 agec4 marital hhsize region year_interview month_interview date_interview d_cm d_nutr 
> d_satt d_educ d_elct d_wtr d_sani d_hsg d_ckfl d_asst hh_mortality_5y hh_nutrition_uw_st hh_child_atten hh_years_edu6 electricity water_mdg toilet_mdg housing_1 cooking_mdg hh_assets2 

. 
. order hh_id ind_id ccty cty survey year subsample strata psu weight area relationship sex age agec7 agec4 marital hhsize region year_interview month_interview date_interview d_cm d_nutr
>  d_satt d_educ d_elct d_wtr d_sani d_hsg d_ckfl d_asst hh_mortality_5y hh_nutrition_uw_st hh_child_atten hh_years_edu6 electricity water_mdg toilet_mdg housing_1 cooking_mdg hh_assets2 

. 
. 
. 
. *** Sort, compress and save data for estimation ***
. sort ind_id

. compress
  variable hh_id was double now long
  variable ind_id was double now long
  variable subsample was double now byte
  variable hhsize was double now byte
  variable d_cm was double now byte
  variable d_nutr was double now byte
  variable d_satt was double now byte
  variable d_educ was double now byte
  variable d_wtr was double now byte
  variable d_sani was double now byte
  variable d_hsg was double now byte
  variable d_ckfl was double now byte
  variable d_asst was double now byte
  variable hh_mortality_5y was double now byte
  variable hh_nutrition_uw_st was double now byte
  variable hh_child_atten was double now byte
  variable hh_years_edu6 was double now byte
  variable water_mdg was double now byte
  variable toilet_mdg was double now byte
  variable housing_1 was double now byte
  variable cooking_mdg was double now byte
  variable hh_assets2 was double now byte
  (10,603,460 bytes saved)

. save "$path_out/Sierra Leone_dhs19_pov.dta", replace 
file C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019\Outputs/Sierra Leone_dhs19_pov.dta saved

. log close
      name:  <unnamed>
       log:  C:\Users\Arthur.Martin\OneDrive - Department of Health and Social Care\Documents\LSE\Diss\CODING\Sierra Leone 2019/Sierra Leone_dhs19_dataprep.log
  log type:  text
 closed on:  19 Dec 2025, 18:58:37
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
